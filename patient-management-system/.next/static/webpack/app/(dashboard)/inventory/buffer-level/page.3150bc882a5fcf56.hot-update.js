"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(dashboard)/inventory/buffer-level/page",{

/***/ "(app-pages-browser)/./src/app/lib/actions.ts":
/*!********************************!*\
  !*** ./src/app/lib/actions.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addNewItem: () => (/* binding */ addNewItem),\n/* harmony export */   addPatient: () => (/* binding */ addPatient),\n/* harmony export */   getAvailableDrugsTotalPages: () => (/* binding */ getAvailableDrugsTotalPages),\n/* harmony export */   getBatchData: () => (/* binding */ getBatchData),\n/* harmony export */   getBatchNumber: () => (/* binding */ getBatchNumber),\n/* harmony export */   getBrandName: () => (/* binding */ getBrandName),\n/* harmony export */   getCompletedFilteredDrugsByBatch: () => (/* binding */ getCompletedFilteredDrugsByBatch),\n/* harmony export */   getCompletedFilteredDrugsByBrand: () => (/* binding */ getCompletedFilteredDrugsByBrand),\n/* harmony export */   getCompletedFilteredDrugsByModel: () => (/* binding */ getCompletedFilteredDrugsByModel),\n/* harmony export */   getDrugConcentrations: () => (/* binding */ getDrugConcentrations),\n/* harmony export */   getDrugModelsWithBufferLevel: () => (/* binding */ getDrugModelsWithBufferLevel),\n/* harmony export */   getDrugName: () => (/* binding */ getDrugName),\n/* harmony export */   getFilteredDrugsByBatch: () => (/* binding */ getFilteredDrugsByBatch),\n/* harmony export */   getFilteredDrugsByBrand: () => (/* binding */ getFilteredDrugsByBrand),\n/* harmony export */   getFilteredDrugsByModel: () => (/* binding */ getFilteredDrugsByModel),\n/* harmony export */   getFilteredPatients: () => (/* binding */ getFilteredPatients),\n/* harmony export */   getIssuedPatients: () => (/* binding */ getIssuedPatients),\n/* harmony export */   getPatientDetails: () => (/* binding */ getPatientDetails),\n/* harmony export */   getStockAnalysis: () => (/* binding */ getStockAnalysis),\n/* harmony export */   getStockByBatch: () => (/* binding */ getStockByBatch),\n/* harmony export */   getStockByBrand: () => (/* binding */ getStockByBrand),\n/* harmony export */   getStockByModel: () => (/* binding */ getStockByModel),\n/* harmony export */   getSupplierWisePricing: () => (/* binding */ getSupplierWisePricing),\n/* harmony export */   getTotalPages: () => (/* binding */ getTotalPages),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByBatch: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByBatch),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByBrand: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByBrand),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByModel: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByModel),\n/* harmony export */   getTotalPagesForFilteredDrugsByBatch: () => (/* binding */ getTotalPagesForFilteredDrugsByBatch),\n/* harmony export */   getTotalPagesForFilteredDrugsByBrand: () => (/* binding */ getTotalPagesForFilteredDrugsByBrand),\n/* harmony export */   getTotalPagesForFilteredDrugsByModel: () => (/* binding */ getTotalPagesForFilteredDrugsByModel),\n/* harmony export */   handleConfirmationOfBatchStatusChange: () => (/* binding */ handleConfirmationOfBatchStatusChange),\n/* harmony export */   searchDrugBrands: () => (/* binding */ searchDrugBrands),\n/* harmony export */   searchDrugModels: () => (/* binding */ searchDrugModels),\n/* harmony export */   searchSuppliers: () => (/* binding */ searchSuppliers),\n/* harmony export */   updateDrugBufferLevel: () => (/* binding */ updateDrugBufferLevel),\n/* harmony export */   updatePatient: () => (/* binding */ updatePatient)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"4005be1ba72ca1e715ec98f7f6eed9dc3de7aefeca\":\"getFilteredDrugsByBrand\",\"400eeabfcd66daae3e2b9c6ac5ceba9fac81c64707\":\"searchDrugModels\",\"402991de2925cb100f6a8aa015996b2a601694a4cc\":\"getDrugName\",\"4029ab35ca73287ac7a0c40e9bc8b8555739c5f7fd\":\"getFilteredDrugsByModel\",\"4035cf9f58df620154defdc5399cd8562aa413b026\":\"getPatientDetails\",\"403dca87f38693430d0c6b2afbfd983067927474ed\":\"getCompletedFilteredDrugsByModel\",\"403eced93f7c11a736a4e79100ce7c5cf739e1622b\":\"getBatchNumber\",\"4043386bee14185ba1515e2c1b2c15538548d21e68\":\"getSupplierWisePricing\",\"4057e760c315e49a0a42205d355f53d65a1f79e890\":\"getStockAnalysis\",\"406f0578a0e1dbec9bd5facbb9d871dd0d77661c20\":\"getIssuedPatients\",\"4073a980e56fa1d52dab9b3a2d1a905992fe5f4b58\":\"addPatient\",\"407ca96687095006b4f37c0355f80f1a27fdacd21f\":\"getTotalPagesForCompletedFilteredDrugsByBrand\",\"40849457ba0c5f3894fb9aba122884fb6f4ce8222a\":\"searchDrugBrands\",\"4084c170a160a4e48a345dc0ef61bf204d47fb3d9d\":\"getCompletedFilteredDrugsByBrand\",\"4088857bccc12d0836803db6feef417d823dc74756\":\"getFilteredDrugsByBatch\",\"409b434e4c4fd68e2904d77ac39067078634c54013\":\"getTotalPagesForFilteredDrugsByBrand\",\"409e2035dcfce1d852b96914c82eaeba5dac30ec02\":\"getTotalPagesForCompletedFilteredDrugsByModel\",\"40b30f5e28a95fa88f7257a195a485a7f50e77975e\":\"getTotalPagesForFilteredDrugsByBatch\",\"40b9e9786968cbc0a7b9f9db0ff1395736844cf347\":\"getBatchData\",\"40ccb2d71f4e66c085789e42dcb91a53235cdee869\":\"getCompletedFilteredDrugsByBatch\",\"40cdd3a94f633811e700506d5f5aa2ef363e2b576c\":\"getTotalPagesForFilteredDrugsByModel\",\"40d57e4d0d54cc8a563ce06d641f6ab6af61076abd\":\"searchSuppliers\",\"40dd9fdec4a18d61a381ad0facb905e9f3ec9f7844\":\"addNewItem\",\"40e1f707e44c8ce2c88b0e318a2beb7902b926ed12\":\"getTotalPagesForCompletedFilteredDrugsByBatch\",\"40e543c8bab9c233c537e3d326de8c0d33720f821b\":\"getStockByBrand\",\"40e5e834a1127b52ddd76957eabdb7b1caa378d621\":\"getStockByBatch\",\"40f8d5d15d5c38e22e630ca513233933a5fea844d3\":\"getBrandName\",\"40fb15b3da819b631c4cdb8f6ad05b77d7d1b47ed5\":\"getStockByModel\",\"6042bb8e1de771e247002f49abeefe7c859e53a236\":\"updatePatient\",\"6064b2d777371e3733fd367750e5a26a7287b47618\":\"getTotalPages\",\"606d8b1018b54c08942dd4809d9fa99ece58a21d8e\":\"getDrugModelsWithBufferLevel\",\"608c76d02aa08c9da8202c5a191c1aea062d2bccf4\":\"handleConfirmationOfBatchStatusChange\",\"60d0e018d5c1c11d0ce16a7664ee7781a525766663\":\"getDrugConcentrations\",\"60ec0816e907232487cbab09be1afb951af9f0c8ac\":\"getAvailableDrugsTotalPages\",\"70aceda58d67a9352aae417dae45861cb50115f322\":\"getFilteredPatients\",\"781190e03b9e9c4cb80194c3b4ce993e7b66be2fc2\":\"updateDrugBufferLevel\"} */ \nvar getTotalPages = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6064b2d777371e3733fd367750e5a26a7287b47618\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPages\");\nvar getFilteredPatients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70aceda58d67a9352aae417dae45861cb50115f322\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredPatients\");\nvar getTotalPagesForFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40cdd3a94f633811e700506d5f5aa2ef363e2b576c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByModel\");\nvar getTotalPagesForFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"409b434e4c4fd68e2904d77ac39067078634c54013\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByBrand\");\nvar getTotalPagesForFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b30f5e28a95fa88f7257a195a485a7f50e77975e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByBatch\");\nvar getFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4029ab35ca73287ac7a0c40e9bc8b8555739c5f7fd\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByModel\");\nvar getFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4005be1ba72ca1e715ec98f7f6eed9dc3de7aefeca\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByBrand\");\nvar getFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4088857bccc12d0836803db6feef417d823dc74756\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByBatch\");\nvar getPatientDetails = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4035cf9f58df620154defdc5399cd8562aa413b026\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getPatientDetails\");\nvar addPatient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4073a980e56fa1d52dab9b3a2d1a905992fe5f4b58\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"addPatient\");\nvar updatePatient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6042bb8e1de771e247002f49abeefe7c859e53a236\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updatePatient\");\nvar searchSuppliers = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d57e4d0d54cc8a563ce06d641f6ab6af61076abd\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchSuppliers\");\nvar addNewItem = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40dd9fdec4a18d61a381ad0facb905e9f3ec9f7844\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"addNewItem\");\nvar getBatchData = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b9e9786968cbc0a7b9f9db0ff1395736844cf347\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBatchData\");\nvar handleConfirmationOfBatchStatusChange = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"608c76d02aa08c9da8202c5a191c1aea062d2bccf4\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"handleConfirmationOfBatchStatusChange\");\nvar getBrandName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40f8d5d15d5c38e22e630ca513233933a5fea844d3\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBrandName\");\nvar getDrugName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"402991de2925cb100f6a8aa015996b2a601694a4cc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugName\");\nvar getBatchNumber = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403eced93f7c11a736a4e79100ce7c5cf739e1622b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBatchNumber\");\nvar getAvailableDrugsTotalPages = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60ec0816e907232487cbab09be1afb951af9f0c8ac\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getAvailableDrugsTotalPages\");\nvar getStockByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40fb15b3da819b631c4cdb8f6ad05b77d7d1b47ed5\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByModel\");\nvar getStockByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e5e834a1127b52ddd76957eabdb7b1caa378d621\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByBatch\");\nvar getStockByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e543c8bab9c233c537e3d326de8c0d33720f821b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByBrand\");\nvar getSupplierWisePricing = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4043386bee14185ba1515e2c1b2c15538548d21e68\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getSupplierWisePricing\");\nvar getStockAnalysis = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4057e760c315e49a0a42205d355f53d65a1f79e890\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockAnalysis\");\nvar getTotalPagesForCompletedFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"409e2035dcfce1d852b96914c82eaeba5dac30ec02\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByModel\");\nvar getCompletedFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403dca87f38693430d0c6b2afbfd983067927474ed\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByModel\");\nvar getTotalPagesForCompletedFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"407ca96687095006b4f37c0355f80f1a27fdacd21f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByBrand\");\nvar getCompletedFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4084c170a160a4e48a345dc0ef61bf204d47fb3d9d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByBrand\");\nvar getTotalPagesForCompletedFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e1f707e44c8ce2c88b0e318a2beb7902b926ed12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByBatch\");\nvar getCompletedFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ccb2d71f4e66c085789e42dcb91a53235cdee869\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByBatch\");\nvar getIssuedPatients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"406f0578a0e1dbec9bd5facbb9d871dd0d77661c20\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getIssuedPatients\");\nvar searchDrugBrands = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40849457ba0c5f3894fb9aba122884fb6f4ce8222a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchDrugBrands\");\nvar searchDrugModels = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400eeabfcd66daae3e2b9c6ac5ceba9fac81c64707\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchDrugModels\");\nvar getDrugConcentrations = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60d0e018d5c1c11d0ce16a7664ee7781a525766663\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugConcentrations\");\nvar getDrugModelsWithBufferLevel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"606d8b1018b54c08942dd4809d9fa99ece58a21d8e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugModelsWithBufferLevel\");\nvar updateDrugBufferLevel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"781190e03b9e9c4cb80194c3b4ce993e7b66be2fc2\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateDrugBufferLevel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvbGliL2FjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBaUJzQkEsOEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQVdBQyxvQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBd0JBQyxxREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMEJBQyxxREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBaURBQyxxREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMkJBQyx3Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0ZBQyx3Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBaUZBQyx3Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBdUVBQyxrQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBUUFDLDJCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFvREFDLDhCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFnREFDLGdDQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUF5QkFDLDJCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUEwSUFDLDZCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFxREFDLHNEQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFnQ0FDLDZCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFhQUMsNEJBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWFBQywrQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBNkNBQyw0Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBd0NBQyxnQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBK0RBQyxnQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0RBQyxnQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBb0ZBQyx1Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBdURBQyxpQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBa0dBQyw4REFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBK0JBQyxpREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBeURBQyw4REFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBK0JBQyxpREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBeURBQyw4REFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBK0JBQyxpREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBOEZBQyxrQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBbUNBQyxpQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBbUJBQyxpQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0NBQyxzQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMkJBQyw2Q0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0lBQyxzQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBIiwic291cmNlcyI6WyIvVXNlcnMvcHVidWR1bWFub2pla2FuYXlha2EvRG9jdW1lbnRzL1BhdGllbnRNYW5hZ21lbnQvUE1TL3BhdGllbnQtbWFuYWdlbWVudC1zeXN0ZW0vc3JjL2FwcC9saWIvYWN0aW9ucy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBzZXJ2ZXJcIjtcblxuaW1wb3J0IHsgcmV2YWxpZGF0ZVBhdGggfSBmcm9tIFwibmV4dC9jYWNoZVwiO1xuaW1wb3J0IHtcbiAgRGF0ZVJhbmdlLFxuICBEcnVnQ29uY2VudHJhdGlvbkRhdGFTdWdnZXN0aW9uLFxuICBJbnZlbnRvcnlGb3JtRGF0YSxcbiAgbXlFcnJvcixcbiAgUGF0aWVudEZvcm1EYXRhLFxuICBTb3J0T3B0aW9uLFxuICBTdG9ja0FuYWx5c2lzLFxuICBTdG9ja0RhdGEsXG4gIFN0b2NrUXVlcnlQYXJhbXMsXG59IGZyb20gXCJAL2FwcC9saWIvZGVmaW5pdGlvbnNcIjtcbmltcG9ydCB7IHByaXNtYSB9IGZyb20gXCIuL3ByaXNtYVwiO1xuaW1wb3J0IHsgQmF0Y2hTdGF0dXMsIERydWdUeXBlIH0gZnJvbSBcIkBwcmlzbWEvY2xpZW50XCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFBhZ2VzKHF1ZXJ5ID0gXCJcIiwgZmlsdGVyID0gXCJuYW1lXCIpIHtcbiAgY29uc3Qgd2hlcmVDbGF1c2UgPSBxdWVyeVxuICAgID8ge1xuICAgICAgICBbZmlsdGVyXTogeyBjb250YWluczogcXVlcnksIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9LFxuICAgICAgfVxuICAgIDoge307XG5cbiAgY29uc3QgdG90YWxQYXRpZW50cyA9IGF3YWl0IHByaXNtYS5wYXRpZW50LmNvdW50KHsgd2hlcmU6IHdoZXJlQ2xhdXNlIH0pO1xuICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsUGF0aWVudHMgLyBQQUdFX1NJWkUpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyZWRQYXRpZW50cyhcbiAgcXVlcnk6IHN0cmluZyA9IFwiXCIsXG4gIHBhZ2U6IG51bWJlciA9IDEsXG4gIGZpbHRlcjogc3RyaW5nID0gXCJuYW1lXCJcbikge1xuICBjb25zdCB3aGVyZUNvbmRpdGlvbiA9IHF1ZXJ5XG4gICAgPyB7XG4gICAgICAgIFtmaWx0ZXJdOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0sXG4gICAgICB9XG4gICAgOiB7fTtcblxuICByZXR1cm4gcHJpc21hLnBhdGllbnQuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB3aGVyZUNvbmRpdGlvbixcbiAgICB0YWtlOiBQQUdFX1NJWkUsXG4gICAgc2tpcDogKHBhZ2UgLSAxKSAqIFBBR0VfU0laRSxcbiAgICBvcmRlckJ5OiB7IG5hbWU6IFwiYXNjXCIgfSxcbiAgfSk7XG59XG5cbmNvbnN0IFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfTU9ERUwgPSA5O1xuY29uc3QgUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CUkFORCA9IDk7XG5jb25zdCBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JBVENIID0gNjtcblxuLy8gRnVuY3Rpb24gdG8gZ2V0IHRvdGFsIHBhZ2VzIGZvciBmaWx0ZXJlZCBkcnVncyBieSBtb2RlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlNb2RlbCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgYnJhbmRJZCA9IDAsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBicmFuZElkPzogbnVtYmVyO1xufSkge1xuICBjb25zdCB0b3RhbEl0ZW1zID0gYXdhaXQgcHJpc21hLmRydWcuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICAgIGJhdGNoOiB7XG4gICAgICAgIHNvbWU6IHtcbiAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgICAgLi4uKGJyYW5kSWQgIT09IDAgPyB7IGRydWdCcmFuZElkOiBicmFuZElkIH0gOiB7fSksXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfTU9ERUwpO1xufVxuXG4vLyBGdW5jdGlvbiB0byBnZXQgdG90YWwgcGFnZXMgZm9yIGZpbHRlcmVkIGRydWdzIGJ5IGJyYW5kXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQYWdlc0ZvckZpbHRlcmVkRHJ1Z3NCeUJyYW5kKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBtb2RlbElkID0gMCxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIG1vZGVsSWQ/OiBudW1iZXI7XG59KSB7XG4gIGlmIChtb2RlbElkICE9PSAwKSB7XG4gICAgY29uc3QgdW5pcXVlQnJhbmRDb3VudCA9IGF3YWl0IHByaXNtYS5iYXRjaC5ncm91cEJ5KHtcbiAgICAgIGJ5OiBbXCJkcnVnQnJhbmRJZFwiXSxcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGRydWdJZDogbW9kZWxJZCxcbiAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldHVybiBNYXRoLmNlaWwoXG4gICAgICB1bmlxdWVCcmFuZENvdW50Lmxlbmd0aCAvIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQlJBTkRcbiAgICApO1xuICB9XG5cbiAgY29uc3QgdG90YWxJdGVtcyA9IGF3YWl0IHByaXNtYS5kcnVnQnJhbmQuY291bnQoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICAgIEJhdGNoOiB7XG4gICAgICAgIHNvbWU6IHtcbiAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQlJBTkQpO1xufVxuXG5pbnRlcmZhY2Ugd2hlcmVDb25kaXRpb24ge1xuICBzdGF0dXM6IEJhdGNoU3RhdHVzO1xuICBudW1iZXI6IHtcbiAgICBjb250YWluczogc3RyaW5nO1xuICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIjtcbiAgfTtcbiAgZHJ1Z0lkPzogbnVtYmVyO1xuICBkcnVnQnJhbmRJZD86IG51bWJlcjtcbn1cblxuLy8gRnVuY3Rpb24gdG8gZ2V0IHRvdGFsIHBhZ2VzIGZvciBmaWx0ZXJlZCBkcnVncyBieSBiYXRjaFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlCYXRjaCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgbW9kZWxJZCA9IDAsXG4gIGJyYW5kSWQgPSAwLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgbW9kZWxJZD86IG51bWJlcjtcbiAgYnJhbmRJZD86IG51bWJlcjtcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IHdoZXJlQ29uZGl0aW9uID0ge1xuICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICBudW1iZXI6IHtcbiAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICB9LFxuICB9O1xuXG4gIGlmIChtb2RlbElkICE9PSAwKSB3aGVyZUNvbmRpdGlvbi5kcnVnSWQgPSBOdW1iZXIobW9kZWxJZCk7XG4gIGlmIChicmFuZElkICE9PSAwKSB3aGVyZUNvbmRpdGlvbi5kcnVnQnJhbmRJZCA9IE51bWJlcihicmFuZElkKTtcblxuICBjb25zdCB0b3RhbEl0ZW1zID0gYXdhaXQgcHJpc21hLmJhdGNoLmNvdW50KHtcbiAgICB3aGVyZTogd2hlcmVDb25kaXRpb24sXG4gIH0pO1xuXG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQkFUQ0gpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyZWREcnVnc0J5TW9kZWwoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJhbHBoYWJldGljYWxseVwiLFxuICBicmFuZElkID0gMCxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIHNvcnQ/OiBzdHJpbmc7XG4gIGJyYW5kSWQ/OiBudW1iZXI7XG59KSB7XG4gIGNvbnN0IGRydWdzID0gYXdhaXQgcHJpc21hLmRydWcuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICAgIGJhdGNoOiB7XG4gICAgICAgIHNvbWU6IHtcbiAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgICAgLi4uKGJyYW5kSWQgIT09IDAgPyB7IGRydWdCcmFuZElkOiBicmFuZElkIH0gOiB7fSksIC8vIEZpbHRlciBieSBicmFuZElkIGlmIGl0J3Mgbm90IDBcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBiYXRjaDoge1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgICAgICAuLi4oYnJhbmRJZCAhPT0gMCA/IHsgZHJ1Z0JyYW5kSWQ6IGJyYW5kSWQgfSA6IHt9KSwgLy8gQXBwbHkgYnJhbmRJZCBmaWx0ZXJcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IHRydWUsXG4gICAgICAgICAgZHJ1Z0JyYW5kOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIEZpbHRlciBvdXQgZHJ1Z3Mgd2l0aCBubyBhdmFpbGFibGUgYmF0Y2hlcyBhbmQgYWdncmVnYXRlIHJlbWFpbmluZyBxdWFudGl0eVxuICBjb25zdCBhZ2dyZWdhdGVkRHJ1Z3MgPSBkcnVnc1xuICAgIC5maWx0ZXIoKGRydWcpID0+IGRydWcuYmF0Y2gubGVuZ3RoID4gMClcbiAgICAubWFwKChkcnVnKSA9PiB7XG4gICAgICBjb25zdCB1bmlxdWVCcmFuZElkcyA9IG5ldyBTZXQoXG4gICAgICAgIGRydWcuYmF0Y2gubWFwKChiYXRjaCkgPT4gYmF0Y2guZHJ1Z0JyYW5kLmlkKVxuICAgICAgKTtcblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IGRydWcuaWQsXG4gICAgICAgIG5hbWU6IGRydWcubmFtZSxcbiAgICAgICAgdG90YWxSZW1haW5pbmdRdWFudGl0eTogZHJ1Zy5iYXRjaC5yZWR1Y2UoXG4gICAgICAgICAgKHN1bSwgYmF0Y2gpID0+IHN1bSArIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgICAgIDBcbiAgICAgICAgKSxcbiAgICAgICAgYnJhbmRDb3VudDogdW5pcXVlQnJhbmRJZHMuc2l6ZSwgLy8gQ291bnQgdW5pcXVlIGJyYW5kcyBhc3NvY2lhdGVkIHdpdGggYmF0Y2hlc1xuICAgICAgfTtcbiAgICB9KTtcblxuICAvLyBTb3J0aW5nIGxvZ2ljXG4gIGlmIChzb3J0ID09PSBcImxvd2VzdFwiKSB7XG4gICAgYWdncmVnYXRlZERydWdzLnNvcnQoXG4gICAgICAoYSwgYikgPT4gYS50b3RhbFJlbWFpbmluZ1F1YW50aXR5IC0gYi50b3RhbFJlbWFpbmluZ1F1YW50aXR5XG4gICAgKTtcbiAgfSBlbHNlIGlmIChzb3J0ID09PSBcImhpZ2hlc3RcIikge1xuICAgIGFnZ3JlZ2F0ZWREcnVncy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGIudG90YWxSZW1haW5pbmdRdWFudGl0eSAtIGEudG90YWxSZW1haW5pbmdRdWFudGl0eVxuICAgICk7XG4gIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJhbHBoYWJldGljYWxseVwiKSB7XG4gICAgYWdncmVnYXRlZERydWdzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICB9XG5cbiAgcmV0dXJuIGFnZ3JlZ2F0ZWREcnVncy5zbGljZShcbiAgICAocGFnZSAtIDEpICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9NT0RFTCxcbiAgICBwYWdlICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9NT0RFTFxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyZWREcnVnc0J5QnJhbmQoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJhbHBoYWJldGljYWxseVwiLFxuICBtb2RlbElkID0gMCxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIHNvcnQ/OiBzdHJpbmc7XG4gIG1vZGVsSWQ/OiBudW1iZXI7XG59KSB7XG4gIGlmIChtb2RlbElkICE9PSAwKSB7XG4gICAgLy8gRmV0Y2ggYWxsIGJyYW5kcyBhc3NvY2lhdGVkIHdpdGggdGhlIHNwZWNpZmllZCBtb2RlbFxuICAgIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgZHJ1Z0lkOiBtb2RlbElkLFxuICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkcnVnQnJhbmQ6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgdW5pcXVlQnJhbmRzID0gbmV3IE1hcCgpO1xuXG4gICAgYmF0Y2hlcy5mb3JFYWNoKChiYXRjaCkgPT4ge1xuICAgICAgdW5pcXVlQnJhbmRzLnNldChiYXRjaC5kcnVnQnJhbmQuaWQsIHtcbiAgICAgICAgaWQ6IGJhdGNoLmRydWdCcmFuZC5pZCxcbiAgICAgICAgbmFtZTogYmF0Y2guZHJ1Z0JyYW5kLm5hbWUsXG4gICAgICAgIG1vZGVsQ291bnQ6IDEsIC8vIFNpbmNlIGl0J3MgYSBzcGVjaWZpYyBtb2RlbFxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gQXJyYXkuZnJvbSh1bmlxdWVCcmFuZHMudmFsdWVzKCkpO1xuICB9XG5cbiAgLy8gRmV0Y2ggYWxsIGRydWcgYnJhbmRzIHdpdGggYXZhaWxhYmxlIGJhdGNoZXNcbiAgY29uc3QgYnJhbmRzID0gYXdhaXQgcHJpc21hLmRydWdCcmFuZC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgY29udGFpbnM6IHF1ZXJ5LFxuICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgQmF0Y2g6IHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgICBkcnVnOiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBBZ2dyZWdhdGUgYnJhbmRzIHdpdGggYXZhaWxhYmxlIG1vZGVsc1xuICBjb25zdCBhZ2dyZWdhdGVkQnJhbmRzID0gYnJhbmRzXG4gICAgLm1hcCgoYnJhbmQpID0+ICh7XG4gICAgICBpZDogYnJhbmQuaWQsXG4gICAgICBuYW1lOiBicmFuZC5uYW1lLFxuICAgICAgbW9kZWxDb3VudDogbmV3IFNldChicmFuZC5CYXRjaC5tYXAoKGJhdGNoKSA9PiBiYXRjaC5kcnVnLmlkKSkuc2l6ZSwgLy8gQ291bnQgdW5pcXVlIGRydWcgbW9kZWxzXG4gICAgfSkpXG4gICAgLmZpbHRlcigoYnJhbmQpID0+IGJyYW5kLm1vZGVsQ291bnQgPiAwKTtcblxuICAvLyBTb3J0aW5nIGxvZ2ljXG4gIGlmIChzb3J0ID09PSBcImxvd2VzdFwiKSB7XG4gICAgYWdncmVnYXRlZEJyYW5kcy5zb3J0KChhLCBiKSA9PiBhLm1vZGVsQ291bnQgLSBiLm1vZGVsQ291bnQpO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiaGlnaGVzdFwiKSB7XG4gICAgYWdncmVnYXRlZEJyYW5kcy5zb3J0KChhLCBiKSA9PiBiLm1vZGVsQ291bnQgLSBhLm1vZGVsQ291bnQpO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiYWxwaGFiZXRpY2FsbHlcIikge1xuICAgIGFnZ3JlZ2F0ZWRCcmFuZHMuc29ydCgoYSwgYikgPT4gYS5uYW1lLmxvY2FsZUNvbXBhcmUoYi5uYW1lKSk7XG4gIH1cblxuICAvLyBQYWdpbmF0aW9uXG4gIHJldHVybiBhZ2dyZWdhdGVkQnJhbmRzLnNsaWNlKFxuICAgIChwYWdlIC0gMSkgKiBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JSQU5ELFxuICAgIHBhZ2UgKiBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JSQU5EXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRGaWx0ZXJlZERydWdzQnlCYXRjaCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImV4cGlyeURhdGVcIixcbiAgbW9kZWxJZCA9IDAsXG4gIGJyYW5kSWQgPSAwLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgcGFnZT86IG51bWJlcjtcbiAgc29ydD86IHN0cmluZztcbiAgbW9kZWxJZD86IG51bWJlcjtcbiAgYnJhbmRJZD86IG51bWJlcjtcbn0pIHtcbiAgLy8gQmFzZSB3aGVyZSBjb25kaXRpb25cbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IHdoZXJlQ29uZGl0aW9uID0ge1xuICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICBudW1iZXI6IHtcbiAgICAgIGNvbnRhaW5zOiBxdWVyeSwgLy8gU2VhcmNoIGJ5IGJhdGNoIG51bWJlclxuICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgIH0sXG4gIH07XG5cbiAgLy8gQXBwbHkgbW9kZWxJZCBhbmQgYnJhbmRJZCBmaWx0ZXJzIGlmIHByb3ZpZGVkXG4gIGlmIChtb2RlbElkICE9PSAwKSB3aGVyZUNvbmRpdGlvbi5kcnVnSWQgPSBOdW1iZXIobW9kZWxJZCk7XG4gIGlmIChicmFuZElkICE9PSAwKSB3aGVyZUNvbmRpdGlvbi5kcnVnQnJhbmRJZCA9IE51bWJlcihicmFuZElkKTtcblxuICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICB3aGVyZTogd2hlcmVDb25kaXRpb24sXG4gICAgaW5jbHVkZToge1xuICAgICAgZHJ1ZzogdHJ1ZSxcbiAgICAgIGRydWdCcmFuZDogdHJ1ZSxcbiAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGZvcm1hdHRlZEJhdGNoZXMgPSBiYXRjaGVzLm1hcCgoYmF0Y2gpID0+ICh7XG4gICAgaWQ6IGJhdGNoLmlkLFxuICAgIGJhdGNoTnVtYmVyOiBiYXRjaC5udW1iZXIsXG4gICAgYnJhbmROYW1lOiBiYXRjaC5kcnVnQnJhbmQubmFtZSxcbiAgICBtb2RlbE5hbWU6IGJhdGNoLmRydWcubmFtZSxcbiAgICBleHBpcnlEYXRlOiBiYXRjaC5leHBpcnkudG9JU09TdHJpbmcoKSxcbiAgICBzdG9ja0RhdGU6IGJhdGNoLnN0b2NrRGF0ZS50b0lTT1N0cmluZygpLFxuICAgIHJlbWFpbmluZ0Ftb3VudDogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgZnVsbEFtb3VudDogYmF0Y2guZnVsbEFtb3VudCxcbiAgICBzdGF0dXM6IGJhdGNoLnN0YXR1cyxcbiAgICB1bml0Q29uY2VudHJhdGlvbjogYmF0Y2gudW5pdENvbmNlbnRyYXRpb24uY29uY2VudHJhdGlvbixcbiAgICB0eXBlOiBiYXRjaC50eXBlLFxuICB9KSk7XG5cbiAgLy8gU29ydGluZyBsb2dpY1xuICBpZiAoc29ydCA9PT0gXCJleHBpcnlEYXRlXCIpIHtcbiAgICBmb3JtYXR0ZWRCYXRjaGVzLnNvcnQoXG4gICAgICAoYSwgYikgPT5cbiAgICAgICAgbmV3IERhdGUoYS5leHBpcnlEYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmV4cGlyeURhdGUpLmdldFRpbWUoKVxuICAgICk7XG4gIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJuZXdseUFkZGVkXCIpIHtcbiAgICBmb3JtYXR0ZWRCYXRjaGVzLnNvcnQoXG4gICAgICAoYSwgYikgPT5cbiAgICAgICAgbmV3IERhdGUoYi5zdG9ja0RhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuc3RvY2tEYXRlKS5nZXRUaW1lKClcbiAgICApO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiYWxwaGFiZXRpY2FsbHlcIikge1xuICAgIGZvcm1hdHRlZEJhdGNoZXMuc29ydCgoYSwgYikgPT4gYS5tb2RlbE5hbWUubG9jYWxlQ29tcGFyZShiLm1vZGVsTmFtZSkpO1xuICB9XG5cbiAgLy8gUGFnaW5hdGlvbiBsb2dpY1xuICByZXR1cm4gZm9ybWF0dGVkQmF0Y2hlcy5zbGljZShcbiAgICAocGFnZSAtIDEpICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CQVRDSCxcbiAgICBwYWdlICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CQVRDSFxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UGF0aWVudERldGFpbHMoaWQ6IG51bWJlcikge1xuICByZXR1cm4gcHJpc21hLnBhdGllbnQuZmluZFVuaXF1ZSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIGlkLFxuICAgIH0sXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkUGF0aWVudCh7XG4gIGZvcm1EYXRhLFxufToge1xuICBmb3JtRGF0YTogUGF0aWVudEZvcm1EYXRhO1xufSk6IFByb21pc2U8bXlFcnJvcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGZsb2F0SGVpZ2h0ID0gcGFyc2VGbG9hdChmb3JtRGF0YS5oZWlnaHQpO1xuXG4gICAgY29uc3QgZmxvYXRXZWlnaHQgPSBwYXJzZUZsb2F0KGZvcm1EYXRhLndlaWdodCk7XG5cbiAgICBpZiAoZm9ybURhdGEuZ2VuZGVyID09PSBcIlwiKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJTZWxlY3QgYSB2YWxpZCBHZW5kZXJcIiB9O1xuICAgIH1cblxuICAgIGlmICghZm9ybURhdGEubmFtZSB8fCAhZm9ybURhdGEudGVsZXBob25lKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJQbGVhc2UgZmlsbCBhbGwgZmllbGRzXCIgfTtcbiAgICB9XG5cbiAgICBpZiAoZm9ybURhdGEudGVsZXBob25lLmxlbmd0aCAhPT0gMTApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgdGVsZXBob25lIG51bWJlclwiIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGZvcm1EYXRhLmJpcnRoRGF0ZSk7XG5cbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIGJpcnRoIGRhdGVcIiB9O1xuICAgIH1cblxuICAgIGF3YWl0IHByaXNtYS5wYXRpZW50LmNyZWF0ZSh7XG4gICAgICBkYXRhOiB7XG4gICAgICAgIG5hbWU6IGZvcm1EYXRhLm5hbWUsXG4gICAgICAgIE5JQzogZm9ybURhdGEuTklDLFxuICAgICAgICB0ZWxlcGhvbmU6IGZvcm1EYXRhLnRlbGVwaG9uZSxcbiAgICAgICAgYmlydGhEYXRlOiBkYXRlLFxuICAgICAgICBhZGRyZXNzOiBmb3JtRGF0YS5hZGRyZXNzLFxuICAgICAgICBoZWlnaHQ6IGZsb2F0SGVpZ2h0LFxuICAgICAgICB3ZWlnaHQ6IGZsb2F0V2VpZ2h0LFxuICAgICAgICBnZW5kZXI6IGZvcm1EYXRhLmdlbmRlcixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXZhbGlkYXRlUGF0aChcIi9wYXRpZW50c1wiKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIlBhdGllbnQgYWRkZWQgc3VjY2Vzc2Z1bGx5XCIgfTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSBhZGRpbmcgcGF0aWVudFwiLFxuICAgIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZVBhdGllbnQoXG4gIGZvcm1EYXRhOiBQYXRpZW50Rm9ybURhdGEsXG4gIGlkOiBudW1iZXJcbik6IFByb21pc2U8bXlFcnJvcj4ge1xuICB0cnkge1xuICAgIGNvbnN0IGZsb2F0SGVpZ2h0ID0gcGFyc2VGbG9hdChmb3JtRGF0YS5oZWlnaHQpO1xuICAgIGNvbnN0IGZsb2F0V2VpZ2h0ID0gcGFyc2VGbG9hdChmb3JtRGF0YS53ZWlnaHQpO1xuXG4gICAgaWYgKGZvcm1EYXRhLmdlbmRlciA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiU2VsZWN0IGEgdmFsaWQgR2VuZGVyXCIgfTtcbiAgICB9XG5cbiAgICBpZiAoIWZvcm1EYXRhLm5hbWUgfHwgIWZvcm1EYXRhLnRlbGVwaG9uZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIGZpbGwgYWxsIGZpZWxkc1wiIH07XG4gICAgfVxuXG4gICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKGZvcm1EYXRhLmJpcnRoRGF0ZSk7XG5cbiAgICBpZiAoaXNOYU4oZGF0ZS5nZXRUaW1lKCkpKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIGJpcnRoIGRhdGVcIiB9O1xuICAgIH1cblxuICAgIGF3YWl0IHByaXNtYS5wYXRpZW50LnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgZGF0YToge1xuICAgICAgICBuYW1lOiBmb3JtRGF0YS5uYW1lLFxuICAgICAgICBOSUM6IGZvcm1EYXRhLk5JQyxcbiAgICAgICAgdGVsZXBob25lOiBmb3JtRGF0YS50ZWxlcGhvbmUsXG4gICAgICAgIGJpcnRoRGF0ZTogZGF0ZSxcbiAgICAgICAgYWRkcmVzczogZm9ybURhdGEuYWRkcmVzcyxcbiAgICAgICAgaGVpZ2h0OiBmbG9hdEhlaWdodCxcbiAgICAgICAgd2VpZ2h0OiBmbG9hdFdlaWdodCxcbiAgICAgICAgZ2VuZGVyOiBmb3JtRGF0YS5nZW5kZXIsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV2YWxpZGF0ZVBhdGgoYC9wYXRpZW50cy8ke2lkfWApO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiUGF0aWVudCB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdXBkYXRpbmcgcGF0aWVudFwiLFxuICAgIH07XG4gIH1cbn1cblxuLy9zdWdnZXN0IHN1cHBsaWVyIGluZm9ybWF0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoU3VwcGxpZXJzKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgXCJ1c2Ugc2VydmVyXCI7XG5cbiAgdHJ5IHtcbiAgICByZXR1cm4gYXdhaXQgcHJpc21hLnN1cHBsaWVyLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIG5hbWU6IHtcbiAgICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgY29udGFjdDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB0YWtlOiA1LCAvLyBMaW1pdCByZXN1bHRzXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHNlYXJjaGluZyBzdXBwbGllcnM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLy9Gb3IgYWRkaW5nIGRydWdzIHRvIHRoZSBpbnZlbnRvcnlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhZGROZXdJdGVtKHtcbiAgZm9ybURhdGEsXG59OiB7XG4gIGZvcm1EYXRhOiBJbnZlbnRvcnlGb3JtRGF0YTtcbn0pOiBQcm9taXNlPG15RXJyb3I+IHtcbiAgdHJ5IHtcbiAgICAvLyBDaGVjayBhbGwgdGhlIHJlcXVpcmVkIGZpZWxkc1xuICAgIGlmIChcbiAgICAgICFmb3JtRGF0YS5jb25jZW50cmF0aW9uSWQgfHxcbiAgICAgICFmb3JtRGF0YS5jb25jZW50cmF0aW9uIHx8XG4gICAgICAhZm9ybURhdGEuYmF0Y2hOdW1iZXIgfHxcbiAgICAgICFmb3JtRGF0YS5kcnVnVHlwZSB8fFxuICAgICAgIWZvcm1EYXRhLnF1YW50aXR5IHx8XG4gICAgICAhZm9ybURhdGEuZXhwaXJ5IHx8XG4gICAgICAhZm9ybURhdGEucmV0YWlsUHJpY2UgfHxcbiAgICAgICFmb3JtRGF0YS53aG9sZXNhbGVQcmljZSB8fFxuICAgICAgIWZvcm1EYXRhLnN1cHBsaWVyTmFtZSB8fFxuICAgICAgIWZvcm1EYXRhLkJ1ZmZlciB8fFxuICAgICAgIWZvcm1EYXRhLnN1cHBsaWVyQ29udGFjdFxuICAgICkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIGZpbGwgYWxsIGZpZWxkc1wiIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS4kdHJhbnNhY3Rpb24oYXN5bmMgKHR4KSA9PiB7XG4gICAgICAvLyAxLiBDcmVhdGUgb3IgY29ubmVjdCBkcnVnIGJyYW5kXG4gICAgICBjb25zdCBicmFuZCA9IGF3YWl0IHR4LmRydWdCcmFuZC51cHNlcnQoe1xuICAgICAgICB3aGVyZTogeyBpZDogZm9ybURhdGEuYnJhbmRJZCA/PyAwIH0sXG4gICAgICAgIHVwZGF0ZToge30sXG4gICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgIG5hbWU6IGZvcm1EYXRhLmJyYW5kTmFtZSxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogZm9ybURhdGEuYnJhbmREZXNjcmlwdGlvbiB8fCBudWxsLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDIuIENyZWF0ZSBvciBjb25uZWN0IGRydWdcbiAgICAgIGNvbnN0IGRydWcgPSBhd2FpdCB0eC5kcnVnLnVwc2VydCh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBmb3JtRGF0YS5kcnVnSWQgPz8gMCB9LFxuICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBuYW1lOiBmb3JtRGF0YS5kcnVnTmFtZSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAzLiBDcmVhdGUgb3IgY29ubmVjdCBzdXBwbGllclxuICAgICAgY29uc3Qgc3VwcGxpZXIgPSBhd2FpdCB0eC5zdXBwbGllci51cHNlcnQoe1xuICAgICAgICB3aGVyZTogZm9ybURhdGEuc3VwcGxpZXJJZFxuICAgICAgICAgID8geyBpZDogZm9ybURhdGEuc3VwcGxpZXJJZCB9XG4gICAgICAgICAgOiB7IG5hbWU6IGZvcm1EYXRhLnN1cHBsaWVyTmFtZSB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBjb250YWN0OiBmb3JtRGF0YS5zdXBwbGllckNvbnRhY3QsIC8vIFVwZGF0ZSBjb250YWN0IGluZm8gaW4gY2FzZSBpdCBjaGFuZ2VkXG4gICAgICAgIH0sXG4gICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgIG5hbWU6IGZvcm1EYXRhLnN1cHBsaWVyTmFtZSxcbiAgICAgICAgICBjb250YWN0OiBmb3JtRGF0YS5zdXBwbGllckNvbnRhY3QgfHwgXCJOL0FcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyA0LiBDcmVhdGUgYmF0Y2ggd2l0aCBib3RoIGRydWcgYW5kIGJyYW5kIHJlbGF0aW9uc2hpcHNcbiAgICAgIGlmIChcbiAgICAgICAgZm9ybURhdGEuY29uY2VudHJhdGlvbklkID09PSB1bmRlZmluZWQgfHxcbiAgICAgICAgZm9ybURhdGEuY29uY2VudHJhdGlvbiA9PT0gdW5kZWZpbmVkXG4gICAgICApIHtcbiAgICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIHNlbGVjdCBhIGNvbmNlbnRyYXRpb25cIiB9O1xuICAgICAgfVxuXG4gICAgICBsZXQgbmV3Q29uY2VudHJhdGlvbklkOiBudW1iZXI7XG5cbiAgICAgIGlmIChmb3JtRGF0YS5jb25jZW50cmF0aW9uSWQgPT09IC0xKSB7XG4gICAgICAgIGNvbnN0IG5ld0NvbmNlbnRyYXRpb24gPSBhd2FpdCB0eC51bml0Q29uY2VudHJhdGlvbi51cHNlcnQoe1xuICAgICAgICAgIHdoZXJlOiB7IGNvbmNlbnRyYXRpb246IGZvcm1EYXRhLmNvbmNlbnRyYXRpb24gfSxcbiAgICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICAgIGNyZWF0ZToge1xuICAgICAgICAgICAgY29uY2VudHJhdGlvbjogZm9ybURhdGEuY29uY2VudHJhdGlvbixcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgbmV3Q29uY2VudHJhdGlvbklkID0gbmV3Q29uY2VudHJhdGlvbi5pZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld0NvbmNlbnRyYXRpb25JZCA9IGZvcm1EYXRhLmNvbmNlbnRyYXRpb25JZDtcbiAgICAgIH1cblxuICAgICAgYXdhaXQgdHguYmF0Y2guY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIG51bWJlcjogZm9ybURhdGEuYmF0Y2hOdW1iZXIsXG4gICAgICAgICAgZHJ1Zzoge1xuICAgICAgICAgICAgY29ubmVjdDogeyBpZDogZHJ1Zy5pZCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZHJ1Z0JyYW5kOiB7XG4gICAgICAgICAgICBjb25uZWN0OiB7IGlkOiBicmFuZC5pZCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgdHlwZTogZm9ybURhdGEuZHJ1Z1R5cGUgYXMgRHJ1Z1R5cGUsXG4gICAgICAgICAgZnVsbEFtb3VudDogcGFyc2VGbG9hdChmb3JtRGF0YS5xdWFudGl0eS50b1N0cmluZygpKSxcbiAgICAgICAgICByZW1haW5pbmdRdWFudGl0eTogcGFyc2VGbG9hdChmb3JtRGF0YS5xdWFudGl0eS50b1N0cmluZygpKSxcbiAgICAgICAgICBleHBpcnk6IG5ldyBEYXRlKGZvcm1EYXRhLmV4cGlyeSksXG4gICAgICAgICAgcmV0YWlsUHJpY2U6IHBhcnNlRmxvYXQoZm9ybURhdGEucmV0YWlsUHJpY2UudG9TdHJpbmcoKSksXG4gICAgICAgICAgd2hvbGVzYWxlUHJpY2U6IHBhcnNlRmxvYXQoZm9ybURhdGEud2hvbGVzYWxlUHJpY2UudG9TdHJpbmcoKSksXG4gICAgICAgICAgdW5pdENvbmNlbnRyYXRpb246IHtcbiAgICAgICAgICAgIGNvbm5lY3Q6IHsgaWQ6IG5ld0NvbmNlbnRyYXRpb25JZCB9LFxuICAgICAgICAgIH0sXG4gICAgICAgICAgU3VwcGxpZXI6IHtcbiAgICAgICAgICAgIGNvbm5lY3Q6IHsgaWQ6IHN1cHBsaWVyLmlkIH0sIC8vIENvbm5lY3QgdGhlIGJhdGNoIHRvIHRoZSBzdXBwbGllclxuICAgICAgICAgIH0sXG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIDYuIENyZWF0ZSBvciB1cGRhdGUgQnVmZmVyTGV2ZWwgZm9yIHRoZSBkcnVnXG4gICAgICBhd2FpdCB0eC5idWZmZXJMZXZlbC51cHNlcnQoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIGRydWdJZF90eXBlX3VuaXRDb25jZW50cmF0aW9uSWQ6IHtcbiAgICAgICAgICAgIGRydWdJZDogZHJ1Zy5pZCxcbiAgICAgICAgICAgIHR5cGU6IGZvcm1EYXRhLmRydWdUeXBlIGFzIERydWdUeXBlLFxuICAgICAgICAgICAgdW5pdENvbmNlbnRyYXRpb25JZDogbmV3Q29uY2VudHJhdGlvbklkLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHVwZGF0ZToge1xuICAgICAgICAgIGJ1ZmZlckFtb3VudDogZm9ybURhdGEuQnVmZmVyLCAvLyBVcGRhdGUgYnVmZmVyIGFtb3VudCBpZiBpdCBhbHJlYWR5IGV4aXN0c1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBkcnVnSWQ6IGRydWcuaWQsXG4gICAgICAgICAgdHlwZTogZm9ybURhdGEuZHJ1Z1R5cGUgYXMgRHJ1Z1R5cGUsXG4gICAgICAgICAgdW5pdENvbmNlbnRyYXRpb25JZDogbmV3Q29uY2VudHJhdGlvbklkLFxuICAgICAgICAgIGJ1ZmZlckFtb3VudDogZm9ybURhdGEuQnVmZmVyLCAvLyBDcmVhdGUgbmV3IGJ1ZmZlciBsZXZlbFxuICAgICAgICB9LFxuICAgICAgfSk7XG5cbiAgICAgIHJldmFsaWRhdGVQYXRoKFwiL2ludmVudG9yeS9hdmFpbGFibGUtc3RvY2tzXCIpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJJdGVtIGFkZGVkIHN1Y2Nlc3NmdWxseVwiIH07XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUubWVzc2FnZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7XG4gICAgfVxuICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkZhaWxlZCB0byBhZGQgaXRlbVwiIH07XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJhdGNoRGF0YShiYXRjaElkOiBudW1iZXIpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXRjaERhdGEgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBpZDogYmF0Y2hJZCxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIGRydWc6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgZHJ1Z0JyYW5kOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIFN1cHBsaWVyOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghYmF0Y2hEYXRhKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJCYXRjaCBub3QgZm91bmRcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIG51bWJlcjogYmF0Y2hEYXRhLm51bWJlcixcbiAgICAgIGRydWdOYW1lOiBiYXRjaERhdGEuZHJ1Zy5uYW1lLFxuICAgICAgZHJ1Z0JyYW5kTmFtZTogYmF0Y2hEYXRhLmRydWdCcmFuZC5uYW1lLFxuICAgICAgZHJ1Z1R5cGU6IGJhdGNoRGF0YS50eXBlLFxuICAgICAgZnVsbEFtb3VudDogYmF0Y2hEYXRhLmZ1bGxBbW91bnQsXG4gICAgICByZW1haW5pbmdRdWFudGl0eTogYmF0Y2hEYXRhLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgZXhwaXJ5RGF0ZTogYmF0Y2hEYXRhLmV4cGlyeS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSwgLy8gRm9ybWF0IHRvICdZWVlZLU1NLUREJ1xuICAgICAgc3RvY2tEYXRlOiBiYXRjaERhdGEuc3RvY2tEYXRlLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLCAvLyBGb3JtYXQgdG8gJ1lZWVktTU0tREQnXG4gICAgICByZXRhaWxQcmljZTogYmF0Y2hEYXRhLnJldGFpbFByaWNlLFxuICAgICAgd2hvbGVzYWxlUHJpY2U6IGJhdGNoRGF0YS53aG9sZXNhbGVQcmljZSxcbiAgICAgIHN1cHBsaWVyOiBiYXRjaERhdGEuU3VwcGxpZXIubmFtZSxcbiAgICAgIHN0YXR1czogYmF0Y2hEYXRhLnN0YXR1cyxcbiAgICAgIHVuaXRDb25jZXRyYXRpb246IGJhdGNoRGF0YS51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH0gZmluYWxseSB7XG4gICAgYXdhaXQgcHJpc21hLiRkaXNjb25uZWN0KCk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZUNvbmZpcm1hdGlvbk9mQmF0Y2hTdGF0dXNDaGFuZ2UoXG4gIGJhdGNoSWQ6IG51bWJlcixcbiAgYWN0aW9uOiBcImNvbXBsZXRlZFwiIHwgXCJkaXNwb3NlZFwiIHwgXCJxdWFsaXR5X2ZhaWxlZFwiIHwgXCJhdmFpbGFibGVcIlxuKTogUHJvbWlzZTxteUVycm9yPiB7XG4gIGlmICghYmF0Y2hJZCkgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiQmF0Y2ggSUQgbm90IHByb3ZpZGVkXCIgfTtcblxuICBjb25zdCBuZXdTdGF0dXMgPVxuICAgIGFjdGlvbiA9PT0gXCJjb21wbGV0ZWRcIlxuICAgICAgPyBcIkNPTVBMRVRFRFwiXG4gICAgICA6IGFjdGlvbiA9PT0gXCJkaXNwb3NlZFwiXG4gICAgICA/IFwiRElTUE9TRURcIlxuICAgICAgOiBhY3Rpb24gPT09IFwicXVhbGl0eV9mYWlsZWRcIlxuICAgICAgPyBcIlFVQUxJVFlfRkFJTEVEXCJcbiAgICAgIDogXCJBVkFJTEFCTEVcIjtcbiAgdHJ5IHtcbiAgICBhd2FpdCBwcmlzbWEuYmF0Y2gudXBkYXRlKHtcbiAgICAgIHdoZXJlOiB7IGlkOiBiYXRjaElkIH0sXG4gICAgICBkYXRhOiB7IHN0YXR1czogbmV3U3RhdHVzIH0sXG4gICAgfSk7XG5cbiAgICByZXZhbGlkYXRlUGF0aChgL2ludmVudG9yeS9hbGwtZHJ1Z3MvYmF0Y2gvJHtiYXRjaElkfWApO1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiQmF0Y2ggc3RhdHVzIHVwZGF0ZWQgc3VjY2Vzc2Z1bGx5XCIgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgdXBkYXRpbmcgYmF0Y2ggc3RhdHVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJBbiBlcnJvciBvY2N1cnJlZCB3aGlsZSB1cGRhdGluZyBiYXRjaCBzdGF0dXNcIixcbiAgICB9O1xuICB9XG59XG5cbi8vIEZldGNoIGZ1bmN0aW9ucyBmb3IgYnJhbmQsIGRydWcsIGFuZCBiYXRjaCBkYXRhXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QnJhbmROYW1lKGlkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJyYW5kID0gYXdhaXQgcHJpc21hLmRydWdCcmFuZC5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIHJldHVybiBicmFuZD8ubmFtZSB8fCBgQnJhbmQtJHtpZH1gO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBicmFuZCBuYW1lOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGBCcmFuZC0ke2lkfWA7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERydWdOYW1lKGlkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRydWcgPSBhd2FpdCBwcmlzbWEuZHJ1Zy5maW5kVW5pcXVlKHtcbiAgICAgIHdoZXJlOiB7IGlkIH0sXG4gICAgICBzZWxlY3Q6IHsgbmFtZTogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIHJldHVybiBkcnVnPy5uYW1lIHx8IGBEcnVnLSR7aWR9YDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZHJ1ZyBuYW1lOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIGBEcnVnLSR7aWR9YDtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QmF0Y2hOdW1iZXIoaWQ6IG51bWJlcik6IFByb21pc2U8c3RyaW5nPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYmF0Y2ggPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgc2VsZWN0OiB7IG51bWJlcjogdHJ1ZSB9LFxuICAgIH0pO1xuICAgIHJldHVybiBiYXRjaD8ubnVtYmVyIHx8IGBCYXRjaC0ke2lkfWA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGJhdGNoIG51bWJlcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBgQmF0Y2gtJHtpZH1gO1xuICB9XG59XG5cbmNvbnN0IFBBR0VfU0laRSA9IDEwO1xuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gYXBwbHkgc29ydGluZ1xuZnVuY3Rpb24gYXBwbHlTb3J0aW5nKFxuICBkYXRhOiBTdG9ja0RhdGFbXSxcbiAgc29ydDogU29ydE9wdGlvbiA9IFwiYWxwaGFiZXRpY2FsbHlcIlxuKTogU3RvY2tEYXRhW10ge1xuICBzd2l0Y2ggKHNvcnQpIHtcbiAgICBjYXNlIFwiYWxwaGFiZXRpY2FsbHlcIjpcbiAgICAgIHJldHVybiBkYXRhLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICAgIGNhc2UgXCJoaWdoZXN0XCI6XG4gICAgICByZXR1cm4gZGF0YS5zb3J0KChhLCBiKSA9PiBiLnRvdGFsUHJpY2UgLSBhLnRvdGFsUHJpY2UpO1xuICAgIGNhc2UgXCJsb3dlc3RcIjpcbiAgICAgIHJldHVybiBkYXRhLnNvcnQoKGEsIGIpID0+IGEudG90YWxQcmljZSAtIGIudG90YWxQcmljZSk7XG4gICAgY2FzZSBcInVuaXQtaGlnaGVzdFwiOlxuICAgICAgcmV0dXJuIGRhdGEuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhVW5pdCA9IGEucmV0YWlsUHJpY2UgfHwgMDtcbiAgICAgICAgY29uc3QgYlVuaXQgPSBiLnJldGFpbFByaWNlIHx8IDA7XG4gICAgICAgIHJldHVybiBiVW5pdCAtIGFVbml0O1xuICAgICAgfSk7XG4gICAgY2FzZSBcInVuaXQtbG93ZXN0XCI6XG4gICAgICByZXR1cm4gZGF0YS5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgIGNvbnN0IGFVbml0ID0gYS5yZXRhaWxQcmljZSB8fCAwO1xuICAgICAgICBjb25zdCBiVW5pdCA9IGIucmV0YWlsUHJpY2UgfHwgMDtcbiAgICAgICAgcmV0dXJuIGFVbml0IC0gYlVuaXQ7XG4gICAgICB9KTtcbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIGRhdGE7XG4gIH1cbn1cblxuLy8gR2V0IHRvdGFsIHBhZ2VzIGZvciBwYWdpbmF0aW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QXZhaWxhYmxlRHJ1Z3NUb3RhbFBhZ2VzKFxuICBxdWVyeTogc3RyaW5nLFxuICBzZWxlY3Rpb246IHN0cmluZ1xuKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgbGV0IGNvdW50ID0gMDtcblxuICBzd2l0Y2ggKHNlbGVjdGlvbikge1xuICAgIGNhc2UgXCJicmFuZFwiOlxuICAgICAgY291bnQgPSBhd2FpdCBwcmlzbWEuZHJ1Z0JyYW5kLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9LFxuICAgICAgICAgIEJhdGNoOiB7IHNvbWU6IHsgc3RhdHVzOiBcIkFWQUlMQUJMRVwiIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcIm1vZGVsXCI6XG4gICAgICBjb3VudCA9IGF3YWl0IHByaXNtYS5kcnVnLmNvdW50KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9LFxuICAgICAgICAgIGJhdGNoOiB7IHNvbWU6IHsgc3RhdHVzOiBcIkFWQUlMQUJMRVwiIH0gfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSBcImJhdGNoXCI6XG4gICAgICBjb3VudCA9IGF3YWl0IHByaXNtYS5iYXRjaC5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgT1I6IFtcbiAgICAgICAgICAgIHsgZHJ1ZzogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0gfSxcbiAgICAgICAgICAgIHsgZHJ1Z0JyYW5kOiB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5IH0gfSB9LFxuICAgICAgICAgIF0sXG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICB9LFxuICAgICAgfSk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiBNYXRoLmNlaWwoY291bnQgLyBQQUdFX1NJWkUpO1xufVxuXG4vLyBGZXRjaCBzdG9jayBncm91cGVkIGJ5IG1vZGVsXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RvY2tCeU1vZGVsKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBwYWdlID0gMSxcbiAgc29ydCA9IFwiYWxwaGFiZXRpY2FsbHlcIixcbiAgc3RhcnREYXRlLFxuICBlbmREYXRlLFxufTogU3RvY2tRdWVyeVBhcmFtcyk6IFByb21pc2U8U3RvY2tEYXRhW10+IHtcbiAgY29uc3QgZHJ1Z3MgPSBhd2FpdCBwcmlzbWEuZHJ1Zy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSxcbiAgICAgIGJhdGNoOiB7XG4gICAgICAgIHNvbWU6IHtcbiAgICAgICAgICAvLyBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgICAgLi4uKHN0YXJ0RGF0ZSAmJiBlbmREYXRlXG4gICAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgICBzdG9ja0RhdGU6IHtcbiAgICAgICAgICAgICAgICAgIGd0ZTogc3RhcnREYXRlLFxuICAgICAgICAgICAgICAgICAgbHRlOiBlbmREYXRlLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIDoge30pLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGJhdGNoOiB7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgLy8gc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgZW5kRGF0ZVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgc3RvY2tEYXRlOiB7XG4gICAgICAgICAgICAgICAgICBndGU6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgIGx0ZTogZW5kRGF0ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgd2hvbGVzYWxlUHJpY2U6IHRydWUsXG4gICAgICAgICAgcmV0YWlsUHJpY2U6IHRydWUsXG4gICAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHN0b2NrRGF0YTogU3RvY2tEYXRhW10gPSBkcnVncy5tYXAoKGRydWcpID0+ICh7XG4gICAgaWQ6IGRydWcuaWQsXG4gICAgbmFtZTogZHJ1Zy5uYW1lLFxuICAgIHRvdGFsUHJpY2U6IGRydWcuYmF0Y2gucmVkdWNlKFxuICAgICAgKFxuICAgICAgICBzdW06IG51bWJlcixcbiAgICAgICAgYmF0Y2g6IHsgcmV0YWlsUHJpY2U6IG51bWJlcjsgcmVtYWluaW5nUXVhbnRpdHk6IG51bWJlciB9XG4gICAgICApID0+IHN1bSArIGJhdGNoLnJldGFpbFByaWNlICogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgICAwXG4gICAgKSxcbiAgfSkpO1xuXG4gIGNvbnN0IHNvcnRlZERhdGEgPSBhcHBseVNvcnRpbmcoc3RvY2tEYXRhLCBzb3J0IGFzIFNvcnRPcHRpb24pO1xuICByZXR1cm4gc29ydGVkRGF0YS5zbGljZSgocGFnZSAtIDEpICogUEFHRV9TSVpFLCBwYWdlICogUEFHRV9TSVpFKTtcbn1cblxuLy8gRmV0Y2ggc3RvY2sgZ3JvdXBlZCBieSBiYXRjaFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b2NrQnlCYXRjaCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImFscGhhYmV0aWNhbGx5XCIsXG4gIHN0YXJ0RGF0ZSxcbiAgZW5kRGF0ZSxcbn06IFN0b2NrUXVlcnlQYXJhbXMpOiBQcm9taXNlPFN0b2NrRGF0YVtdPiB7XG4gIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBPUjogW1xuICAgICAgICB7IGRydWc6IHsgbmFtZTogeyBjb250YWluczogcXVlcnksIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9IH0gfSxcbiAgICAgICAgeyBkcnVnQnJhbmQ6IHsgbmFtZTogeyBjb250YWluczogcXVlcnksIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9IH0gfSxcbiAgICAgICAgeyBudW1iZXI6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9LFxuICAgICAgICB7IFN1cHBsaWVyOiB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9IH0sXG4gICAgICBdLFxuICAgICAgLy8gc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgLi4uKHN0YXJ0RGF0ZSAmJiBlbmREYXRlXG4gICAgICAgID8ge1xuICAgICAgICAgICAgc3RvY2tEYXRlOiB7XG4gICAgICAgICAgICAgIGd0ZTogc3RhcnREYXRlLFxuICAgICAgICAgICAgICBsdGU6IGVuZERhdGUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH1cbiAgICAgICAgOiB7fSksXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBkcnVnOiB0cnVlLFxuICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgU3VwcGxpZXI6IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3Qgc3RvY2tEYXRhOiBTdG9ja0RhdGFbXSA9IGJhdGNoZXMubWFwKChiYXRjaCkgPT4gKHtcbiAgICBpZDogYmF0Y2guaWQsXG4gICAgbmFtZTogYChCYXRjaCAke2JhdGNoLm51bWJlcn0pYCxcbiAgICBicmFuZE5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgIGRydWdOYW1lOiBiYXRjaC5kcnVnLm5hbWUsXG4gICAgdG90YWxQcmljZTogYmF0Y2gucmV0YWlsUHJpY2UgKiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICByZXRhaWxQcmljZTogYmF0Y2gucmV0YWlsUHJpY2UsXG4gICAgd2hvbGVzYWxlUHJpY2U6IGJhdGNoLndob2xlc2FsZVByaWNlLFxuICAgIHJlbWFpbmluZ1F1YW50aXR5OiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICBzdXBwbGllcjogYmF0Y2guU3VwcGxpZXIubmFtZSxcbiAgfSkpO1xuXG4gIGNvbnN0IHNvcnRlZERhdGEgPSBhcHBseVNvcnRpbmcoc3RvY2tEYXRhLCBzb3J0IGFzIFNvcnRPcHRpb24pO1xuICByZXR1cm4gc29ydGVkRGF0YS5zbGljZSgocGFnZSAtIDEpICogUEFHRV9TSVpFLCBwYWdlICogUEFHRV9TSVpFKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b2NrQnlCcmFuZCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImFscGhhYmV0aWNhbGx5XCIsXG4gIHN0YXJ0RGF0ZSxcbiAgZW5kRGF0ZSxcbn06IFN0b2NrUXVlcnlQYXJhbXMpOiBQcm9taXNlPFN0b2NrRGF0YVtdPiB7XG4gIC8vIEVuc3VyZSBkYXRlcyBhcmUgcHJvcGVybHkgZm9ybWF0dGVkIGZvciBQcmlzbWFcbiAgY29uc3QgZm9ybWF0dGVkU3RhcnREYXRlID0gc3RhcnREYXRlID8gbmV3IERhdGUoc3RhcnREYXRlKSA6IHVuZGVmaW5lZDtcbiAgY29uc3QgZm9ybWF0dGVkRW5kRGF0ZSA9IGVuZERhdGUgPyBuZXcgRGF0ZShlbmREYXRlKSA6IHVuZGVmaW5lZDtcblxuICBjb25zdCBicmFuZHMgPSBhd2FpdCBwcmlzbWEuZHJ1Z0JyYW5kLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZTogeyBjb250YWluczogcXVlcnkgfSxcbiAgICAgIEJhdGNoOiB7XG4gICAgICAgIHNvbWU6IHtcbiAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgIC8vIHsgc3RhdHVzOiBcIkFWQUlMQUJMRVwiIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0b2NrRGF0ZToge1xuICAgICAgICAgICAgICAgIGd0ZTogZm9ybWF0dGVkU3RhcnREYXRlLFxuICAgICAgICAgICAgICAgIGx0ZTogZm9ybWF0dGVkRW5kRGF0ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBCYXRjaDoge1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIEFORDogW1xuICAgICAgICAgICAgLy8geyBzdGF0dXM6IFwiQVZBSUxBQkxFXCIgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgc3RvY2tEYXRlOiB7XG4gICAgICAgICAgICAgICAgZ3RlOiBmb3JtYXR0ZWRTdGFydERhdGUsXG4gICAgICAgICAgICAgICAgbHRlOiBmb3JtYXR0ZWRFbmREYXRlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICBdLFxuICAgICAgICB9LFxuICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICB3aG9sZXNhbGVQcmljZTogdHJ1ZSxcbiAgICAgICAgICByZXRhaWxQcmljZTogdHJ1ZSxcbiAgICAgICAgICByZW1haW5pbmdRdWFudGl0eTogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gVHJhbnNmb3JtIGFuZCBzb3J0IHRoZSBkYXRhXG4gIGNvbnN0IHN0b2NrRGF0YTogU3RvY2tEYXRhW10gPSBicmFuZHNcbiAgICAuZmlsdGVyKChicmFuZCkgPT4gYnJhbmQuQmF0Y2gubGVuZ3RoID4gMCkgLy8gT25seSBpbmNsdWRlIGJyYW5kcyB3aXRoIG1hdGNoaW5nIGJhdGNoZXNcbiAgICAubWFwKChicmFuZCkgPT4gKHtcbiAgICAgIGlkOiBicmFuZC5pZCxcbiAgICAgIG5hbWU6IGJyYW5kLm5hbWUsXG4gICAgICB0b3RhbFByaWNlOiBicmFuZC5CYXRjaC5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGJhdGNoKSA9PiBzdW0gKyBiYXRjaC5yZXRhaWxQcmljZSAqIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgICAwXG4gICAgICApLFxuICAgIH0pKTtcblxuICBjb25zdCBzb3J0ZWREYXRhID0gYXBwbHlTb3J0aW5nKHN0b2NrRGF0YSwgc29ydCBhcyBTb3J0T3B0aW9uKTtcbiAgcmV0dXJuIHNvcnRlZERhdGEuc2xpY2UoKHBhZ2UgLSAxKSAqIFBBR0VfU0laRSwgcGFnZSAqIFBBR0VfU0laRSk7XG59XG5cbi8vIERlZmluZSBpbnRlcmZhY2VzIGZvciB0aGUgcmV0dXJuIHR5cGVzXG5pbnRlcmZhY2UgQmF0Y2hJbmZvIHtcbiAgYmF0Y2hJZDogbnVtYmVyO1xuICBiYXRjaE51bWJlcjogc3RyaW5nO1xuICBicmFuZE5hbWU6IHN0cmluZztcbiAgY29uY2VudHJhdGlvbjogbnVtYmVyO1xuICByZXRhaWxQcmljZTogbnVtYmVyO1xuICB0b3RhbFByaWNlOiBudW1iZXI7XG4gIHJlbWFpbmluZ1F1YW50aXR5OiBudW1iZXI7XG4gIGV4cGlyeURhdGU6IHN0cmluZztcbn1cblxuaW50ZXJmYWNlIFN1cHBsaWVyRGF0YSB7XG4gIHN1cHBsaWVySWQ6IG51bWJlcjtcbiAgc3VwcGxpZXJOYW1lOiBzdHJpbmc7XG4gIGJhdGNoZXM6IEJhdGNoSW5mb1tdO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3VwcGxpZXJXaXNlUHJpY2luZyhcbiAgZHJ1Z0lkOiBudW1iZXJcbik6IFByb21pc2U8U3VwcGxpZXJEYXRhW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGRydWdJZDogZHJ1Z0lkLFxuICAgICAgICAvLyBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkcnVnQnJhbmQ6IHRydWUsXG4gICAgICAgIFN1cHBsaWVyOiB0cnVlLFxuICAgICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBvcmRlckJ5OiB7XG4gICAgICAgIHJldGFpbFByaWNlOiBcImFzY1wiLCAvLyBTb3J0IGJ5IHJldGFpbCBwcmljZSAobG93IHRvIGhpZ2gpXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gR3JvdXAgYmF0Y2hlcyBieSBzdXBwbGllclxuICAgIGNvbnN0IHN1cHBsaWVyRGF0YTogUmVjb3JkPHN0cmluZywgU3VwcGxpZXJEYXRhPiA9IGJhdGNoZXMucmVkdWNlKFxuICAgICAgKGFjYywgYmF0Y2gpID0+IHtcbiAgICAgICAgY29uc3Qgc3VwcGxpZXJOYW1lID0gYmF0Y2guU3VwcGxpZXIubmFtZTtcblxuICAgICAgICBpZiAoIWFjY1tzdXBwbGllck5hbWVdKSB7XG4gICAgICAgICAgYWNjW3N1cHBsaWVyTmFtZV0gPSB7XG4gICAgICAgICAgICBzdXBwbGllcklkOiBiYXRjaC5TdXBwbGllci5pZCxcbiAgICAgICAgICAgIHN1cHBsaWVyTmFtZTogc3VwcGxpZXJOYW1lLFxuICAgICAgICAgICAgYmF0Y2hlczogW10sXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFjY1tzdXBwbGllck5hbWVdLmJhdGNoZXMucHVzaCh7XG4gICAgICAgICAgYmF0Y2hJZDogYmF0Y2guaWQsXG4gICAgICAgICAgYmF0Y2hOdW1iZXI6IGJhdGNoLm51bWJlcixcbiAgICAgICAgICBicmFuZE5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgICAgICAgIGNvbmNlbnRyYXRpb246IGJhdGNoLnVuaXRDb25jZW50cmF0aW9uLmNvbmNlbnRyYXRpb24sXG4gICAgICAgICAgcmV0YWlsUHJpY2U6IGJhdGNoLnJldGFpbFByaWNlLFxuICAgICAgICAgIHRvdGFsUHJpY2U6IGJhdGNoLmZ1bGxBbW91bnQgKiBiYXRjaC53aG9sZXNhbGVQcmljZSxcbiAgICAgICAgICByZW1haW5pbmdRdWFudGl0eTogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgICAgICAgZXhwaXJ5RGF0ZTogYmF0Y2guZXhwaXJ5LnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSxcbiAgICAgIHt9IGFzIFJlY29yZDxzdHJpbmcsIFN1cHBsaWVyRGF0YT5cbiAgICApO1xuXG4gICAgcmV0dXJuIE9iamVjdC52YWx1ZXMoc3VwcGxpZXJEYXRhKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3VwcGxpZXItd2lzZSBwcmljaW5nOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHN1cHBsaWVyLXdpc2UgcHJpY2luZ1wiKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0U3RvY2tBbmFseXNpcyhcbiAgZGF0ZVJhbmdlOiBEYXRlUmFuZ2Vcbik6IFByb21pc2U8U3RvY2tBbmFseXNpcz4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgc3RvY2tEYXRlOiB7XG4gICAgICAgICAgZ3RlOiBkYXRlUmFuZ2Uuc3RhcnREYXRlLFxuICAgICAgICAgIGx0ZTogZGF0ZVJhbmdlLmVuZERhdGUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBJc3N1ZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBhbmFseXNpczogU3RvY2tBbmFseXNpcyA9IHtcbiAgICAgIGF2YWlsYWJsZTogMCwgLy8gV2lsbCBzdG9yZSBhdmFpbGFibGUgcXVhbnRpdHkgdmFsdWVcbiAgICAgIHNvbGQ6IDAsIC8vIFdpbGwgc3RvcmUgc29sZCBxdWFudGl0eSB2YWx1ZVxuICAgICAgZXhwaXJlZDogMCwgLy8gV2lsbCBzdG9yZSBleHBpcmVkIHF1YW50aXR5IHZhbHVlXG4gICAgICBkaXNwb3NlZDogMCwgLy8gV2lsbCBzdG9yZSBkaXNwb3NlZCBxdWFudGl0eSB2YWx1ZVxuICAgICAgcXVhbGl0eV9mYWlsZWQ6IDAsIC8vIFdpbGwgc3RvcmUgcXVhbGl0eSBmYWlsZWQgcXVhbnRpdHkgdmFsdWVcbiAgICAgIGVycm9yczogMCwgLy8gV2lsbCBzdG9yZSBlcnJvciBxdWFudGl0eSB2YWx1ZVxuICAgIH07XG5cbiAgICBiYXRjaGVzLmZvckVhY2goKGJhdGNoKSA9PiB7XG4gICAgICBjb25zdCBwcmljZVBlclVuaXQgPSBiYXRjaC5yZXRhaWxQcmljZTtcblxuICAgICAgc3dpdGNoIChiYXRjaC5zdGF0dXMpIHtcbiAgICAgICAgY2FzZSBcIkFWQUlMQUJMRVwiOlxuICAgICAgICAgIC8vIEZvciBhdmFpbGFibGUgc3RhdHVzOlxuICAgICAgICAgIC8vIC0gYXZhaWxhYmxlID0gcmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVxuICAgICAgICAgIC8vIC0gc29sZCA9IChmdWxsQW1vdW50IC0gcmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VcbiAgICAgICAgICBhbmFseXNpcy5hdmFpbGFibGUgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgaWYgKGJhdGNoLmZ1bGxBbW91bnQgPiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkge1xuICAgICAgICAgICAgYW5hbHlzaXMuc29sZCArPVxuICAgICAgICAgICAgICAoYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkVYUElSRURcIjpcbiAgICAgICAgICAvLyBGb3IgZXhwaXJlZCBzdGF0dXM6XG4gICAgICAgICAgLy8gLSBleHBpcmVkID0gcmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVxuICAgICAgICAgIC8vIC0gc29sZCA9IChmdWxsQW1vdW50IC0gcmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VcbiAgICAgICAgICBhbmFseXNpcy5leHBpcmVkICs9IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIGlmIChiYXRjaC5mdWxsQW1vdW50ID4gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGFuYWx5c2lzLnNvbGQgKz1cbiAgICAgICAgICAgICAgKGJhdGNoLmZ1bGxBbW91bnQgLSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJDT01QTEVURURcIjpcbiAgICAgICAgICAvLyBGb3IgY29tcGxldGVkIHN0YXR1czpcbiAgICAgICAgICAvLyAtIElmIHRoZXJlJ3MgcmVtYWluaW5nIHF1YW50aXR5LCBpdCdzIGFuIGVycm9yXG4gICAgICAgICAgLy8gLSBzb2xkID0gKGZ1bGxBbW91bnQgLSByZW1haW5pbmdRdWFudGl0eSkgKiBwcmljZVxuICAgICAgICAgIGlmIChiYXRjaC5yZW1haW5pbmdRdWFudGl0eSA+IDApIHtcbiAgICAgICAgICAgIGFuYWx5c2lzLmVycm9ycyArPSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYW5hbHlzaXMuc29sZCArPVxuICAgICAgICAgICAgKGJhdGNoLmZ1bGxBbW91bnQgLSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgY2FzZSBcIkRJU1BPU0VEXCI6XG4gICAgICAgICAgLy8gRm9yIGRpc3Bvc2VkIHN0YXR1czpcbiAgICAgICAgICAvLyAtIGRpc3Bvc2VkID0gcmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVxuICAgICAgICAgIC8vIC0gc29sZCA9IChmdWxsQW1vdW50IC0gcmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VcbiAgICAgICAgICBhbmFseXNpcy5kaXNwb3NlZCArPSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICBpZiAoYmF0Y2guZnVsbEFtb3VudCA+IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSB7XG4gICAgICAgICAgICBhbmFseXNpcy5zb2xkICs9XG4gICAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlFVQUxJVFlfRkFJTEVEXCI6XG4gICAgICAgICAgLy8gRm9yIHF1YWxpdHkgZmFpbGVkIHN0YXR1czpcbiAgICAgICAgICAvLyAtIHF1YWxpdHlfZmFpbGVkID0gcmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVxuICAgICAgICAgIC8vIC0gc29sZCA9IChmdWxsQW1vdW50IC0gcmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VcbiAgICAgICAgICBhbmFseXNpcy5xdWFsaXR5X2ZhaWxlZCArPSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICBpZiAoYmF0Y2guZnVsbEFtb3VudCA+IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSB7XG4gICAgICAgICAgICBhbmFseXNpcy5zb2xkICs9XG4gICAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIEFueSB1bmtub3duIHN0YXR1cywgY291bnQgYXMgZXJyb3JcbiAgICAgICAgICBhbmFseXNpcy5lcnJvcnMgKz0gYmF0Y2guZnVsbEFtb3VudCAqIHByaWNlUGVyVW5pdDtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBhbmFseXNpcztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc3RvY2sgYW5hbHlzaXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggc3RvY2sgYW5hbHlzaXNcIik7XG4gIH1cbn1cblxuY29uc3QgUEFHRV9TSVpFX0NPTVBMRVRFRF9EUlVHU19CWV9CQVRDSCA9IDE1O1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQYWdlc0ZvckNvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeU1vZGVsKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBzdGF0dXMgPSBcIkFMTFwiLFxuICBmcm9tRGF0ZSxcbiAgdG9EYXRlLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBmcm9tRGF0ZT86IHN0cmluZztcbiAgdG9EYXRlPzogc3RyaW5nO1xufSkge1xuICBjb25zdCB3aGVyZUNvbmRpdGlvbjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgZHJ1ZzogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0sXG4gIH07XG5cbiAgaWYgKHN0YXR1cyA9PT0gXCJBTExcIikge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHsgbm90OiBcIkFWQUlMQUJMRVwiIH07XG4gIH0gZWxzZSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0gc3RhdHVzIGFzIEJhdGNoU3RhdHVzO1xuICB9XG4gIGlmIChmcm9tRGF0ZSAmJiB0b0RhdGUpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdG9ja0RhdGUgPSB7XG4gICAgICBndGU6IG5ldyBEYXRlKGZyb21EYXRlKSxcbiAgICAgIGx0ZTogbmV3IERhdGUodG9EYXRlKSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdG90YWxJdGVtcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5jb3VudCh7IHdoZXJlOiB3aGVyZUNvbmRpdGlvbiB9KTtcbiAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbEl0ZW1zIC8gUEFHRV9TSVpFX0NPTVBMRVRFRF9EUlVHU19CWV9CQVRDSCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlNb2RlbCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImV4cGlyeURhdGVcIixcbiAgc3RhdHVzID0gXCJBTExcIixcbiAgZnJvbURhdGUsXG4gIHRvRGF0ZSxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIHNvcnQ/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZnJvbURhdGU/OiBzdHJpbmc7XG4gIHRvRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIGRydWc6IHsgbmFtZTogeyBjb250YWluczogcXVlcnkgfSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgIHdoZXJlOiB3aGVyZUNvbmRpdGlvbixcbiAgICBpbmNsdWRlOiB7XG4gICAgICBkcnVnOiB0cnVlLFxuICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgdW5pdENvbmNlbnRyYXRpb246IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZm9ybWF0dGVkQmF0Y2hlcyA9IGJhdGNoZXMubWFwKChiYXRjaCkgPT4gKHtcbiAgICBpZDogYmF0Y2guaWQsXG4gICAgYmF0Y2hOdW1iZXI6IGJhdGNoLm51bWJlcixcbiAgICBicmFuZE5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgIG1vZGVsTmFtZTogYmF0Y2guZHJ1Zy5uYW1lLFxuICAgIGV4cGlyeURhdGU6IGJhdGNoLmV4cGlyeS50b0lTT1N0cmluZygpLFxuICAgIHN0b2NrRGF0ZTogYmF0Y2guc3RvY2tEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgcmVtYWluaW5nQW1vdW50OiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICBmdWxsQW1vdW50OiBiYXRjaC5mdWxsQW1vdW50LFxuICAgIHN0YXR1czogYmF0Y2guc3RhdHVzLFxuICAgIHVuaXRDb25jZW50cmF0aW9uOiBiYXRjaC51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgIHR5cGU6IGJhdGNoLnR5cGUsXG4gIH0pKTtcblxuICByZXR1cm4gc29ydEFuZFBhZ2luYXRlQmF0Y2hlcyhmb3JtYXR0ZWRCYXRjaGVzLCBzb3J0LCBwYWdlKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlCcmFuZCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgc3RhdHVzID0gXCJBTExcIixcbiAgZnJvbURhdGUsXG4gIHRvRGF0ZSxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZnJvbURhdGU/OiBzdHJpbmc7XG4gIHRvRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIGRydWdCcmFuZDogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0sXG4gIH07XG5cbiAgaWYgKHN0YXR1cyA9PT0gXCJBTExcIikge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHsgbm90OiBcIkFWQUlMQUJMRVwiIH07XG4gIH0gZWxzZSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0gc3RhdHVzIGFzIEJhdGNoU3RhdHVzO1xuICB9XG4gIGlmIChmcm9tRGF0ZSAmJiB0b0RhdGUpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdG9ja0RhdGUgPSB7XG4gICAgICBndGU6IG5ldyBEYXRlKGZyb21EYXRlKSxcbiAgICAgIGx0ZTogbmV3IERhdGUodG9EYXRlKSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgdG90YWxJdGVtcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5jb3VudCh7IHdoZXJlOiB3aGVyZUNvbmRpdGlvbiB9KTtcbiAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbEl0ZW1zIC8gUEFHRV9TSVpFX0NPTVBMRVRFRF9EUlVHU19CWV9CQVRDSCk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlCcmFuZCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImV4cGlyeURhdGVcIixcbiAgc3RhdHVzID0gXCJBTExcIixcbiAgZnJvbURhdGUsXG4gIHRvRGF0ZSxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIHNvcnQ/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZnJvbURhdGU/OiBzdHJpbmc7XG4gIHRvRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIGRydWdCcmFuZDogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0sXG4gIH07XG5cbiAgaWYgKHN0YXR1cyA9PT0gXCJBTExcIikge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHsgbm90OiBcIkFWQUlMQUJMRVwiIH07XG4gIH0gZWxzZSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0gc3RhdHVzIGFzIEJhdGNoU3RhdHVzO1xuICB9XG4gIGlmIChmcm9tRGF0ZSAmJiB0b0RhdGUpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdG9ja0RhdGUgPSB7XG4gICAgICBndGU6IG5ldyBEYXRlKGZyb21EYXRlKSxcbiAgICAgIGx0ZTogbmV3IERhdGUodG9EYXRlKSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYmF0Y2hlcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGRydWc6IHRydWUsXG4gICAgICBkcnVnQnJhbmQ6IHRydWUsXG4gICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBmb3JtYXR0ZWRCYXRjaGVzID0gYmF0Y2hlcy5tYXAoKGJhdGNoKSA9PiAoe1xuICAgIGlkOiBiYXRjaC5pZCxcbiAgICBiYXRjaE51bWJlcjogYmF0Y2gubnVtYmVyLFxuICAgIGJyYW5kTmFtZTogYmF0Y2guZHJ1Z0JyYW5kLm5hbWUsXG4gICAgbW9kZWxOYW1lOiBiYXRjaC5kcnVnLm5hbWUsXG4gICAgZXhwaXJ5RGF0ZTogYmF0Y2guZXhwaXJ5LnRvSVNPU3RyaW5nKCksXG4gICAgc3RvY2tEYXRlOiBiYXRjaC5zdG9ja0RhdGUudG9JU09TdHJpbmcoKSxcbiAgICByZW1haW5pbmdBbW91bnQ6IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgIGZ1bGxBbW91bnQ6IGJhdGNoLmZ1bGxBbW91bnQsXG4gICAgc3RhdHVzOiBiYXRjaC5zdGF0dXMsXG4gICAgdW5pdENvbmNlbnRyYXRpb246IGJhdGNoLnVuaXRDb25jZW50cmF0aW9uLmNvbmNlbnRyYXRpb24sXG4gICAgdHlwZTogYmF0Y2gudHlwZSxcbiAgfSkpO1xuXG4gIHJldHVybiBzb3J0QW5kUGFnaW5hdGVCYXRjaGVzKGZvcm1hdHRlZEJhdGNoZXMsIHNvcnQsIHBhZ2UpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQYWdlc0ZvckNvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeUJhdGNoKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBzdGF0dXMgPSBcIkFMTFwiLFxuICBmcm9tRGF0ZSxcbiAgdG9EYXRlLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBmcm9tRGF0ZT86IHN0cmluZztcbiAgdG9EYXRlPzogc3RyaW5nO1xufSkge1xuICBjb25zdCB3aGVyZUNvbmRpdGlvbjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgbnVtYmVyOiB7IGNvbnRhaW5zOiBxdWVyeSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsSXRlbXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guY291bnQoeyB3aGVyZTogd2hlcmVDb25kaXRpb24gfSk7XG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0gpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29tcGxldGVkRmlsdGVyZWREcnVnc0J5QmF0Y2goe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJleHBpcnlEYXRlXCIsXG4gIHN0YXR1cyA9IFwiQUxMXCIsXG4gIGZyb21EYXRlLFxuICB0b0RhdGUsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBzb3J0Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIGZyb21EYXRlPzogc3RyaW5nO1xuICB0b0RhdGU/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBudW1iZXI6IHsgY29udGFpbnM6IHF1ZXJ5IH0sXG4gIH07XG5cbiAgaWYgKHN0YXR1cyA9PT0gXCJBTExcIikge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHsgbm90OiBcIkFWQUlMQUJMRVwiIH07XG4gIH0gZWxzZSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0gc3RhdHVzIGFzIEJhdGNoU3RhdHVzO1xuICB9XG4gIGlmIChmcm9tRGF0ZSAmJiB0b0RhdGUpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdG9ja0RhdGUgPSB7XG4gICAgICBndGU6IG5ldyBEYXRlKGZyb21EYXRlKSxcbiAgICAgIGx0ZTogbmV3IERhdGUodG9EYXRlKSxcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYmF0Y2hlcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGRydWc6IHRydWUsXG4gICAgICBkcnVnQnJhbmQ6IHRydWUsXG4gICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBmb3JtYXR0ZWRCYXRjaGVzID0gYmF0Y2hlcy5tYXAoKGJhdGNoKSA9PiAoe1xuICAgIGlkOiBiYXRjaC5pZCxcbiAgICBiYXRjaE51bWJlcjogYmF0Y2gubnVtYmVyLFxuICAgIGJyYW5kTmFtZTogYmF0Y2guZHJ1Z0JyYW5kLm5hbWUsXG4gICAgbW9kZWxOYW1lOiBiYXRjaC5kcnVnLm5hbWUsXG4gICAgZXhwaXJ5RGF0ZTogYmF0Y2guZXhwaXJ5LnRvSVNPU3RyaW5nKCksXG4gICAgc3RvY2tEYXRlOiBiYXRjaC5zdG9ja0RhdGUudG9JU09TdHJpbmcoKSxcbiAgICByZW1haW5pbmdBbW91bnQ6IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgIGZ1bGxBbW91bnQ6IGJhdGNoLmZ1bGxBbW91bnQsXG4gICAgc3RhdHVzOiBiYXRjaC5zdGF0dXMsXG4gICAgdW5pdENvbmNlbnRyYXRpb246IGJhdGNoLnVuaXRDb25jZW50cmF0aW9uLmNvbmNlbnRyYXRpb24sXG4gICAgdHlwZTogYmF0Y2gudHlwZSxcbiAgfSkpO1xuXG4gIHJldHVybiBzb3J0QW5kUGFnaW5hdGVCYXRjaGVzKGZvcm1hdHRlZEJhdGNoZXMsIHNvcnQsIHBhZ2UpO1xufVxuXG5mdW5jdGlvbiBzb3J0QW5kUGFnaW5hdGVCYXRjaGVzKFxuICBiYXRjaGVzOiB7XG4gICAgaWQ6IG51bWJlcjtcbiAgICBiYXRjaE51bWJlcjogc3RyaW5nO1xuICAgIGJyYW5kTmFtZTogc3RyaW5nO1xuICAgIG1vZGVsTmFtZTogc3RyaW5nO1xuICAgIGV4cGlyeURhdGU6IHN0cmluZztcbiAgICBzdG9ja0RhdGU6IHN0cmluZztcbiAgICByZW1haW5pbmdBbW91bnQ6IG51bWJlcjtcbiAgICBmdWxsQW1vdW50OiBudW1iZXI7XG4gICAgc3RhdHVzOiBzdHJpbmc7XG4gICAgdW5pdENvbmNlbnRyYXRpb246IG51bWJlcjtcbiAgICB0eXBlOiBzdHJpbmc7XG4gIH1bXSxcbiAgc29ydDogc3RyaW5nLFxuICBwYWdlOiBudW1iZXJcbikge1xuICBpZiAoc29ydCA9PT0gXCJleHBpcnlEYXRlXCIpIHtcbiAgICBiYXRjaGVzLnNvcnQoXG4gICAgICAoYSwgYikgPT5cbiAgICAgICAgbmV3IERhdGUoYS5leHBpcnlEYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShiLmV4cGlyeURhdGUpLmdldFRpbWUoKVxuICAgICk7XG4gIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJuZXdseUFkZGVkXCIpIHtcbiAgICBiYXRjaGVzLnNvcnQoXG4gICAgICAoYSwgYikgPT5cbiAgICAgICAgbmV3IERhdGUoYi5zdG9ja0RhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuc3RvY2tEYXRlKS5nZXRUaW1lKClcbiAgICApO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiYWxwaGFiZXRpY2FsbHlcIikge1xuICAgIGJhdGNoZXMuc29ydCgoYSwgYikgPT4gYS5tb2RlbE5hbWUubG9jYWxlQ29tcGFyZShiLm1vZGVsTmFtZSkpO1xuICB9XG5cbiAgcmV0dXJuIGJhdGNoZXMuc2xpY2UoXG4gICAgKHBhZ2UgLSAxKSAqIFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0gsXG4gICAgcGFnZSAqIFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0hcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldElzc3VlZFBhdGllbnRzKGJhdGNoSWQ6IG51bWJlcikge1xuICByZXR1cm4gYXdhaXQgcHJpc21hLmlzc3VlXG4gICAgLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7IGJhdGNoSWQgfSxcbiAgICAgIHNlbGVjdDoge1xuICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgcXVhbnRpdHk6IHRydWUsXG4gICAgICAgIHByZXNjcmlwdGlvbklkOiB0cnVlLFxuICAgICAgICBwcmVzY3JpcHRpb246IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIHRpbWU6IHRydWUsXG4gICAgICAgICAgICBwYXRpZW50SWQ6IHRydWUsXG4gICAgICAgICAgICBwYXRpZW50OiB7XG4gICAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pXG4gICAgLnRoZW4oKGlzc3VlcykgPT5cbiAgICAgIGlzc3Vlcy5tYXAoKGlzc3VlKSA9PiAoe1xuICAgICAgICBpZDogaXNzdWUuaWQsXG4gICAgICAgIGlzc3VlZERhdGU6IGlzc3VlLnByZXNjcmlwdGlvbi50aW1lLnRvSVNPU3RyaW5nKCkuc3BsaXQoXCJUXCIpWzBdLFxuICAgICAgICBwYXRpZW50SWQ6IGlzc3VlLnByZXNjcmlwdGlvbi5wYXRpZW50SWQsXG4gICAgICAgIHBhdGllbnROYW1lOiBpc3N1ZS5wcmVzY3JpcHRpb24ucGF0aWVudC5uYW1lLFxuICAgICAgICBwcmVzY3JpcHRpb25JZDogaXNzdWUucHJlc2NyaXB0aW9uSWQsXG4gICAgICAgIGlzc3VlZEFtb3VudDogaXNzdWUucXVhbnRpdHksXG4gICAgICB9KSlcbiAgICApO1xufVxuXG4vL1N1Z2dlc3QgdGhlIG5hbWUgd2hlbiBhZGRpbmcgdGhlIGRydWdzXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzZWFyY2hEcnVnQnJhbmRzKHF1ZXJ5OiBzdHJpbmcpIHtcbiAgaWYgKCFxdWVyeSB8fCBxdWVyeS5sZW5ndGggPCAyKSByZXR1cm4gW107XG5cbiAgcmV0dXJuIHByaXNtYS5kcnVnQnJhbmQuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIHN0YXJ0c1dpdGg6IHF1ZXJ5LFxuICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIG5hbWU6IHRydWUsXG4gICAgICBkZXNjcmlwdGlvbjogdHJ1ZSxcbiAgICB9LFxuICAgIHRha2U6IDgsXG4gIH0pO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoRHJ1Z01vZGVscyhxdWVyeTogc3RyaW5nKSB7XG4gIGlmICghcXVlcnkgfHwgcXVlcnkubGVuZ3RoIDwgMikgcmV0dXJuIFtdO1xuXG4gIHJldHVybiBwcmlzbWEuZHJ1Zy5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIG5hbWU6IHtcbiAgICAgICAgc3RhcnRzV2l0aDogcXVlcnksXG4gICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgIH0sXG4gICAgfSxcbiAgICBzZWxlY3Q6IHtcbiAgICAgIGlkOiB0cnVlLFxuICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgIGJ1ZmZlckxldmVsczoge1xuICAgICAgICAvLyBJbmNsdWRlIHRoZSByZWxhdGVkIEJ1ZmZlckxldmVsIGRhdGFcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgdHlwZTogdHJ1ZSxcbiAgICAgICAgICBidWZmZXJBbW91bnQ6IHRydWUsXG4gICAgICAgICAgdW5pdENvbmNlbnRyYXRpb246IHtcbiAgICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgICBpZDogdHJ1ZSxcbiAgICAgICAgICAgICAgY29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICB0YWtlOiA4LFxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERydWdDb25jZW50cmF0aW9ucyhcbiAgZHJ1Z0lkOiBudW1iZXIsXG4gIGRydWdUeXBlOiBEcnVnVHlwZVxuKTogUHJvbWlzZTxEcnVnQ29uY2VudHJhdGlvbkRhdGFTdWdnZXN0aW9uW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB3ZWlnaHRzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGRydWdJZDogZHJ1Z0lkLFxuICAgICAgICB0eXBlOiBkcnVnVHlwZSxcbiAgICAgIH0sXG4gICAgICBpbmNsdWRlOiB7XG4gICAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIGRpc3RpbmN0OiBbXCJ1bml0Q29uY2VudHJhdGlvbklkXCJdLCAvLyBFbnN1cmUgdW5pcXVlIHdlaWdodElkc1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHdlaWdodHMubWFwKChkdykgPT4gKHtcbiAgICAgIGlkOiBkdy51bml0Q29uY2VudHJhdGlvbi5pZCxcbiAgICAgIGNvbmNlbnRyYXRpb246IGR3LnVuaXRDb25jZW50cmF0aW9uLmNvbmNlbnRyYXRpb24sXG4gICAgfSkpO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBkcnVnIHdlaWdodHM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZHJ1ZyB3ZWlnaHRzXCIpO1xuICB9XG59XG5cbi8vc2hvdyB0aGUgaW5mbyBvZiBvbmUgZHJ1ZyBtb2RlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldERydWdNb2RlbHNXaXRoQnVmZmVyTGV2ZWwoXG4gIHNlYXJjaFF1ZXJ5Pzogc3RyaW5nLFxuICBzZWxlY3Rpb24/OiBzdHJpbmdcbikge1xuICB0cnkge1xuICAgIC8vIEZpcnN0LCBmZXRjaCBhbGwgZHJ1Z3Mgd2l0aCB0aGVpciBidWZmZXIgbGV2ZWxzIGFuZCBiYXRjaGVzXG4gICAgY29uc3QgZHJ1Z3MgPSBhd2FpdCBwcmlzbWEuZHJ1Zy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogc2VhcmNoUXVlcnlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIGNvbnRhaW5zOiBzZWFyY2hRdWVyeSxcbiAgICAgICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBidWZmZXJMZXZlbHM6IHtcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGJ1ZmZlckFtb3VudDogdHJ1ZSxcbiAgICAgICAgICAgIHR5cGU6IHRydWUsXG4gICAgICAgICAgICB1bml0Q29uY2VudHJhdGlvbklkOiB0cnVlLFxuICAgICAgICAgICAgdW5pdENvbmNlbnRyYXRpb246IHtcbiAgICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgICAgY29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgYmF0Y2g6IHtcbiAgICAgICAgICB3aGVyZToge1xuICAgICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICByZW1haW5pbmdRdWFudGl0eTogdHJ1ZSxcbiAgICAgICAgICAgIGZ1bGxBbW91bnQ6IHRydWUsXG4gICAgICAgICAgICB0eXBlOiB0cnVlLFxuICAgICAgICAgICAgdW5pdENvbmNlbnRyYXRpb25JZDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIENyZWF0ZSBhIGZsYXR0ZW5lZCBhcnJheSBvZiBkcnVnIGNhcmRzIHdpdGggdW5pcXVlIHR5cGUvY29uY2VudHJhdGlvbiBjb21iaW5hdGlvbnNcbiAgICBjb25zdCByZXN1bHRzID0gW107XG5cbiAgICAvLyBQcm9jZXNzIGVhY2ggZHJ1Z1xuICAgIGRydWdzLmZvckVhY2goKGRydWcpID0+IHtcbiAgICAgIC8vIERlZmluZSB0aGUgdHlwZSBmb3Igb3VyIG9iamVjdCBleHBsaWNpdGx5IHdpdGggYW4gaW5kZXggc2lnbmF0dXJlXG4gICAgICBjb25zdCBiYXRjaGVzQnlUeXBlQW5kQ29uYzogeyBba2V5OiBzdHJpbmddOiBBcnJheTxhbnk+IH0gPSB7fTtcblxuICAgICAgLy8gR3JvdXAgYmF0Y2hlcyBieSB0aGVpciB0eXBlIGFuZCBjb25jZW50cmF0aW9uIElEXG4gICAgICBkcnVnLmJhdGNoLmZvckVhY2goKGJhdGNoKSA9PiB7XG4gICAgICAgIGNvbnN0IGtleSA9IGAke2JhdGNoLnR5cGV9LSR7YmF0Y2gudW5pdENvbmNlbnRyYXRpb25JZH1gO1xuXG4gICAgICAgIGlmICghYmF0Y2hlc0J5VHlwZUFuZENvbmNba2V5XSkge1xuICAgICAgICAgIGJhdGNoZXNCeVR5cGVBbmRDb25jW2tleV0gPSBbXTtcbiAgICAgICAgfVxuXG4gICAgICAgIGJhdGNoZXNCeVR5cGVBbmRDb25jW2tleV0ucHVzaChiYXRjaCk7XG4gICAgICB9KTtcblxuICAgICAgLy8gUHJvY2VzcyBlYWNoIGJ1ZmZlciBsZXZlbFxuICAgICAgZHJ1Zy5idWZmZXJMZXZlbHMuZm9yRWFjaCgoYnVmZmVyTGV2ZWwpID0+IHtcbiAgICAgICAgY29uc3Qga2V5ID0gYCR7YnVmZmVyTGV2ZWwudHlwZX0tJHtidWZmZXJMZXZlbC51bml0Q29uY2VudHJhdGlvbklkfWA7XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nQmF0Y2hlcyA9IGJhdGNoZXNCeVR5cGVBbmRDb25jW2tleV0gfHwgW107XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIHRvdGFscyBvbmx5IGZvciBtYXRjaGluZyBiYXRjaGVzXG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZUFtb3VudCA9IG1hdGNoaW5nQmF0Y2hlcy5yZWR1Y2UoXG4gICAgICAgICAgKHN1bSwgYmF0Y2gpID0+IHN1bSArIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgICAgIDBcbiAgICAgICAgKTtcblxuICAgICAgICBjb25zdCBmdWxsQW1vdW50ID0gbWF0Y2hpbmdCYXRjaGVzLnJlZHVjZShcbiAgICAgICAgICAoc3VtLCBiYXRjaCkgPT4gc3VtICsgYmF0Y2guZnVsbEFtb3VudCxcbiAgICAgICAgICAwXG4gICAgICAgICk7XG5cbiAgICAgICAgLy8gQWRkIHRvIHJlc3VsdHNcbiAgICAgICAgcmVzdWx0cy5wdXNoKHtcbiAgICAgICAgICBpZDogZHJ1Zy5pZCxcbiAgICAgICAgICBuYW1lOiBkcnVnLm5hbWUsXG4gICAgICAgICAgdHlwZTogYnVmZmVyTGV2ZWwudHlwZSxcbiAgICAgICAgICBjb25jZW50cmF0aW9uOiBidWZmZXJMZXZlbC51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgICAgICAgIGJ1ZmZlckFtb3VudDogYnVmZmVyTGV2ZWwuYnVmZmVyQW1vdW50LFxuICAgICAgICAgIGF2YWlsYWJsZUFtb3VudCxcbiAgICAgICAgICBmdWxsQW1vdW50LFxuICAgICAgICAgIHVuaXF1ZUtleTogYCR7ZHJ1Zy5pZH0tJHtidWZmZXJMZXZlbC50eXBlfS0ke2J1ZmZlckxldmVsLnVuaXRDb25jZW50cmF0aW9uSWR9YCxcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIC8vIEFwcGx5IHNvcnRpbmcgYmFzZWQgb24gc2VsZWN0aW9uXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgc3dpdGNoIChzZWxlY3Rpb24pIHtcbiAgICAgICAgY2FzZSBcImJ1ZmZlcmVkXCI6XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYVJhdGlvID1cbiAgICAgICAgICAgICAgYS5idWZmZXJBbW91bnQgPiAwID8gYS5hdmFpbGFibGVBbW91bnQgLyBhLmJ1ZmZlckFtb3VudCA6IDA7XG4gICAgICAgICAgICBjb25zdCBiUmF0aW8gPVxuICAgICAgICAgICAgICBiLmJ1ZmZlckFtb3VudCA+IDAgPyBiLmF2YWlsYWJsZUFtb3VudCAvIGIuYnVmZmVyQW1vdW50IDogMDtcbiAgICAgICAgICAgIHJldHVybiBhUmF0aW8gLSBiUmF0aW87XG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJzdG9ja2VkXCI6XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYVJhdGlvID1cbiAgICAgICAgICAgICAgYS5idWZmZXJBbW91bnQgPiAwID8gYS5hdmFpbGFibGVBbW91bnQgLyBhLmJ1ZmZlckFtb3VudCA6IDA7XG4gICAgICAgICAgICBjb25zdCBiUmF0aW8gPVxuICAgICAgICAgICAgICBiLmJ1ZmZlckFtb3VudCA+IDAgPyBiLmF2YWlsYWJsZUFtb3VudCAvIGIuYnVmZmVyQW1vdW50IDogMDtcbiAgICAgICAgICAgIHJldHVybiBiUmF0aW8gLSBhUmF0aW87XG4gICAgICAgICAgfSk7XG4gICAgICAgIGNhc2UgXCJxdWFudGl0eS1hc2NcIjpcbiAgICAgICAgICByZXR1cm4gcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBhLmF2YWlsYWJsZUFtb3VudCAtIGIuYXZhaWxhYmxlQW1vdW50KTtcbiAgICAgICAgY2FzZSBcInF1YW50aXR5LWRlc2NcIjpcbiAgICAgICAgICByZXR1cm4gcmVzdWx0cy5zb3J0KChhLCBiKSA9PiBiLmF2YWlsYWJsZUFtb3VudCAtIGEuYXZhaWxhYmxlQW1vdW50KTtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gcmVzdWx0cztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byBmZXRjaCBkcnVnIG1vZGVscyB3aXRoIGJ1ZmZlciBsZXZlbDpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBkcnVnIG1vZGVscyB3aXRoIGJ1ZmZlciBsZXZlbFwiKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBkYXRlRHJ1Z0J1ZmZlckxldmVsKFxuICBkcnVnSWQ6IG51bWJlcixcbiAgdHlwZTogRHJ1Z1R5cGUsXG4gIGNvbmNlbnRyYXRpb246IG51bWJlcixcbiAgbmV3QnVmZmVyTGV2ZWw6IG51bWJlclxuKSB7XG4gIHRyeSB7XG4gICAgaWYgKCFkcnVnSWQgfHwgZHJ1Z0lkIDw9IDApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgZHJ1ZyBJRFwiIH07XG4gICAgfVxuICAgIGlmIChuZXdCdWZmZXJMZXZlbCA8IDApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkJ1ZmZlciBsZXZlbCBjYW5ub3QgYmUgbmVnYXRpdmVcIiB9O1xuICAgIH1cbiAgICAvLyBGaW5kIHRoZSB1bml0IGNvbmNlbnRyYXRpb24gSUQgZm9yIHRoZSBnaXZlbiBjb25jZW50cmF0aW9uXG4gICAgY29uc3QgdW5pdENvbmNlbnRyYXRpb24gPSBhd2FpdCBwcmlzbWEudW5pdENvbmNlbnRyYXRpb24uZmluZEZpcnN0KHtcbiAgICAgIHdoZXJlOiB7IGNvbmNlbnRyYXRpb24gfSxcbiAgICB9KTtcblxuICAgIGlmICghdW5pdENvbmNlbnRyYXRpb24pIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkludmFsaWQgY29uY2VudHJhdGlvblwiIH07XG4gICAgfVxuXG4gICAgLy8gVXBkYXRlIHRoZSBzcGVjaWZpYyBidWZmZXIgbGV2ZWxcbiAgICBjb25zdCB1cGRhdGVkQnVmZmVyTGV2ZWwgPSBhd2FpdCBwcmlzbWEuYnVmZmVyTGV2ZWwudXBzZXJ0KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGRydWdJZF90eXBlX3VuaXRDb25jZW50cmF0aW9uSWQ6IHtcbiAgICAgICAgICBkcnVnSWQsXG4gICAgICAgICAgdHlwZSxcbiAgICAgICAgICB1bml0Q29uY2VudHJhdGlvbklkOiB1bml0Q29uY2VudHJhdGlvbi5pZCxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICB1cGRhdGU6IHtcbiAgICAgICAgYnVmZmVyQW1vdW50OiBuZXdCdWZmZXJMZXZlbCxcbiAgICAgIH0sXG4gICAgICBjcmVhdGU6IHtcbiAgICAgICAgZHJ1Z0lkLFxuICAgICAgICB0eXBlLFxuICAgICAgICB1bml0Q29uY2VudHJhdGlvbklkOiB1bml0Q29uY2VudHJhdGlvbi5pZCxcbiAgICAgICAgYnVmZmVyQW1vdW50OiBuZXdCdWZmZXJMZXZlbCxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXZhbGlkYXRlUGF0aChcIi9pbnZlbnRvcnkvYnVmZmVyLWxldmVsXCIpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbWVzc2FnZTogYEJ1ZmZlciBsZXZlbCBmb3IgZHJ1ZyBJRCAke2RydWdJZH0gKCR7dHlwZX0sICR7Y29uY2VudHJhdGlvbn1tZykgdXBkYXRlZCB0byAke25ld0J1ZmZlckxldmVsfWAsXG4gICAgICBidWZmZXJMZXZlbDogdXBkYXRlZEJ1ZmZlckxldmVsLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkZhaWxlZCB0byB1cGRhdGUgZHJ1ZyBidWZmZXIgbGV2ZWw6XCIsIGVycm9yKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byB1cGRhdGUgYnVmZmVyIGxldmVsLiBQbGVhc2UgdHJ5IGFnYWluLlwiLFxuICAgIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJnZXRUb3RhbFBhZ2VzIiwiZ2V0RmlsdGVyZWRQYXRpZW50cyIsImdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlNb2RlbCIsImdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlCcmFuZCIsImdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlCYXRjaCIsImdldEZpbHRlcmVkRHJ1Z3NCeU1vZGVsIiwiZ2V0RmlsdGVyZWREcnVnc0J5QnJhbmQiLCJnZXRGaWx0ZXJlZERydWdzQnlCYXRjaCIsImdldFBhdGllbnREZXRhaWxzIiwiYWRkUGF0aWVudCIsInVwZGF0ZVBhdGllbnQiLCJzZWFyY2hTdXBwbGllcnMiLCJhZGROZXdJdGVtIiwiZ2V0QmF0Y2hEYXRhIiwiaGFuZGxlQ29uZmlybWF0aW9uT2ZCYXRjaFN0YXR1c0NoYW5nZSIsImdldEJyYW5kTmFtZSIsImdldERydWdOYW1lIiwiZ2V0QmF0Y2hOdW1iZXIiLCJnZXRBdmFpbGFibGVEcnVnc1RvdGFsUGFnZXMiLCJnZXRTdG9ja0J5TW9kZWwiLCJnZXRTdG9ja0J5QmF0Y2giLCJnZXRTdG9ja0J5QnJhbmQiLCJnZXRTdXBwbGllcldpc2VQcmljaW5nIiwiZ2V0U3RvY2tBbmFseXNpcyIsImdldFRvdGFsUGFnZXNGb3JDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlNb2RlbCIsImdldENvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeU1vZGVsIiwiZ2V0VG90YWxQYWdlc0ZvckNvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeUJyYW5kIiwiZ2V0Q29tcGxldGVkRmlsdGVyZWREcnVnc0J5QnJhbmQiLCJnZXRUb3RhbFBhZ2VzRm9yQ29tcGxldGVkRmlsdGVyZWREcnVnc0J5QmF0Y2giLCJnZXRDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlCYXRjaCIsImdldElzc3VlZFBhdGllbnRzIiwic2VhcmNoRHJ1Z0JyYW5kcyIsInNlYXJjaERydWdNb2RlbHMiLCJnZXREcnVnQ29uY2VudHJhdGlvbnMiLCJnZXREcnVnTW9kZWxzV2l0aEJ1ZmZlckxldmVsIiwidXBkYXRlRHJ1Z0J1ZmZlckxldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/lib/actions.ts\n"));

/***/ })

});