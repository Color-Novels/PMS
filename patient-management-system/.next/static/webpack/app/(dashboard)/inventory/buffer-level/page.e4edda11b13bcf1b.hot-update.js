"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/(dashboard)/inventory/buffer-level/page",{

/***/ "(app-pages-browser)/./src/app/lib/actions.ts":
/*!********************************!*\
  !*** ./src/app/lib/actions.ts ***!
  \********************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   addNewItem: () => (/* binding */ addNewItem),\n/* harmony export */   addPatient: () => (/* binding */ addPatient),\n/* harmony export */   getAvailableDrugsTotalPages: () => (/* binding */ getAvailableDrugsTotalPages),\n/* harmony export */   getBatchData: () => (/* binding */ getBatchData),\n/* harmony export */   getBatchNumber: () => (/* binding */ getBatchNumber),\n/* harmony export */   getBrandName: () => (/* binding */ getBrandName),\n/* harmony export */   getCompletedFilteredDrugsByBatch: () => (/* binding */ getCompletedFilteredDrugsByBatch),\n/* harmony export */   getCompletedFilteredDrugsByBrand: () => (/* binding */ getCompletedFilteredDrugsByBrand),\n/* harmony export */   getCompletedFilteredDrugsByModel: () => (/* binding */ getCompletedFilteredDrugsByModel),\n/* harmony export */   getDrugConcentrations: () => (/* binding */ getDrugConcentrations),\n/* harmony export */   getDrugModelStats: () => (/* binding */ getDrugModelStats),\n/* harmony export */   getDrugModelsWithBufferLevel: () => (/* binding */ getDrugModelsWithBufferLevel),\n/* harmony export */   getDrugName: () => (/* binding */ getDrugName),\n/* harmony export */   getFilteredDrugsByBatch: () => (/* binding */ getFilteredDrugsByBatch),\n/* harmony export */   getFilteredDrugsByBrand: () => (/* binding */ getFilteredDrugsByBrand),\n/* harmony export */   getFilteredDrugsByModel: () => (/* binding */ getFilteredDrugsByModel),\n/* harmony export */   getFilteredPatients: () => (/* binding */ getFilteredPatients),\n/* harmony export */   getIssuedPatients: () => (/* binding */ getIssuedPatients),\n/* harmony export */   getPatientDetails: () => (/* binding */ getPatientDetails),\n/* harmony export */   getStockAnalysis: () => (/* binding */ getStockAnalysis),\n/* harmony export */   getStockByBatch: () => (/* binding */ getStockByBatch),\n/* harmony export */   getStockByBrand: () => (/* binding */ getStockByBrand),\n/* harmony export */   getStockByModel: () => (/* binding */ getStockByModel),\n/* harmony export */   getSupplierWisePricing: () => (/* binding */ getSupplierWisePricing),\n/* harmony export */   getTotalPages: () => (/* binding */ getTotalPages),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByBatch: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByBatch),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByBrand: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByBrand),\n/* harmony export */   getTotalPagesForCompletedFilteredDrugsByModel: () => (/* binding */ getTotalPagesForCompletedFilteredDrugsByModel),\n/* harmony export */   getTotalPagesForFilteredDrugsByBatch: () => (/* binding */ getTotalPagesForFilteredDrugsByBatch),\n/* harmony export */   getTotalPagesForFilteredDrugsByBrand: () => (/* binding */ getTotalPagesForFilteredDrugsByBrand),\n/* harmony export */   getTotalPagesForFilteredDrugsByModel: () => (/* binding */ getTotalPagesForFilteredDrugsByModel),\n/* harmony export */   handleConfirmationOfBatchStatusChange: () => (/* binding */ handleConfirmationOfBatchStatusChange),\n/* harmony export */   searchDrugBrands: () => (/* binding */ searchDrugBrands),\n/* harmony export */   searchDrugModels: () => (/* binding */ searchDrugModels),\n/* harmony export */   searchSuppliers: () => (/* binding */ searchSuppliers),\n/* harmony export */   updateDrugBufferLevel: () => (/* binding */ updateDrugBufferLevel),\n/* harmony export */   updatePatient: () => (/* binding */ updatePatient)\n/* harmony export */ });\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! private-next-rsc-action-client-wrapper */ \"(app-pages-browser)/./node_modules/next/dist/build/webpack/loaders/next-flight-loader/action-client-wrapper.js\");\n/* harmony import */ var private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__);\n/* __next_internal_action_entry_do_not_use__ {\"4005be1ba72ca1e715ec98f7f6eed9dc3de7aefeca\":\"getFilteredDrugsByBrand\",\"400eeabfcd66daae3e2b9c6ac5ceba9fac81c64707\":\"searchDrugModels\",\"402991de2925cb100f6a8aa015996b2a601694a4cc\":\"getDrugName\",\"4029ab35ca73287ac7a0c40e9bc8b8555739c5f7fd\":\"getFilteredDrugsByModel\",\"4035cf9f58df620154defdc5399cd8562aa413b026\":\"getPatientDetails\",\"403dca87f38693430d0c6b2afbfd983067927474ed\":\"getCompletedFilteredDrugsByModel\",\"403eced93f7c11a736a4e79100ce7c5cf739e1622b\":\"getBatchNumber\",\"4043386bee14185ba1515e2c1b2c15538548d21e68\":\"getSupplierWisePricing\",\"4057e760c315e49a0a42205d355f53d65a1f79e890\":\"getStockAnalysis\",\"406f0578a0e1dbec9bd5facbb9d871dd0d77661c20\":\"getIssuedPatients\",\"4073a980e56fa1d52dab9b3a2d1a905992fe5f4b58\":\"addPatient\",\"407ca96687095006b4f37c0355f80f1a27fdacd21f\":\"getTotalPagesForCompletedFilteredDrugsByBrand\",\"40849457ba0c5f3894fb9aba122884fb6f4ce8222a\":\"searchDrugBrands\",\"4084c170a160a4e48a345dc0ef61bf204d47fb3d9d\":\"getCompletedFilteredDrugsByBrand\",\"4088857bccc12d0836803db6feef417d823dc74756\":\"getFilteredDrugsByBatch\",\"409b434e4c4fd68e2904d77ac39067078634c54013\":\"getTotalPagesForFilteredDrugsByBrand\",\"409e2035dcfce1d852b96914c82eaeba5dac30ec02\":\"getTotalPagesForCompletedFilteredDrugsByModel\",\"40adec56a1189dc545442a06d0e2085be34381a513\":\"getDrugModelStats\",\"40b30f5e28a95fa88f7257a195a485a7f50e77975e\":\"getTotalPagesForFilteredDrugsByBatch\",\"40b9e9786968cbc0a7b9f9db0ff1395736844cf347\":\"getBatchData\",\"40ccb2d71f4e66c085789e42dcb91a53235cdee869\":\"getCompletedFilteredDrugsByBatch\",\"40cdd3a94f633811e700506d5f5aa2ef363e2b576c\":\"getTotalPagesForFilteredDrugsByModel\",\"40d57e4d0d54cc8a563ce06d641f6ab6af61076abd\":\"searchSuppliers\",\"40dd9fdec4a18d61a381ad0facb905e9f3ec9f7844\":\"addNewItem\",\"40e1f707e44c8ce2c88b0e318a2beb7902b926ed12\":\"getTotalPagesForCompletedFilteredDrugsByBatch\",\"40e543c8bab9c233c537e3d326de8c0d33720f821b\":\"getStockByBrand\",\"40e5e834a1127b52ddd76957eabdb7b1caa378d621\":\"getStockByBatch\",\"40f8d5d15d5c38e22e630ca513233933a5fea844d3\":\"getBrandName\",\"40fb15b3da819b631c4cdb8f6ad05b77d7d1b47ed5\":\"getStockByModel\",\"6042bb8e1de771e247002f49abeefe7c859e53a236\":\"updatePatient\",\"6064b2d777371e3733fd367750e5a26a7287b47618\":\"getTotalPages\",\"606d8b1018b54c08942dd4809d9fa99ece58a21d8e\":\"getDrugModelsWithBufferLevel\",\"608c76d02aa08c9da8202c5a191c1aea062d2bccf4\":\"handleConfirmationOfBatchStatusChange\",\"60d0e018d5c1c11d0ce16a7664ee7781a525766663\":\"getDrugConcentrations\",\"60ec0816e907232487cbab09be1afb951af9f0c8ac\":\"getAvailableDrugsTotalPages\",\"70aceda58d67a9352aae417dae45861cb50115f322\":\"getFilteredPatients\",\"781190e03b9e9c4cb80194c3b4ce993e7b66be2fc2\":\"updateDrugBufferLevel\"} */ \nvar getTotalPages = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6064b2d777371e3733fd367750e5a26a7287b47618\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPages\");\nvar getFilteredPatients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"70aceda58d67a9352aae417dae45861cb50115f322\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredPatients\");\nvar getTotalPagesForFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40cdd3a94f633811e700506d5f5aa2ef363e2b576c\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByModel\");\nvar getTotalPagesForFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"409b434e4c4fd68e2904d77ac39067078634c54013\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByBrand\");\nvar getTotalPagesForFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b30f5e28a95fa88f7257a195a485a7f50e77975e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForFilteredDrugsByBatch\");\nvar getFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4029ab35ca73287ac7a0c40e9bc8b8555739c5f7fd\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByModel\");\nvar getFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4005be1ba72ca1e715ec98f7f6eed9dc3de7aefeca\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByBrand\");\nvar getFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4088857bccc12d0836803db6feef417d823dc74756\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getFilteredDrugsByBatch\");\nvar getPatientDetails = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4035cf9f58df620154defdc5399cd8562aa413b026\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getPatientDetails\");\nvar addPatient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4073a980e56fa1d52dab9b3a2d1a905992fe5f4b58\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"addPatient\");\nvar updatePatient = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"6042bb8e1de771e247002f49abeefe7c859e53a236\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updatePatient\");\nvar searchSuppliers = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40d57e4d0d54cc8a563ce06d641f6ab6af61076abd\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchSuppliers\");\nvar addNewItem = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40dd9fdec4a18d61a381ad0facb905e9f3ec9f7844\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"addNewItem\");\nvar getBatchData = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40b9e9786968cbc0a7b9f9db0ff1395736844cf347\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBatchData\");\nvar handleConfirmationOfBatchStatusChange = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"608c76d02aa08c9da8202c5a191c1aea062d2bccf4\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"handleConfirmationOfBatchStatusChange\");\nvar getBrandName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40f8d5d15d5c38e22e630ca513233933a5fea844d3\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBrandName\");\nvar getDrugName = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"402991de2925cb100f6a8aa015996b2a601694a4cc\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugName\");\nvar getBatchNumber = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403eced93f7c11a736a4e79100ce7c5cf739e1622b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getBatchNumber\");\nvar getAvailableDrugsTotalPages = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60ec0816e907232487cbab09be1afb951af9f0c8ac\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getAvailableDrugsTotalPages\");\nvar getStockByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40fb15b3da819b631c4cdb8f6ad05b77d7d1b47ed5\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByModel\");\nvar getStockByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e5e834a1127b52ddd76957eabdb7b1caa378d621\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByBatch\");\nvar getStockByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e543c8bab9c233c537e3d326de8c0d33720f821b\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockByBrand\");\nvar getSupplierWisePricing = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4043386bee14185ba1515e2c1b2c15538548d21e68\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getSupplierWisePricing\");\nvar getStockAnalysis = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4057e760c315e49a0a42205d355f53d65a1f79e890\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getStockAnalysis\");\nvar getTotalPagesForCompletedFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"409e2035dcfce1d852b96914c82eaeba5dac30ec02\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByModel\");\nvar getCompletedFilteredDrugsByModel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"403dca87f38693430d0c6b2afbfd983067927474ed\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByModel\");\nvar getTotalPagesForCompletedFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"407ca96687095006b4f37c0355f80f1a27fdacd21f\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByBrand\");\nvar getCompletedFilteredDrugsByBrand = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"4084c170a160a4e48a345dc0ef61bf204d47fb3d9d\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByBrand\");\nvar getTotalPagesForCompletedFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40e1f707e44c8ce2c88b0e318a2beb7902b926ed12\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getTotalPagesForCompletedFilteredDrugsByBatch\");\nvar getCompletedFilteredDrugsByBatch = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40ccb2d71f4e66c085789e42dcb91a53235cdee869\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getCompletedFilteredDrugsByBatch\");\nvar getIssuedPatients = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"406f0578a0e1dbec9bd5facbb9d871dd0d77661c20\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getIssuedPatients\");\nvar searchDrugBrands = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40849457ba0c5f3894fb9aba122884fb6f4ce8222a\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchDrugBrands\");\nvar searchDrugModels = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"400eeabfcd66daae3e2b9c6ac5ceba9fac81c64707\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"searchDrugModels\");\nvar getDrugConcentrations = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"60d0e018d5c1c11d0ce16a7664ee7781a525766663\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugConcentrations\");\nvar getDrugModelStats = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"40adec56a1189dc545442a06d0e2085be34381a513\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugModelStats\");\nvar getDrugModelsWithBufferLevel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"606d8b1018b54c08942dd4809d9fa99ece58a21d8e\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"getDrugModelsWithBufferLevel\");\nvar updateDrugBufferLevel = /*#__PURE__*/ (0,private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.createServerReference)(\"781190e03b9e9c4cb80194c3b4ce993e7b66be2fc2\", private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.callServer, void 0, private_next_rsc_action_client_wrapper__WEBPACK_IMPORTED_MODULE_0__.findSourceMapURL, \"updateDrugBufferLevel\");\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9hcHAvbGliL2FjdGlvbnMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWlCc0JBLDhCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFXQUMsb0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdCQUMscURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTBCQUMscURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWlEQUMscURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTJCQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdGQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWlGQUMsd0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXVFQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQVFBQywyQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBb0RBQyw4QkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0RBQyxnQ0FBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBeUJBQywyQkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBMElBQyw2QkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBcURBQyxzREFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBZ0NBQyw2QkFBQUEsNkZBQUFBLCtDQUFBQSw4RUFBQUEsVUFBQUEsb0ZBQUFBO0lBYUFDLDRCQUFBQSw2RkFBQUEsK0NBQUFBLDhFQUFBQSxVQUFBQSxvRkFBQUE7SUFhQUMsK0JBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTZDQUMsNENBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdDQUMsZ0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStEQUMsZ0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdEQUMsZ0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQW9GQUMsdUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXVEQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWtHQUMsOERBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsaURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlEQUMsOERBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsaURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXlEQUMsOERBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQStCQUMsaURBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQThGQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQW1DQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQW1CQUMsaUNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQWdDQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTJCQUMsa0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQXdGQUMsNkNBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQTtJQTJHQUMsc0NBQUFBLDZGQUFBQSwrQ0FBQUEsOEVBQUFBLFVBQUFBLG9GQUFBQSIsInNvdXJjZXMiOlsiL1VzZXJzL3B1YnVkdW1hbm9qZWthbmF5YWthL0RvY3VtZW50cy9QYXRpZW50TWFuYWdtZW50L1BNUy9wYXRpZW50LW1hbmFnZW1lbnQtc3lzdGVtL3NyYy9hcHAvbGliL2FjdGlvbnMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc2VydmVyXCI7XG5cbmltcG9ydCB7IHJldmFsaWRhdGVQYXRoIH0gZnJvbSBcIm5leHQvY2FjaGVcIjtcbmltcG9ydCB7XG4gIERhdGVSYW5nZSxcbiAgRHJ1Z0NvbmNlbnRyYXRpb25EYXRhU3VnZ2VzdGlvbixcbiAgSW52ZW50b3J5Rm9ybURhdGEsXG4gIG15RXJyb3IsXG4gIFBhdGllbnRGb3JtRGF0YSxcbiAgU29ydE9wdGlvbixcbiAgU3RvY2tBbmFseXNpcyxcbiAgU3RvY2tEYXRhLFxuICBTdG9ja1F1ZXJ5UGFyYW1zLFxufSBmcm9tIFwiQC9hcHAvbGliL2RlZmluaXRpb25zXCI7XG5pbXBvcnQgeyBwcmlzbWEgfSBmcm9tIFwiLi9wcmlzbWFcIjtcbmltcG9ydCB7IEJhdGNoU3RhdHVzLCBEcnVnVHlwZSB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG90YWxQYWdlcyhxdWVyeSA9IFwiXCIsIGZpbHRlciA9IFwibmFtZVwiKSB7XG4gIGNvbnN0IHdoZXJlQ2xhdXNlID0gcXVlcnlcbiAgICA/IHtcbiAgICAgICAgW2ZpbHRlcl06IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSxcbiAgICAgIH1cbiAgICA6IHt9O1xuXG4gIGNvbnN0IHRvdGFsUGF0aWVudHMgPSBhd2FpdCBwcmlzbWEucGF0aWVudC5jb3VudCh7IHdoZXJlOiB3aGVyZUNsYXVzZSB9KTtcbiAgcmV0dXJuIE1hdGguY2VpbCh0b3RhbFBhdGllbnRzIC8gUEFHRV9TSVpFKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbHRlcmVkUGF0aWVudHMoXG4gIHF1ZXJ5OiBzdHJpbmcgPSBcIlwiLFxuICBwYWdlOiBudW1iZXIgPSAxLFxuICBmaWx0ZXI6IHN0cmluZyA9IFwibmFtZVwiXG4pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb24gPSBxdWVyeVxuICAgID8ge1xuICAgICAgICBbZmlsdGVyXTogeyBjb250YWluczogcXVlcnksIG1vZGU6IFwiaW5zZW5zaXRpdmVcIiB9LFxuICAgICAgfVxuICAgIDoge307XG5cbiAgcmV0dXJuIHByaXNtYS5wYXRpZW50LmZpbmRNYW55KHtcbiAgICB3aGVyZTogd2hlcmVDb25kaXRpb24sXG4gICAgdGFrZTogUEFHRV9TSVpFLFxuICAgIHNraXA6IChwYWdlIC0gMSkgKiBQQUdFX1NJWkUsXG4gICAgb3JkZXJCeTogeyBuYW1lOiBcImFzY1wiIH0sXG4gIH0pO1xufVxuXG5jb25zdCBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX01PREVMID0gOTtcbmNvbnN0IFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQlJBTkQgPSA5O1xuY29uc3QgUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CQVRDSCA9IDY7XG5cbi8vIEZ1bmN0aW9uIHRvIGdldCB0b3RhbCBwYWdlcyBmb3IgZmlsdGVyZWQgZHJ1Z3MgYnkgbW9kZWxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFBhZ2VzRm9yRmlsdGVyZWREcnVnc0J5TW9kZWwoe1xuICBxdWVyeSA9IFwiXCIsXG4gIGJyYW5kSWQgPSAwLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgYnJhbmRJZD86IG51bWJlcjtcbn0pIHtcbiAgY29uc3QgdG90YWxJdGVtcyA9IGF3YWl0IHByaXNtYS5kcnVnLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgIH0sXG4gICAgICBiYXRjaDoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICAgIC4uLihicmFuZElkICE9PSAwID8geyBkcnVnQnJhbmRJZDogYnJhbmRJZCB9IDoge30pLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX01PREVMKTtcbn1cblxuLy8gRnVuY3Rpb24gdG8gZ2V0IHRvdGFsIHBhZ2VzIGZvciBmaWx0ZXJlZCBkcnVncyBieSBicmFuZFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JGaWx0ZXJlZERydWdzQnlCcmFuZCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgbW9kZWxJZCA9IDAsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBtb2RlbElkPzogbnVtYmVyO1xufSkge1xuICBpZiAobW9kZWxJZCAhPT0gMCkge1xuICAgIGNvbnN0IHVuaXF1ZUJyYW5kQ291bnQgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZ3JvdXBCeSh7XG4gICAgICBieTogW1wiZHJ1Z0JyYW5kSWRcIl0sXG4gICAgICB3aGVyZToge1xuICAgICAgICBkcnVnSWQ6IG1vZGVsSWQsXG4gICAgICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICByZXR1cm4gTWF0aC5jZWlsKFxuICAgICAgdW5pcXVlQnJhbmRDb3VudC5sZW5ndGggLyBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JSQU5EXG4gICAgKTtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsSXRlbXMgPSBhd2FpdCBwcmlzbWEuZHJ1Z0JyYW5kLmNvdW50KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgIH0sXG4gICAgICBCYXRjaDoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JSQU5EKTtcbn1cblxuaW50ZXJmYWNlIHdoZXJlQ29uZGl0aW9uIHtcbiAgc3RhdHVzOiBCYXRjaFN0YXR1cztcbiAgbnVtYmVyOiB7XG4gICAgY29udGFpbnM6IHN0cmluZztcbiAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCI7XG4gIH07XG4gIGRydWdJZD86IG51bWJlcjtcbiAgZHJ1Z0JyYW5kSWQ/OiBudW1iZXI7XG59XG5cbi8vIEZ1bmN0aW9uIHRvIGdldCB0b3RhbCBwYWdlcyBmb3IgZmlsdGVyZWQgZHJ1Z3MgYnkgYmF0Y2hcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFBhZ2VzRm9yRmlsdGVyZWREcnVnc0J5QmF0Y2goe1xuICBxdWVyeSA9IFwiXCIsXG4gIG1vZGVsSWQgPSAwLFxuICBicmFuZElkID0gMCxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIG1vZGVsSWQ/OiBudW1iZXI7XG4gIGJyYW5kSWQ/OiBudW1iZXI7XG59KSB7XG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiB3aGVyZUNvbmRpdGlvbiA9IHtcbiAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgbnVtYmVyOiB7XG4gICAgICBjb250YWluczogcXVlcnksXG4gICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCIsXG4gICAgfSxcbiAgfTtcblxuICBpZiAobW9kZWxJZCAhPT0gMCkgd2hlcmVDb25kaXRpb24uZHJ1Z0lkID0gTnVtYmVyKG1vZGVsSWQpO1xuICBpZiAoYnJhbmRJZCAhPT0gMCkgd2hlcmVDb25kaXRpb24uZHJ1Z0JyYW5kSWQgPSBOdW1iZXIoYnJhbmRJZCk7XG5cbiAgY29uc3QgdG90YWxJdGVtcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5jb3VudCh7XG4gICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uLFxuICB9KTtcblxuICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBQQUdFX1NJWkVfQVZBSUxBQkxFX0RSVUdTX0JZX0JBVENIKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbHRlcmVkRHJ1Z3NCeU1vZGVsKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBwYWdlID0gMSxcbiAgc29ydCA9IFwiYWxwaGFiZXRpY2FsbHlcIixcbiAgYnJhbmRJZCA9IDAsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBzb3J0Pzogc3RyaW5nO1xuICBicmFuZElkPzogbnVtYmVyO1xufSkge1xuICBjb25zdCBkcnVncyA9IGF3YWl0IHByaXNtYS5kcnVnLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBjb250YWluczogcXVlcnksXG4gICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgIH0sXG4gICAgICBiYXRjaDoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICAgIC4uLihicmFuZElkICE9PSAwID8geyBkcnVnQnJhbmRJZDogYnJhbmRJZCB9IDoge30pLCAvLyBGaWx0ZXIgYnkgYnJhbmRJZCBpZiBpdCdzIG5vdCAwXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgYmF0Y2g6IHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgICAgLi4uKGJyYW5kSWQgIT09IDAgPyB7IGRydWdCcmFuZElkOiBicmFuZElkIH0gOiB7fSksIC8vIEFwcGx5IGJyYW5kSWQgZmlsdGVyXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIHJlbWFpbmluZ1F1YW50aXR5OiB0cnVlLFxuICAgICAgICAgIGRydWdCcmFuZDoge1xuICAgICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICAvLyBGaWx0ZXIgb3V0IGRydWdzIHdpdGggbm8gYXZhaWxhYmxlIGJhdGNoZXMgYW5kIGFnZ3JlZ2F0ZSByZW1haW5pbmcgcXVhbnRpdHlcbiAgY29uc3QgYWdncmVnYXRlZERydWdzID0gZHJ1Z3NcbiAgICAuZmlsdGVyKChkcnVnKSA9PiBkcnVnLmJhdGNoLmxlbmd0aCA+IDApXG4gICAgLm1hcCgoZHJ1ZykgPT4ge1xuICAgICAgY29uc3QgdW5pcXVlQnJhbmRJZHMgPSBuZXcgU2V0KFxuICAgICAgICBkcnVnLmJhdGNoLm1hcCgoYmF0Y2gpID0+IGJhdGNoLmRydWdCcmFuZC5pZClcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkcnVnLmlkLFxuICAgICAgICBuYW1lOiBkcnVnLm5hbWUsXG4gICAgICAgIHRvdGFsUmVtYWluaW5nUXVhbnRpdHk6IGRydWcuYmF0Y2gucmVkdWNlKFxuICAgICAgICAgIChzdW0sIGJhdGNoKSA9PiBzdW0gKyBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICAgICAgICAwXG4gICAgICAgICksXG4gICAgICAgIGJyYW5kQ291bnQ6IHVuaXF1ZUJyYW5kSWRzLnNpemUsIC8vIENvdW50IHVuaXF1ZSBicmFuZHMgYXNzb2NpYXRlZCB3aXRoIGJhdGNoZXNcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgLy8gU29ydGluZyBsb2dpY1xuICBpZiAoc29ydCA9PT0gXCJsb3dlc3RcIikge1xuICAgIGFnZ3JlZ2F0ZWREcnVncy5zb3J0KFxuICAgICAgKGEsIGIpID0+IGEudG90YWxSZW1haW5pbmdRdWFudGl0eSAtIGIudG90YWxSZW1haW5pbmdRdWFudGl0eVxuICAgICk7XG4gIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJoaWdoZXN0XCIpIHtcbiAgICBhZ2dyZWdhdGVkRHJ1Z3Muc29ydChcbiAgICAgIChhLCBiKSA9PiBiLnRvdGFsUmVtYWluaW5nUXVhbnRpdHkgLSBhLnRvdGFsUmVtYWluaW5nUXVhbnRpdHlcbiAgICApO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiYWxwaGFiZXRpY2FsbHlcIikge1xuICAgIGFnZ3JlZ2F0ZWREcnVncy5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcbiAgfVxuXG4gIHJldHVybiBhZ2dyZWdhdGVkRHJ1Z3Muc2xpY2UoXG4gICAgKHBhZ2UgLSAxKSAqIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfTU9ERUwsXG4gICAgcGFnZSAqIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfTU9ERUxcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEZpbHRlcmVkRHJ1Z3NCeUJyYW5kKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBwYWdlID0gMSxcbiAgc29ydCA9IFwiYWxwaGFiZXRpY2FsbHlcIixcbiAgbW9kZWxJZCA9IDAsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBzb3J0Pzogc3RyaW5nO1xuICBtb2RlbElkPzogbnVtYmVyO1xufSkge1xuICBpZiAobW9kZWxJZCAhPT0gMCkge1xuICAgIC8vIEZldGNoIGFsbCBicmFuZHMgYXNzb2NpYXRlZCB3aXRoIHRoZSBzcGVjaWZpZWQgbW9kZWxcbiAgICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIGRydWdJZDogbW9kZWxJZCxcbiAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHVuaXF1ZUJyYW5kcyA9IG5ldyBNYXAoKTtcblxuICAgIGJhdGNoZXMuZm9yRWFjaCgoYmF0Y2gpID0+IHtcbiAgICAgIHVuaXF1ZUJyYW5kcy5zZXQoYmF0Y2guZHJ1Z0JyYW5kLmlkLCB7XG4gICAgICAgIGlkOiBiYXRjaC5kcnVnQnJhbmQuaWQsXG4gICAgICAgIG5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgICAgICBtb2RlbENvdW50OiAxLCAvLyBTaW5jZSBpdCdzIGEgc3BlY2lmaWMgbW9kZWxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIEFycmF5LmZyb20odW5pcXVlQnJhbmRzLnZhbHVlcygpKTtcbiAgfVxuXG4gIC8vIEZldGNoIGFsbCBkcnVnIGJyYW5kcyB3aXRoIGF2YWlsYWJsZSBiYXRjaGVzXG4gIGNvbnN0IGJyYW5kcyA9IGF3YWl0IHByaXNtYS5kcnVnQnJhbmQuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIGNvbnRhaW5zOiBxdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIEJhdGNoOiB7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgZHJ1ZzogdHJ1ZSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgfSk7XG5cbiAgLy8gQWdncmVnYXRlIGJyYW5kcyB3aXRoIGF2YWlsYWJsZSBtb2RlbHNcbiAgY29uc3QgYWdncmVnYXRlZEJyYW5kcyA9IGJyYW5kc1xuICAgIC5tYXAoKGJyYW5kKSA9PiAoe1xuICAgICAgaWQ6IGJyYW5kLmlkLFxuICAgICAgbmFtZTogYnJhbmQubmFtZSxcbiAgICAgIG1vZGVsQ291bnQ6IG5ldyBTZXQoYnJhbmQuQmF0Y2gubWFwKChiYXRjaCkgPT4gYmF0Y2guZHJ1Zy5pZCkpLnNpemUsIC8vIENvdW50IHVuaXF1ZSBkcnVnIG1vZGVsc1xuICAgIH0pKVxuICAgIC5maWx0ZXIoKGJyYW5kKSA9PiBicmFuZC5tb2RlbENvdW50ID4gMCk7XG5cbiAgLy8gU29ydGluZyBsb2dpY1xuICBpZiAoc29ydCA9PT0gXCJsb3dlc3RcIikge1xuICAgIGFnZ3JlZ2F0ZWRCcmFuZHMuc29ydCgoYSwgYikgPT4gYS5tb2RlbENvdW50IC0gYi5tb2RlbENvdW50KTtcbiAgfSBlbHNlIGlmIChzb3J0ID09PSBcImhpZ2hlc3RcIikge1xuICAgIGFnZ3JlZ2F0ZWRCcmFuZHMuc29ydCgoYSwgYikgPT4gYi5tb2RlbENvdW50IC0gYS5tb2RlbENvdW50KTtcbiAgfSBlbHNlIGlmIChzb3J0ID09PSBcImFscGhhYmV0aWNhbGx5XCIpIHtcbiAgICBhZ2dyZWdhdGVkQnJhbmRzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xuICB9XG5cbiAgLy8gUGFnaW5hdGlvblxuICByZXR1cm4gYWdncmVnYXRlZEJyYW5kcy5zbGljZShcbiAgICAocGFnZSAtIDEpICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CUkFORCxcbiAgICBwYWdlICogUEFHRV9TSVpFX0FWQUlMQUJMRV9EUlVHU19CWV9CUkFORFxuICApO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RmlsdGVyZWREcnVnc0J5QmF0Y2goe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJleHBpcnlEYXRlXCIsXG4gIG1vZGVsSWQgPSAwLFxuICBicmFuZElkID0gMCxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHBhZ2U/OiBudW1iZXI7XG4gIHNvcnQ/OiBzdHJpbmc7XG4gIG1vZGVsSWQ/OiBudW1iZXI7XG4gIGJyYW5kSWQ/OiBudW1iZXI7XG59KSB7XG4gIC8vIEJhc2Ugd2hlcmUgY29uZGl0aW9uXG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiB3aGVyZUNvbmRpdGlvbiA9IHtcbiAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgbnVtYmVyOiB7XG4gICAgICBjb250YWluczogcXVlcnksIC8vIFNlYXJjaCBieSBiYXRjaCBudW1iZXJcbiAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICB9LFxuICB9O1xuXG4gIC8vIEFwcGx5IG1vZGVsSWQgYW5kIGJyYW5kSWQgZmlsdGVycyBpZiBwcm92aWRlZFxuICBpZiAobW9kZWxJZCAhPT0gMCkgd2hlcmVDb25kaXRpb24uZHJ1Z0lkID0gTnVtYmVyKG1vZGVsSWQpO1xuICBpZiAoYnJhbmRJZCAhPT0gMCkgd2hlcmVDb25kaXRpb24uZHJ1Z0JyYW5kSWQgPSBOdW1iZXIoYnJhbmRJZCk7XG5cbiAgY29uc3QgYmF0Y2hlcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHdoZXJlQ29uZGl0aW9uLFxuICAgIGluY2x1ZGU6IHtcbiAgICAgIGRydWc6IHRydWUsXG4gICAgICBkcnVnQnJhbmQ6IHRydWUsXG4gICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBmb3JtYXR0ZWRCYXRjaGVzID0gYmF0Y2hlcy5tYXAoKGJhdGNoKSA9PiAoe1xuICAgIGlkOiBiYXRjaC5pZCxcbiAgICBiYXRjaE51bWJlcjogYmF0Y2gubnVtYmVyLFxuICAgIGJyYW5kTmFtZTogYmF0Y2guZHJ1Z0JyYW5kLm5hbWUsXG4gICAgbW9kZWxOYW1lOiBiYXRjaC5kcnVnLm5hbWUsXG4gICAgZXhwaXJ5RGF0ZTogYmF0Y2guZXhwaXJ5LnRvSVNPU3RyaW5nKCksXG4gICAgc3RvY2tEYXRlOiBiYXRjaC5zdG9ja0RhdGUudG9JU09TdHJpbmcoKSxcbiAgICByZW1haW5pbmdBbW91bnQ6IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgIGZ1bGxBbW91bnQ6IGJhdGNoLmZ1bGxBbW91bnQsXG4gICAgc3RhdHVzOiBiYXRjaC5zdGF0dXMsXG4gICAgdW5pdENvbmNlbnRyYXRpb246IGJhdGNoLnVuaXRDb25jZW50cmF0aW9uLmNvbmNlbnRyYXRpb24sXG4gICAgdHlwZTogYmF0Y2gudHlwZSxcbiAgfSkpO1xuXG4gIC8vIFNvcnRpbmcgbG9naWNcbiAgaWYgKHNvcnQgPT09IFwiZXhwaXJ5RGF0ZVwiKSB7XG4gICAgZm9ybWF0dGVkQmF0Y2hlcy5zb3J0KFxuICAgICAgKGEsIGIpID0+XG4gICAgICAgIG5ldyBEYXRlKGEuZXhwaXJ5RGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5leHBpcnlEYXRlKS5nZXRUaW1lKClcbiAgICApO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwibmV3bHlBZGRlZFwiKSB7XG4gICAgZm9ybWF0dGVkQmF0Y2hlcy5zb3J0KFxuICAgICAgKGEsIGIpID0+XG4gICAgICAgIG5ldyBEYXRlKGIuc3RvY2tEYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnN0b2NrRGF0ZSkuZ2V0VGltZSgpXG4gICAgKTtcbiAgfSBlbHNlIGlmIChzb3J0ID09PSBcImFscGhhYmV0aWNhbGx5XCIpIHtcbiAgICBmb3JtYXR0ZWRCYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEubW9kZWxOYW1lLmxvY2FsZUNvbXBhcmUoYi5tb2RlbE5hbWUpKTtcbiAgfVxuXG4gIC8vIFBhZ2luYXRpb24gbG9naWNcbiAgcmV0dXJuIGZvcm1hdHRlZEJhdGNoZXMuc2xpY2UoXG4gICAgKHBhZ2UgLSAxKSAqIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQkFUQ0gsXG4gICAgcGFnZSAqIFBBR0VfU0laRV9BVkFJTEFCTEVfRFJVR1NfQllfQkFUQ0hcbiAgKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFBhdGllbnREZXRhaWxzKGlkOiBudW1iZXIpIHtcbiAgcmV0dXJuIHByaXNtYS5wYXRpZW50LmZpbmRVbmlxdWUoe1xuICAgIHdoZXJlOiB7XG4gICAgICBpZCxcbiAgICB9LFxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFkZFBhdGllbnQoe1xuICBmb3JtRGF0YSxcbn06IHtcbiAgZm9ybURhdGE6IFBhdGllbnRGb3JtRGF0YTtcbn0pOiBQcm9taXNlPG15RXJyb3I+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmbG9hdEhlaWdodCA9IHBhcnNlRmxvYXQoZm9ybURhdGEuaGVpZ2h0KTtcblxuICAgIGNvbnN0IGZsb2F0V2VpZ2h0ID0gcGFyc2VGbG9hdChmb3JtRGF0YS53ZWlnaHQpO1xuXG4gICAgaWYgKGZvcm1EYXRhLmdlbmRlciA9PT0gXCJcIikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiU2VsZWN0IGEgdmFsaWQgR2VuZGVyXCIgfTtcbiAgICB9XG5cbiAgICBpZiAoIWZvcm1EYXRhLm5hbWUgfHwgIWZvcm1EYXRhLnRlbGVwaG9uZSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiUGxlYXNlIGZpbGwgYWxsIGZpZWxkc1wiIH07XG4gICAgfVxuXG4gICAgaWYgKGZvcm1EYXRhLnRlbGVwaG9uZS5sZW5ndGggIT09IDEwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIHRlbGVwaG9uZSBudW1iZXJcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmb3JtRGF0YS5iaXJ0aERhdGUpO1xuXG4gICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBiaXJ0aCBkYXRlXCIgfTtcbiAgICB9XG5cbiAgICBhd2FpdCBwcmlzbWEucGF0aWVudC5jcmVhdGUoe1xuICAgICAgZGF0YToge1xuICAgICAgICBuYW1lOiBmb3JtRGF0YS5uYW1lLFxuICAgICAgICBOSUM6IGZvcm1EYXRhLk5JQyxcbiAgICAgICAgdGVsZXBob25lOiBmb3JtRGF0YS50ZWxlcGhvbmUsXG4gICAgICAgIGJpcnRoRGF0ZTogZGF0ZSxcbiAgICAgICAgYWRkcmVzczogZm9ybURhdGEuYWRkcmVzcyxcbiAgICAgICAgaGVpZ2h0OiBmbG9hdEhlaWdodCxcbiAgICAgICAgd2VpZ2h0OiBmbG9hdFdlaWdodCxcbiAgICAgICAgZ2VuZGVyOiBmb3JtRGF0YS5nZW5kZXIsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV2YWxpZGF0ZVBhdGgoXCIvcGF0aWVudHNcIik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSwgbWVzc2FnZTogXCJQYXRpZW50IGFkZGVkIHN1Y2Nlc3NmdWxseVwiIH07XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgYWRkaW5nIHBhdGllbnRcIixcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB1cGRhdGVQYXRpZW50KFxuICBmb3JtRGF0YTogUGF0aWVudEZvcm1EYXRhLFxuICBpZDogbnVtYmVyXG4pOiBQcm9taXNlPG15RXJyb3I+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBmbG9hdEhlaWdodCA9IHBhcnNlRmxvYXQoZm9ybURhdGEuaGVpZ2h0KTtcbiAgICBjb25zdCBmbG9hdFdlaWdodCA9IHBhcnNlRmxvYXQoZm9ybURhdGEud2VpZ2h0KTtcblxuICAgIGlmIChmb3JtRGF0YS5nZW5kZXIgPT09IFwiXCIpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlNlbGVjdCBhIHZhbGlkIEdlbmRlclwiIH07XG4gICAgfVxuXG4gICAgaWYgKCFmb3JtRGF0YS5uYW1lIHx8ICFmb3JtRGF0YS50ZWxlcGhvbmUpIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlBsZWFzZSBmaWxsIGFsbCBmaWVsZHNcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShmb3JtRGF0YS5iaXJ0aERhdGUpO1xuXG4gICAgaWYgKGlzTmFOKGRhdGUuZ2V0VGltZSgpKSkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIG1lc3NhZ2U6IFwiSW52YWxpZCBiaXJ0aCBkYXRlXCIgfTtcbiAgICB9XG5cbiAgICBhd2FpdCBwcmlzbWEucGF0aWVudC51cGRhdGUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgbmFtZTogZm9ybURhdGEubmFtZSxcbiAgICAgICAgTklDOiBmb3JtRGF0YS5OSUMsXG4gICAgICAgIHRlbGVwaG9uZTogZm9ybURhdGEudGVsZXBob25lLFxuICAgICAgICBiaXJ0aERhdGU6IGRhdGUsXG4gICAgICAgIGFkZHJlc3M6IGZvcm1EYXRhLmFkZHJlc3MsXG4gICAgICAgIGhlaWdodDogZmxvYXRIZWlnaHQsXG4gICAgICAgIHdlaWdodDogZmxvYXRXZWlnaHQsXG4gICAgICAgIGdlbmRlcjogZm9ybURhdGEuZ2VuZGVyLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIHJldmFsaWRhdGVQYXRoKGAvcGF0aWVudHMvJHtpZH1gKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIlBhdGllbnQgdXBkYXRlZCBzdWNjZXNzZnVsbHlcIiB9O1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS5lcnJvcihlKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiBcIkFuIGVycm9yIG9jY3VycmVkIHdoaWxlIHVwZGF0aW5nIHBhdGllbnRcIixcbiAgICB9O1xuICB9XG59XG5cbi8vc3VnZ2VzdCBzdXBwbGllciBpbmZvcm1hdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFN1cHBsaWVycyhxdWVyeTogc3RyaW5nKSB7XG4gIFwidXNlIHNlcnZlclwiO1xuXG4gIHRyeSB7XG4gICAgcmV0dXJuIGF3YWl0IHByaXNtYS5zdXBwbGllci5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgY29udGFpbnM6IHF1ZXJ5LFxuICAgICAgICAgIG1vZGU6IFwiaW5zZW5zaXRpdmVcIixcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIG5hbWU6IHRydWUsXG4gICAgICAgIGNvbnRhY3Q6IHRydWUsXG4gICAgICB9LFxuICAgICAgdGFrZTogNSwgLy8gTGltaXQgcmVzdWx0c1xuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBzZWFyY2hpbmcgc3VwcGxpZXJzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vRm9yIGFkZGluZyBkcnVncyB0byB0aGUgaW52ZW50b3J5XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYWRkTmV3SXRlbSh7XG4gIGZvcm1EYXRhLFxufToge1xuICBmb3JtRGF0YTogSW52ZW50b3J5Rm9ybURhdGE7XG59KTogUHJvbWlzZTxteUVycm9yPiB7XG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgYWxsIHRoZSByZXF1aXJlZCBmaWVsZHNcbiAgICBpZiAoXG4gICAgICAhZm9ybURhdGEuY29uY2VudHJhdGlvbklkIHx8XG4gICAgICAhZm9ybURhdGEuY29uY2VudHJhdGlvbiB8fFxuICAgICAgIWZvcm1EYXRhLmJhdGNoTnVtYmVyIHx8XG4gICAgICAhZm9ybURhdGEuZHJ1Z1R5cGUgfHxcbiAgICAgICFmb3JtRGF0YS5xdWFudGl0eSB8fFxuICAgICAgIWZvcm1EYXRhLmV4cGlyeSB8fFxuICAgICAgIWZvcm1EYXRhLnJldGFpbFByaWNlIHx8XG4gICAgICAhZm9ybURhdGEud2hvbGVzYWxlUHJpY2UgfHxcbiAgICAgICFmb3JtRGF0YS5zdXBwbGllck5hbWUgfHxcbiAgICAgICFmb3JtRGF0YS5CdWZmZXIgfHxcbiAgICAgICFmb3JtRGF0YS5zdXBwbGllckNvbnRhY3RcbiAgICApIHtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlBsZWFzZSBmaWxsIGFsbCBmaWVsZHNcIiB9O1xuICAgIH1cblxuICAgIHJldHVybiBhd2FpdCBwcmlzbWEuJHRyYW5zYWN0aW9uKGFzeW5jICh0eCkgPT4ge1xuICAgICAgLy8gMS4gQ3JlYXRlIG9yIGNvbm5lY3QgZHJ1ZyBicmFuZFxuICAgICAgY29uc3QgYnJhbmQgPSBhd2FpdCB0eC5kcnVnQnJhbmQudXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHsgaWQ6IGZvcm1EYXRhLmJyYW5kSWQgPz8gMCB9LFxuICAgICAgICB1cGRhdGU6IHt9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBuYW1lOiBmb3JtRGF0YS5icmFuZE5hbWUsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGZvcm1EYXRhLmJyYW5kRGVzY3JpcHRpb24gfHwgbnVsbCxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyAyLiBDcmVhdGUgb3IgY29ubmVjdCBkcnVnXG4gICAgICBjb25zdCBkcnVnID0gYXdhaXQgdHguZHJ1Zy51cHNlcnQoe1xuICAgICAgICB3aGVyZTogeyBpZDogZm9ybURhdGEuZHJ1Z0lkID8/IDAgfSxcbiAgICAgICAgdXBkYXRlOiB7fSxcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgbmFtZTogZm9ybURhdGEuZHJ1Z05hbWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gMy4gQ3JlYXRlIG9yIGNvbm5lY3Qgc3VwcGxpZXJcbiAgICAgIGNvbnN0IHN1cHBsaWVyID0gYXdhaXQgdHguc3VwcGxpZXIudXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IGZvcm1EYXRhLnN1cHBsaWVySWRcbiAgICAgICAgICA/IHsgaWQ6IGZvcm1EYXRhLnN1cHBsaWVySWQgfVxuICAgICAgICAgIDogeyBuYW1lOiBmb3JtRGF0YS5zdXBwbGllck5hbWUgfSxcbiAgICAgICAgdXBkYXRlOiB7XG4gICAgICAgICAgY29udGFjdDogZm9ybURhdGEuc3VwcGxpZXJDb250YWN0LCAvLyBVcGRhdGUgY29udGFjdCBpbmZvIGluIGNhc2UgaXQgY2hhbmdlZFxuICAgICAgICB9LFxuICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICBuYW1lOiBmb3JtRGF0YS5zdXBwbGllck5hbWUsXG4gICAgICAgICAgY29udGFjdDogZm9ybURhdGEuc3VwcGxpZXJDb250YWN0IHx8IFwiTi9BXCIsXG4gICAgICAgIH0sXG4gICAgICB9KTtcblxuICAgICAgLy8gNC4gQ3JlYXRlIGJhdGNoIHdpdGggYm90aCBkcnVnIGFuZCBicmFuZCByZWxhdGlvbnNoaXBzXG4gICAgICBpZiAoXG4gICAgICAgIGZvcm1EYXRhLmNvbmNlbnRyYXRpb25JZCA9PT0gdW5kZWZpbmVkIHx8XG4gICAgICAgIGZvcm1EYXRhLmNvbmNlbnRyYXRpb24gPT09IHVuZGVmaW5lZFxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIlBsZWFzZSBzZWxlY3QgYSBjb25jZW50cmF0aW9uXCIgfTtcbiAgICAgIH1cblxuICAgICAgbGV0IG5ld0NvbmNlbnRyYXRpb25JZDogbnVtYmVyO1xuXG4gICAgICBpZiAoZm9ybURhdGEuY29uY2VudHJhdGlvbklkID09PSAtMSkge1xuICAgICAgICBjb25zdCBuZXdDb25jZW50cmF0aW9uID0gYXdhaXQgdHgudW5pdENvbmNlbnRyYXRpb24udXBzZXJ0KHtcbiAgICAgICAgICB3aGVyZTogeyBjb25jZW50cmF0aW9uOiBmb3JtRGF0YS5jb25jZW50cmF0aW9uIH0sXG4gICAgICAgICAgdXBkYXRlOiB7fSxcbiAgICAgICAgICBjcmVhdGU6IHtcbiAgICAgICAgICAgIGNvbmNlbnRyYXRpb246IGZvcm1EYXRhLmNvbmNlbnRyYXRpb24sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIG5ld0NvbmNlbnRyYXRpb25JZCA9IG5ld0NvbmNlbnRyYXRpb24uaWQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBuZXdDb25jZW50cmF0aW9uSWQgPSBmb3JtRGF0YS5jb25jZW50cmF0aW9uSWQ7XG4gICAgICB9XG5cbiAgICAgIGF3YWl0IHR4LmJhdGNoLmNyZWF0ZSh7XG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBudW1iZXI6IGZvcm1EYXRhLmJhdGNoTnVtYmVyLFxuICAgICAgICAgIGRydWc6IHtcbiAgICAgICAgICAgIGNvbm5lY3Q6IHsgaWQ6IGRydWcuaWQgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRydWdCcmFuZDoge1xuICAgICAgICAgICAgY29ubmVjdDogeyBpZDogYnJhbmQuaWQgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6IGZvcm1EYXRhLmRydWdUeXBlIGFzIERydWdUeXBlLFxuICAgICAgICAgIGZ1bGxBbW91bnQ6IHBhcnNlRmxvYXQoZm9ybURhdGEucXVhbnRpdHkudG9TdHJpbmcoKSksXG4gICAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IHBhcnNlRmxvYXQoZm9ybURhdGEucXVhbnRpdHkudG9TdHJpbmcoKSksXG4gICAgICAgICAgZXhwaXJ5OiBuZXcgRGF0ZShmb3JtRGF0YS5leHBpcnkpLFxuICAgICAgICAgIHJldGFpbFByaWNlOiBwYXJzZUZsb2F0KGZvcm1EYXRhLnJldGFpbFByaWNlLnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHdob2xlc2FsZVByaWNlOiBwYXJzZUZsb2F0KGZvcm1EYXRhLndob2xlc2FsZVByaWNlLnRvU3RyaW5nKCkpLFxuICAgICAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB7XG4gICAgICAgICAgICBjb25uZWN0OiB7IGlkOiBuZXdDb25jZW50cmF0aW9uSWQgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIFN1cHBsaWVyOiB7XG4gICAgICAgICAgICBjb25uZWN0OiB7IGlkOiBzdXBwbGllci5pZCB9LCAvLyBDb25uZWN0IHRoZSBiYXRjaCB0byB0aGUgc3VwcGxpZXJcbiAgICAgICAgICB9LFxuICAgICAgICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyA2LiBDcmVhdGUgb3IgdXBkYXRlIEJ1ZmZlckxldmVsIGZvciB0aGUgZHJ1Z1xuICAgICAgYXdhaXQgdHguYnVmZmVyTGV2ZWwudXBzZXJ0KHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBkcnVnSWRfdHlwZV91bml0Q29uY2VudHJhdGlvbklkOiB7XG4gICAgICAgICAgICBkcnVnSWQ6IGRydWcuaWQsXG4gICAgICAgICAgICB0eXBlOiBmb3JtRGF0YS5kcnVnVHlwZSBhcyBEcnVnVHlwZSxcbiAgICAgICAgICAgIHVuaXRDb25jZW50cmF0aW9uSWQ6IG5ld0NvbmNlbnRyYXRpb25JZCxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1cGRhdGU6IHtcbiAgICAgICAgICBidWZmZXJBbW91bnQ6IGZvcm1EYXRhLkJ1ZmZlciwgLy8gVXBkYXRlIGJ1ZmZlciBhbW91bnQgaWYgaXQgYWxyZWFkeSBleGlzdHNcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlOiB7XG4gICAgICAgICAgZHJ1Z0lkOiBkcnVnLmlkLFxuICAgICAgICAgIHR5cGU6IGZvcm1EYXRhLmRydWdUeXBlIGFzIERydWdUeXBlLFxuICAgICAgICAgIHVuaXRDb25jZW50cmF0aW9uSWQ6IG5ld0NvbmNlbnRyYXRpb25JZCxcbiAgICAgICAgICBidWZmZXJBbW91bnQ6IGZvcm1EYXRhLkJ1ZmZlciwgLy8gQ3JlYXRlIG5ldyBidWZmZXIgbGV2ZWxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuXG4gICAgICByZXZhbGlkYXRlUGF0aChcIi9pbnZlbnRvcnkvYXZhaWxhYmxlLXN0b2Nrc1wiKTtcbiAgICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUsIG1lc3NhZ2U6IFwiSXRlbSBhZGRlZCBzdWNjZXNzZnVsbHlcIiB9O1xuICAgIH0pO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihlLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmVycm9yKGUpO1xuICAgIH1cbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJGYWlsZWQgdG8gYWRkIGl0ZW1cIiB9O1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRCYXRjaERhdGEoYmF0Y2hJZDogbnVtYmVyKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYmF0Y2hEYXRhID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgaWQ6IGJhdGNoSWQsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICBkcnVnOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGRydWdCcmFuZDoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBTdXBwbGllcjoge1xuICAgICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgICAgbmFtZTogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIWJhdGNoRGF0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQmF0Y2ggbm90IGZvdW5kXCIpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBudW1iZXI6IGJhdGNoRGF0YS5udW1iZXIsXG4gICAgICBkcnVnTmFtZTogYmF0Y2hEYXRhLmRydWcubmFtZSxcbiAgICAgIGRydWdCcmFuZE5hbWU6IGJhdGNoRGF0YS5kcnVnQnJhbmQubmFtZSxcbiAgICAgIGRydWdUeXBlOiBiYXRjaERhdGEudHlwZSxcbiAgICAgIGZ1bGxBbW91bnQ6IGJhdGNoRGF0YS5mdWxsQW1vdW50LFxuICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IGJhdGNoRGF0YS5yZW1haW5pbmdRdWFudGl0eSxcbiAgICAgIGV4cGlyeURhdGU6IGJhdGNoRGF0YS5leHBpcnkudG9JU09TdHJpbmcoKS5zcGxpdChcIlRcIilbMF0sIC8vIEZvcm1hdCB0byAnWVlZWS1NTS1ERCdcbiAgICAgIHN0b2NrRGF0ZTogYmF0Y2hEYXRhLnN0b2NrRGF0ZS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSwgLy8gRm9ybWF0IHRvICdZWVlZLU1NLUREJ1xuICAgICAgcmV0YWlsUHJpY2U6IGJhdGNoRGF0YS5yZXRhaWxQcmljZSxcbiAgICAgIHdob2xlc2FsZVByaWNlOiBiYXRjaERhdGEud2hvbGVzYWxlUHJpY2UsXG4gICAgICBzdXBwbGllcjogYmF0Y2hEYXRhLlN1cHBsaWVyLm5hbWUsXG4gICAgICBzdGF0dXM6IGJhdGNoRGF0YS5zdGF0dXMsXG4gICAgICB1bml0Q29uY2V0cmF0aW9uOiBiYXRjaERhdGEudW5pdENvbmNlbnRyYXRpb24uY29uY2VudHJhdGlvbixcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9IGZpbmFsbHkge1xuICAgIGF3YWl0IHByaXNtYS4kZGlzY29ubmVjdCgpO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBoYW5kbGVDb25maXJtYXRpb25PZkJhdGNoU3RhdHVzQ2hhbmdlKFxuICBiYXRjaElkOiBudW1iZXIsXG4gIGFjdGlvbjogXCJjb21wbGV0ZWRcIiB8IFwiZGlzcG9zZWRcIiB8IFwicXVhbGl0eV9mYWlsZWRcIiB8IFwiYXZhaWxhYmxlXCJcbik6IFByb21pc2U8bXlFcnJvcj4ge1xuICBpZiAoIWJhdGNoSWQpIHJldHVybiB7IHN1Y2Nlc3M6IGZhbHNlLCBtZXNzYWdlOiBcIkJhdGNoIElEIG5vdCBwcm92aWRlZFwiIH07XG5cbiAgY29uc3QgbmV3U3RhdHVzID1cbiAgICBhY3Rpb24gPT09IFwiY29tcGxldGVkXCJcbiAgICAgID8gXCJDT01QTEVURURcIlxuICAgICAgOiBhY3Rpb24gPT09IFwiZGlzcG9zZWRcIlxuICAgICAgPyBcIkRJU1BPU0VEXCJcbiAgICAgIDogYWN0aW9uID09PSBcInF1YWxpdHlfZmFpbGVkXCJcbiAgICAgID8gXCJRVUFMSVRZX0ZBSUxFRFwiXG4gICAgICA6IFwiQVZBSUxBQkxFXCI7XG4gIHRyeSB7XG4gICAgYXdhaXQgcHJpc21hLmJhdGNoLnVwZGF0ZSh7XG4gICAgICB3aGVyZTogeyBpZDogYmF0Y2hJZCB9LFxuICAgICAgZGF0YTogeyBzdGF0dXM6IG5ld1N0YXR1cyB9LFxuICAgIH0pO1xuXG4gICAgcmV2YWxpZGF0ZVBhdGgoYC9pbnZlbnRvcnkvYWxsLWRydWdzL2JhdGNoLyR7YmF0Y2hJZH1gKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCBtZXNzYWdlOiBcIkJhdGNoIHN0YXR1cyB1cGRhdGVkIHN1Y2Nlc3NmdWxseVwiIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHVwZGF0aW5nIGJhdGNoIHN0YXR1czpcIiwgZXJyb3IpO1xuICAgIHJldHVybiB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IFwiQW4gZXJyb3Igb2NjdXJyZWQgd2hpbGUgdXBkYXRpbmcgYmF0Y2ggc3RhdHVzXCIsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBGZXRjaCBmdW5jdGlvbnMgZm9yIGJyYW5kLCBkcnVnLCBhbmQgYmF0Y2ggZGF0YVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJyYW5kTmFtZShpZDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBicmFuZCA9IGF3YWl0IHByaXNtYS5kcnVnQnJhbmQuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gYnJhbmQ/Lm5hbWUgfHwgYEJyYW5kLSR7aWR9YDtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgYnJhbmQgbmFtZTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBgQnJhbmQtJHtpZH1gO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREcnVnTmFtZShpZDogbnVtYmVyKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBkcnVnID0gYXdhaXQgcHJpc21hLmRydWcuZmluZFVuaXF1ZSh7XG4gICAgICB3aGVyZTogeyBpZCB9LFxuICAgICAgc2VsZWN0OiB7IG5hbWU6IHRydWUgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gZHJ1Zz8ubmFtZSB8fCBgRHJ1Zy0ke2lkfWA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIGRydWcgbmFtZTpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBgRHJ1Zy0ke2lkfWA7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEJhdGNoTnVtYmVyKGlkOiBudW1iZXIpOiBQcm9taXNlPHN0cmluZz4ge1xuICB0cnkge1xuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRVbmlxdWUoe1xuICAgICAgd2hlcmU6IHsgaWQgfSxcbiAgICAgIHNlbGVjdDogeyBudW1iZXI6IHRydWUgfSxcbiAgICB9KTtcbiAgICByZXR1cm4gYmF0Y2g/Lm51bWJlciB8fCBgQmF0Y2gtJHtpZH1gO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBiYXRjaCBudW1iZXI6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gYEJhdGNoLSR7aWR9YDtcbiAgfVxufVxuXG5jb25zdCBQQUdFX1NJWkUgPSAxMDtcblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGFwcGx5IHNvcnRpbmdcbmZ1bmN0aW9uIGFwcGx5U29ydGluZyhcbiAgZGF0YTogU3RvY2tEYXRhW10sXG4gIHNvcnQ6IFNvcnRPcHRpb24gPSBcImFscGhhYmV0aWNhbGx5XCJcbik6IFN0b2NrRGF0YVtdIHtcbiAgc3dpdGNoIChzb3J0KSB7XG4gICAgY2FzZSBcImFscGhhYmV0aWNhbGx5XCI6XG4gICAgICByZXR1cm4gZGF0YS5zb3J0KChhLCBiKSA9PiBhLm5hbWUubG9jYWxlQ29tcGFyZShiLm5hbWUpKTtcbiAgICBjYXNlIFwiaGlnaGVzdFwiOlxuICAgICAgcmV0dXJuIGRhdGEuc29ydCgoYSwgYikgPT4gYi50b3RhbFByaWNlIC0gYS50b3RhbFByaWNlKTtcbiAgICBjYXNlIFwibG93ZXN0XCI6XG4gICAgICByZXR1cm4gZGF0YS5zb3J0KChhLCBiKSA9PiBhLnRvdGFsUHJpY2UgLSBiLnRvdGFsUHJpY2UpO1xuICAgIGNhc2UgXCJ1bml0LWhpZ2hlc3RcIjpcbiAgICAgIHJldHVybiBkYXRhLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgICAgY29uc3QgYVVuaXQgPSBhLnJldGFpbFByaWNlIHx8IDA7XG4gICAgICAgIGNvbnN0IGJVbml0ID0gYi5yZXRhaWxQcmljZSB8fCAwO1xuICAgICAgICByZXR1cm4gYlVuaXQgLSBhVW5pdDtcbiAgICAgIH0pO1xuICAgIGNhc2UgXCJ1bml0LWxvd2VzdFwiOlxuICAgICAgcmV0dXJuIGRhdGEuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICBjb25zdCBhVW5pdCA9IGEucmV0YWlsUHJpY2UgfHwgMDtcbiAgICAgICAgY29uc3QgYlVuaXQgPSBiLnJldGFpbFByaWNlIHx8IDA7XG4gICAgICAgIHJldHVybiBhVW5pdCAtIGJVbml0O1xuICAgICAgfSk7XG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBkYXRhO1xuICB9XG59XG5cbi8vIEdldCB0b3RhbCBwYWdlcyBmb3IgcGFnaW5hdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEF2YWlsYWJsZURydWdzVG90YWxQYWdlcyhcbiAgcXVlcnk6IHN0cmluZyxcbiAgc2VsZWN0aW9uOiBzdHJpbmdcbik6IFByb21pc2U8bnVtYmVyPiB7XG4gIGxldCBjb3VudCA9IDA7XG5cbiAgc3dpdGNoIChzZWxlY3Rpb24pIHtcbiAgICBjYXNlIFwiYnJhbmRcIjpcbiAgICAgIGNvdW50ID0gYXdhaXQgcHJpc21hLmRydWdCcmFuZC5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgbmFtZTogeyBjb250YWluczogcXVlcnkgfSxcbiAgICAgICAgICBCYXRjaDogeyBzb21lOiB7IHN0YXR1czogXCJBVkFJTEFCTEVcIiB9IH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJtb2RlbFwiOlxuICAgICAgY291bnQgPSBhd2FpdCBwcmlzbWEuZHJ1Zy5jb3VudCh7XG4gICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgbmFtZTogeyBjb250YWluczogcXVlcnkgfSxcbiAgICAgICAgICBiYXRjaDogeyBzb21lOiB7IHN0YXR1czogXCJBVkFJTEFCTEVcIiB9IH0sXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJiYXRjaFwiOlxuICAgICAgY291bnQgPSBhd2FpdCBwcmlzbWEuYmF0Y2guY291bnQoe1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIE9SOiBbXG4gICAgICAgICAgICB7IGRydWc6IHsgbmFtZTogeyBjb250YWluczogcXVlcnkgfSB9IH0sXG4gICAgICAgICAgICB7IGRydWdCcmFuZDogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSB9IH0gfSxcbiAgICAgICAgICBdLFxuICAgICAgICAgIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgYnJlYWs7XG4gIH1cblxuICByZXR1cm4gTWF0aC5jZWlsKGNvdW50IC8gUEFHRV9TSVpFKTtcbn1cblxuLy8gRmV0Y2ggc3RvY2sgZ3JvdXBlZCBieSBtb2RlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b2NrQnlNb2RlbCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgcGFnZSA9IDEsXG4gIHNvcnQgPSBcImFscGhhYmV0aWNhbGx5XCIsXG4gIHN0YXJ0RGF0ZSxcbiAgZW5kRGF0ZSxcbn06IFN0b2NrUXVlcnlQYXJhbXMpOiBQcm9taXNlPFN0b2NrRGF0YVtdPiB7XG4gIGNvbnN0IGRydWdzID0gYXdhaXQgcHJpc21hLmRydWcuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0sXG4gICAgICBiYXRjaDoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgLy8gc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgICAgIC4uLihzdGFydERhdGUgJiYgZW5kRGF0ZVxuICAgICAgICAgICAgPyB7XG4gICAgICAgICAgICAgICAgc3RvY2tEYXRlOiB7XG4gICAgICAgICAgICAgICAgICBndGU6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICAgIGx0ZTogZW5kRGF0ZSxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICA6IHt9KSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgfSxcbiAgICBpbmNsdWRlOiB7XG4gICAgICBiYXRjaDoge1xuICAgICAgICB3aGVyZToge1xuICAgICAgICAgIC8vIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgICAgICAuLi4oc3RhcnREYXRlICYmIGVuZERhdGVcbiAgICAgICAgICAgID8ge1xuICAgICAgICAgICAgICAgIHN0b2NrRGF0ZToge1xuICAgICAgICAgICAgICAgICAgZ3RlOiBzdGFydERhdGUsXG4gICAgICAgICAgICAgICAgICBsdGU6IGVuZERhdGUsXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgOiB7fSksXG4gICAgICAgIH0sXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIHdob2xlc2FsZVByaWNlOiB0cnVlLFxuICAgICAgICAgIHJldGFpbFByaWNlOiB0cnVlLFxuICAgICAgICAgIHJlbWFpbmluZ1F1YW50aXR5OiB0cnVlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9LFxuICB9KTtcblxuICBjb25zdCBzdG9ja0RhdGE6IFN0b2NrRGF0YVtdID0gZHJ1Z3MubWFwKChkcnVnKSA9PiAoe1xuICAgIGlkOiBkcnVnLmlkLFxuICAgIG5hbWU6IGRydWcubmFtZSxcbiAgICB0b3RhbFByaWNlOiBkcnVnLmJhdGNoLnJlZHVjZShcbiAgICAgIChcbiAgICAgICAgc3VtOiBudW1iZXIsXG4gICAgICAgIGJhdGNoOiB7IHJldGFpbFByaWNlOiBudW1iZXI7IHJlbWFpbmluZ1F1YW50aXR5OiBudW1iZXIgfVxuICAgICAgKSA9PiBzdW0gKyBiYXRjaC5yZXRhaWxQcmljZSAqIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgMFxuICAgICksXG4gIH0pKTtcblxuICBjb25zdCBzb3J0ZWREYXRhID0gYXBwbHlTb3J0aW5nKHN0b2NrRGF0YSwgc29ydCBhcyBTb3J0T3B0aW9uKTtcbiAgcmV0dXJuIHNvcnRlZERhdGEuc2xpY2UoKHBhZ2UgLSAxKSAqIFBBR0VfU0laRSwgcGFnZSAqIFBBR0VfU0laRSk7XG59XG5cbi8vIEZldGNoIHN0b2NrIGdyb3VwZWQgYnkgYmF0Y2hcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdG9ja0J5QmF0Y2goe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJhbHBoYWJldGljYWxseVwiLFxuICBzdGFydERhdGUsXG4gIGVuZERhdGUsXG59OiBTdG9ja1F1ZXJ5UGFyYW1zKTogUHJvbWlzZTxTdG9ja0RhdGFbXT4ge1xuICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgT1I6IFtcbiAgICAgICAgeyBkcnVnOiB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9IH0sXG4gICAgICAgIHsgZHJ1Z0JyYW5kOiB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5LCBtb2RlOiBcImluc2Vuc2l0aXZlXCIgfSB9IH0sXG4gICAgICAgIHsgbnVtYmVyOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0gfSxcbiAgICAgICAgeyBTdXBwbGllcjogeyBuYW1lOiB7IGNvbnRhaW5zOiBxdWVyeSwgbW9kZTogXCJpbnNlbnNpdGl2ZVwiIH0gfSB9LFxuICAgICAgXSxcbiAgICAgIC8vIHN0YXR1czogXCJBVkFJTEFCTEVcIixcbiAgICAgIC4uLihzdGFydERhdGUgJiYgZW5kRGF0ZVxuICAgICAgICA/IHtcbiAgICAgICAgICAgIHN0b2NrRGF0ZToge1xuICAgICAgICAgICAgICBndGU6IHN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgbHRlOiBlbmREYXRlLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDoge30pLFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgZHJ1ZzogdHJ1ZSxcbiAgICAgIGRydWdCcmFuZDogdHJ1ZSxcbiAgICAgIFN1cHBsaWVyOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IHN0b2NrRGF0YTogU3RvY2tEYXRhW10gPSBiYXRjaGVzLm1hcCgoYmF0Y2gpID0+ICh7XG4gICAgaWQ6IGJhdGNoLmlkLFxuICAgIG5hbWU6IGAoQmF0Y2ggJHtiYXRjaC5udW1iZXJ9KWAsXG4gICAgYnJhbmROYW1lOiBiYXRjaC5kcnVnQnJhbmQubmFtZSxcbiAgICBkcnVnTmFtZTogYmF0Y2guZHJ1Zy5uYW1lLFxuICAgIHRvdGFsUHJpY2U6IGJhdGNoLnJldGFpbFByaWNlICogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgcmV0YWlsUHJpY2U6IGJhdGNoLnJldGFpbFByaWNlLFxuICAgIHdob2xlc2FsZVByaWNlOiBiYXRjaC53aG9sZXNhbGVQcmljZSxcbiAgICByZW1haW5pbmdRdWFudGl0eTogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgc3VwcGxpZXI6IGJhdGNoLlN1cHBsaWVyLm5hbWUsXG4gIH0pKTtcblxuICBjb25zdCBzb3J0ZWREYXRhID0gYXBwbHlTb3J0aW5nKHN0b2NrRGF0YSwgc29ydCBhcyBTb3J0T3B0aW9uKTtcbiAgcmV0dXJuIHNvcnRlZERhdGEuc2xpY2UoKHBhZ2UgLSAxKSAqIFBBR0VfU0laRSwgcGFnZSAqIFBBR0VfU0laRSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRTdG9ja0J5QnJhbmQoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJhbHBoYWJldGljYWxseVwiLFxuICBzdGFydERhdGUsXG4gIGVuZERhdGUsXG59OiBTdG9ja1F1ZXJ5UGFyYW1zKTogUHJvbWlzZTxTdG9ja0RhdGFbXT4ge1xuICAvLyBFbnN1cmUgZGF0ZXMgYXJlIHByb3Blcmx5IGZvcm1hdHRlZCBmb3IgUHJpc21hXG4gIGNvbnN0IGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IHN0YXJ0RGF0ZSA/IG5ldyBEYXRlKHN0YXJ0RGF0ZSkgOiB1bmRlZmluZWQ7XG4gIGNvbnN0IGZvcm1hdHRlZEVuZERhdGUgPSBlbmREYXRlID8gbmV3IERhdGUoZW5kRGF0ZSkgOiB1bmRlZmluZWQ7XG5cbiAgY29uc3QgYnJhbmRzID0gYXdhaXQgcHJpc21hLmRydWdCcmFuZC5maW5kTWFueSh7XG4gICAgd2hlcmU6IHtcbiAgICAgIG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5IH0sXG4gICAgICBCYXRjaDoge1xuICAgICAgICBzb21lOiB7XG4gICAgICAgICAgQU5EOiBbXG4gICAgICAgICAgICAvLyB7IHN0YXR1czogXCJBVkFJTEFCTEVcIiB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICBzdG9ja0RhdGU6IHtcbiAgICAgICAgICAgICAgICBndGU6IGZvcm1hdHRlZFN0YXJ0RGF0ZSxcbiAgICAgICAgICAgICAgICBsdGU6IGZvcm1hdHRlZEVuZERhdGUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgaW5jbHVkZToge1xuICAgICAgQmF0Y2g6IHtcbiAgICAgICAgd2hlcmU6IHtcbiAgICAgICAgICBBTkQ6IFtcbiAgICAgICAgICAgIC8vIHsgc3RhdHVzOiBcIkFWQUlMQUJMRVwiIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHN0b2NrRGF0ZToge1xuICAgICAgICAgICAgICAgIGd0ZTogZm9ybWF0dGVkU3RhcnREYXRlLFxuICAgICAgICAgICAgICAgIGx0ZTogZm9ybWF0dGVkRW5kRGF0ZSxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXSxcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgd2hvbGVzYWxlUHJpY2U6IHRydWUsXG4gICAgICAgICAgcmV0YWlsUHJpY2U6IHRydWUsXG4gICAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gIH0pO1xuXG4gIC8vIFRyYW5zZm9ybSBhbmQgc29ydCB0aGUgZGF0YVxuICBjb25zdCBzdG9ja0RhdGE6IFN0b2NrRGF0YVtdID0gYnJhbmRzXG4gICAgLmZpbHRlcigoYnJhbmQpID0+IGJyYW5kLkJhdGNoLmxlbmd0aCA+IDApIC8vIE9ubHkgaW5jbHVkZSBicmFuZHMgd2l0aCBtYXRjaGluZyBiYXRjaGVzXG4gICAgLm1hcCgoYnJhbmQpID0+ICh7XG4gICAgICBpZDogYnJhbmQuaWQsXG4gICAgICBuYW1lOiBicmFuZC5uYW1lLFxuICAgICAgdG90YWxQcmljZTogYnJhbmQuQmF0Y2gucmVkdWNlKFxuICAgICAgICAoc3VtLCBiYXRjaCkgPT4gc3VtICsgYmF0Y2gucmV0YWlsUHJpY2UgKiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICAgICAgMFxuICAgICAgKSxcbiAgICB9KSk7XG5cbiAgY29uc3Qgc29ydGVkRGF0YSA9IGFwcGx5U29ydGluZyhzdG9ja0RhdGEsIHNvcnQgYXMgU29ydE9wdGlvbik7XG4gIHJldHVybiBzb3J0ZWREYXRhLnNsaWNlKChwYWdlIC0gMSkgKiBQQUdFX1NJWkUsIHBhZ2UgKiBQQUdFX1NJWkUpO1xufVxuXG4vLyBEZWZpbmUgaW50ZXJmYWNlcyBmb3IgdGhlIHJldHVybiB0eXBlc1xuaW50ZXJmYWNlIEJhdGNoSW5mbyB7XG4gIGJhdGNoSWQ6IG51bWJlcjtcbiAgYmF0Y2hOdW1iZXI6IHN0cmluZztcbiAgYnJhbmROYW1lOiBzdHJpbmc7XG4gIGNvbmNlbnRyYXRpb246IG51bWJlcjtcbiAgcmV0YWlsUHJpY2U6IG51bWJlcjtcbiAgdG90YWxQcmljZTogbnVtYmVyO1xuICByZW1haW5pbmdRdWFudGl0eTogbnVtYmVyO1xuICBleHBpcnlEYXRlOiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBTdXBwbGllckRhdGEge1xuICBzdXBwbGllcklkOiBudW1iZXI7XG4gIHN1cHBsaWVyTmFtZTogc3RyaW5nO1xuICBiYXRjaGVzOiBCYXRjaEluZm9bXTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN1cHBsaWVyV2lzZVByaWNpbmcoXG4gIGRydWdJZDogbnVtYmVyXG4pOiBQcm9taXNlPFN1cHBsaWVyRGF0YVtdPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYmF0Y2hlcyA9IGF3YWl0IHByaXNtYS5iYXRjaC5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBkcnVnSWQ6IGRydWdJZCxcbiAgICAgICAgLy8gc3RhdHVzOiBcIkFWQUlMQUJMRVwiLFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgICBTdXBwbGllcjogdHJ1ZSxcbiAgICAgICAgdW5pdENvbmNlbnRyYXRpb246IHRydWUsXG4gICAgICB9LFxuICAgICAgb3JkZXJCeToge1xuICAgICAgICByZXRhaWxQcmljZTogXCJhc2NcIiwgLy8gU29ydCBieSByZXRhaWwgcHJpY2UgKGxvdyB0byBoaWdoKVxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIEdyb3VwIGJhdGNoZXMgYnkgc3VwcGxpZXJcbiAgICBjb25zdCBzdXBwbGllckRhdGE6IFJlY29yZDxzdHJpbmcsIFN1cHBsaWVyRGF0YT4gPSBiYXRjaGVzLnJlZHVjZShcbiAgICAgIChhY2MsIGJhdGNoKSA9PiB7XG4gICAgICAgIGNvbnN0IHN1cHBsaWVyTmFtZSA9IGJhdGNoLlN1cHBsaWVyLm5hbWU7XG5cbiAgICAgICAgaWYgKCFhY2Nbc3VwcGxpZXJOYW1lXSkge1xuICAgICAgICAgIGFjY1tzdXBwbGllck5hbWVdID0ge1xuICAgICAgICAgICAgc3VwcGxpZXJJZDogYmF0Y2guU3VwcGxpZXIuaWQsXG4gICAgICAgICAgICBzdXBwbGllck5hbWU6IHN1cHBsaWVyTmFtZSxcbiAgICAgICAgICAgIGJhdGNoZXM6IFtdLFxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICBhY2Nbc3VwcGxpZXJOYW1lXS5iYXRjaGVzLnB1c2goe1xuICAgICAgICAgIGJhdGNoSWQ6IGJhdGNoLmlkLFxuICAgICAgICAgIGJhdGNoTnVtYmVyOiBiYXRjaC5udW1iZXIsXG4gICAgICAgICAgYnJhbmROYW1lOiBiYXRjaC5kcnVnQnJhbmQubmFtZSxcbiAgICAgICAgICBjb25jZW50cmF0aW9uOiBiYXRjaC51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgICAgICAgIHJldGFpbFByaWNlOiBiYXRjaC5yZXRhaWxQcmljZSxcbiAgICAgICAgICB0b3RhbFByaWNlOiBiYXRjaC5mdWxsQW1vdW50ICogYmF0Y2gud2hvbGVzYWxlUHJpY2UsXG4gICAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5LFxuICAgICAgICAgIGV4cGlyeURhdGU6IGJhdGNoLmV4cGlyeS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIGFjYztcbiAgICAgIH0sXG4gICAgICB7fSBhcyBSZWNvcmQ8c3RyaW5nLCBTdXBwbGllckRhdGE+XG4gICAgKTtcblxuICAgIHJldHVybiBPYmplY3QudmFsdWVzKHN1cHBsaWVyRGF0YSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN1cHBsaWVyLXdpc2UgcHJpY2luZzpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBzdXBwbGllci13aXNlIHByaWNpbmdcIik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFN0b2NrQW5hbHlzaXMoXG4gIGRhdGVSYW5nZTogRGF0ZVJhbmdlXG4pOiBQcm9taXNlPFN0b2NrQW5hbHlzaXM+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICAgIHdoZXJlOiB7XG4gICAgICAgIHN0b2NrRGF0ZToge1xuICAgICAgICAgIGd0ZTogZGF0ZVJhbmdlLnN0YXJ0RGF0ZSxcbiAgICAgICAgICBsdGU6IGRhdGVSYW5nZS5lbmREYXRlLFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGluY2x1ZGU6IHtcbiAgICAgICAgSXNzdWU6IHRydWUsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgY29uc3QgYW5hbHlzaXM6IFN0b2NrQW5hbHlzaXMgPSB7XG4gICAgICBhdmFpbGFibGU6IDAsIC8vIFdpbGwgc3RvcmUgYXZhaWxhYmxlIHF1YW50aXR5IHZhbHVlXG4gICAgICBzb2xkOiAwLCAvLyBXaWxsIHN0b3JlIHNvbGQgcXVhbnRpdHkgdmFsdWVcbiAgICAgIGV4cGlyZWQ6IDAsIC8vIFdpbGwgc3RvcmUgZXhwaXJlZCBxdWFudGl0eSB2YWx1ZVxuICAgICAgZGlzcG9zZWQ6IDAsIC8vIFdpbGwgc3RvcmUgZGlzcG9zZWQgcXVhbnRpdHkgdmFsdWVcbiAgICAgIHF1YWxpdHlfZmFpbGVkOiAwLCAvLyBXaWxsIHN0b3JlIHF1YWxpdHkgZmFpbGVkIHF1YW50aXR5IHZhbHVlXG4gICAgICBlcnJvcnM6IDAsIC8vIFdpbGwgc3RvcmUgZXJyb3IgcXVhbnRpdHkgdmFsdWVcbiAgICB9O1xuXG4gICAgYmF0Y2hlcy5mb3JFYWNoKChiYXRjaCkgPT4ge1xuICAgICAgY29uc3QgcHJpY2VQZXJVbml0ID0gYmF0Y2gucmV0YWlsUHJpY2U7XG5cbiAgICAgIHN3aXRjaCAoYmF0Y2guc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgXCJBVkFJTEFCTEVcIjpcbiAgICAgICAgICAvLyBGb3IgYXZhaWxhYmxlIHN0YXR1czpcbiAgICAgICAgICAvLyAtIGF2YWlsYWJsZSA9IHJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VcbiAgICAgICAgICAvLyAtIHNvbGQgPSAoZnVsbEFtb3VudCAtIHJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlXG4gICAgICAgICAgYW5hbHlzaXMuYXZhaWxhYmxlICs9IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIGlmIChiYXRjaC5mdWxsQW1vdW50ID4gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpIHtcbiAgICAgICAgICAgIGFuYWx5c2lzLnNvbGQgKz1cbiAgICAgICAgICAgICAgKGJhdGNoLmZ1bGxBbW91bnQgLSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJFWFBJUkVEXCI6XG4gICAgICAgICAgLy8gRm9yIGV4cGlyZWQgc3RhdHVzOlxuICAgICAgICAgIC8vIC0gZXhwaXJlZCA9IHJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VcbiAgICAgICAgICAvLyAtIHNvbGQgPSAoZnVsbEFtb3VudCAtIHJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlXG4gICAgICAgICAgYW5hbHlzaXMuZXhwaXJlZCArPSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICBpZiAoYmF0Y2guZnVsbEFtb3VudCA+IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSB7XG4gICAgICAgICAgICBhbmFseXNpcy5zb2xkICs9XG4gICAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQ09NUExFVEVEXCI6XG4gICAgICAgICAgLy8gRm9yIGNvbXBsZXRlZCBzdGF0dXM6XG4gICAgICAgICAgLy8gLSBJZiB0aGVyZSdzIHJlbWFpbmluZyBxdWFudGl0eSwgaXQncyBhbiBlcnJvclxuICAgICAgICAgIC8vIC0gc29sZCA9IChmdWxsQW1vdW50IC0gcmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VcbiAgICAgICAgICBpZiAoYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkgPiAwKSB7XG4gICAgICAgICAgICBhbmFseXNpcy5lcnJvcnMgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGFuYWx5c2lzLnNvbGQgKz1cbiAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogcHJpY2VQZXJVbml0O1xuICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgIGNhc2UgXCJESVNQT1NFRFwiOlxuICAgICAgICAgIC8vIEZvciBkaXNwb3NlZCBzdGF0dXM6XG4gICAgICAgICAgLy8gLSBkaXNwb3NlZCA9IHJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VcbiAgICAgICAgICAvLyAtIHNvbGQgPSAoZnVsbEFtb3VudCAtIHJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlXG4gICAgICAgICAgYW5hbHlzaXMuZGlzcG9zZWQgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgaWYgKGJhdGNoLmZ1bGxBbW91bnQgPiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkge1xuICAgICAgICAgICAgYW5hbHlzaXMuc29sZCArPVxuICAgICAgICAgICAgICAoYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJRVUFMSVRZX0ZBSUxFRFwiOlxuICAgICAgICAgIC8vIEZvciBxdWFsaXR5IGZhaWxlZCBzdGF0dXM6XG4gICAgICAgICAgLy8gLSBxdWFsaXR5X2ZhaWxlZCA9IHJlbWFpbmluZ1F1YW50aXR5ICogcHJpY2VcbiAgICAgICAgICAvLyAtIHNvbGQgPSAoZnVsbEFtb3VudCAtIHJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlXG4gICAgICAgICAgYW5hbHlzaXMucXVhbGl0eV9mYWlsZWQgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkgKiBwcmljZVBlclVuaXQ7XG4gICAgICAgICAgaWYgKGJhdGNoLmZ1bGxBbW91bnQgPiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkge1xuICAgICAgICAgICAgYW5hbHlzaXMuc29sZCArPVxuICAgICAgICAgICAgICAoYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSAqIHByaWNlUGVyVW5pdDtcbiAgICAgICAgICB9XG4gICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAvLyBBbnkgdW5rbm93biBzdGF0dXMsIGNvdW50IGFzIGVycm9yXG4gICAgICAgICAgYW5hbHlzaXMuZXJyb3JzICs9IGJhdGNoLmZ1bGxBbW91bnQgKiBwcmljZVBlclVuaXQ7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gYW5hbHlzaXM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHN0b2NrIGFuYWx5c2lzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIHN0b2NrIGFuYWx5c2lzXCIpO1xuICB9XG59XG5cbmNvbnN0IFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0ggPSAxNTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlNb2RlbCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgc3RhdHVzID0gXCJBTExcIixcbiAgZnJvbURhdGUsXG4gIHRvRGF0ZSxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZnJvbURhdGU/OiBzdHJpbmc7XG4gIHRvRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIGRydWc6IHsgbmFtZTogeyBjb250YWluczogcXVlcnkgfSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsSXRlbXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guY291bnQoeyB3aGVyZTogd2hlcmVDb25kaXRpb24gfSk7XG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0gpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29tcGxldGVkRmlsdGVyZWREcnVnc0J5TW9kZWwoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJleHBpcnlEYXRlXCIsXG4gIHN0YXR1cyA9IFwiQUxMXCIsXG4gIGZyb21EYXRlLFxuICB0b0RhdGUsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBzb3J0Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIGZyb21EYXRlPzogc3RyaW5nO1xuICB0b0RhdGU/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBkcnVnOiB7IG5hbWU6IHsgY29udGFpbnM6IHF1ZXJ5IH0gfSxcbiAgfTtcblxuICBpZiAoc3RhdHVzID09PSBcIkFMTFwiKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0geyBub3Q6IFwiQVZBSUxBQkxFXCIgfTtcbiAgfSBlbHNlIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSBzdGF0dXMgYXMgQmF0Y2hTdGF0dXM7XG4gIH1cbiAgaWYgKGZyb21EYXRlICYmIHRvRGF0ZSkge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0b2NrRGF0ZSA9IHtcbiAgICAgIGd0ZTogbmV3IERhdGUoZnJvbURhdGUpLFxuICAgICAgbHRlOiBuZXcgRGF0ZSh0b0RhdGUpLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBiYXRjaGVzID0gYXdhaXQgcHJpc21hLmJhdGNoLmZpbmRNYW55KHtcbiAgICB3aGVyZTogd2hlcmVDb25kaXRpb24sXG4gICAgaW5jbHVkZToge1xuICAgICAgZHJ1ZzogdHJ1ZSxcbiAgICAgIGRydWdCcmFuZDogdHJ1ZSxcbiAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB0cnVlLFxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGZvcm1hdHRlZEJhdGNoZXMgPSBiYXRjaGVzLm1hcCgoYmF0Y2gpID0+ICh7XG4gICAgaWQ6IGJhdGNoLmlkLFxuICAgIGJhdGNoTnVtYmVyOiBiYXRjaC5udW1iZXIsXG4gICAgYnJhbmROYW1lOiBiYXRjaC5kcnVnQnJhbmQubmFtZSxcbiAgICBtb2RlbE5hbWU6IGJhdGNoLmRydWcubmFtZSxcbiAgICBleHBpcnlEYXRlOiBiYXRjaC5leHBpcnkudG9JU09TdHJpbmcoKSxcbiAgICBzdG9ja0RhdGU6IGJhdGNoLnN0b2NrRGF0ZS50b0lTT1N0cmluZygpLFxuICAgIHJlbWFpbmluZ0Ftb3VudDogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgZnVsbEFtb3VudDogYmF0Y2guZnVsbEFtb3VudCxcbiAgICBzdGF0dXM6IGJhdGNoLnN0YXR1cyxcbiAgICB1bml0Q29uY2VudHJhdGlvbjogYmF0Y2gudW5pdENvbmNlbnRyYXRpb24uY29uY2VudHJhdGlvbixcbiAgICB0eXBlOiBiYXRjaC50eXBlLFxuICB9KSk7XG5cbiAgcmV0dXJuIHNvcnRBbmRQYWdpbmF0ZUJhdGNoZXMoZm9ybWF0dGVkQmF0Y2hlcywgc29ydCwgcGFnZSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRUb3RhbFBhZ2VzRm9yQ29tcGxldGVkRmlsdGVyZWREcnVnc0J5QnJhbmQoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHN0YXR1cyA9IFwiQUxMXCIsXG4gIGZyb21EYXRlLFxuICB0b0RhdGUsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIGZyb21EYXRlPzogc3RyaW5nO1xuICB0b0RhdGU/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBkcnVnQnJhbmQ6IHsgbmFtZTogeyBjb250YWluczogcXVlcnkgfSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IHRvdGFsSXRlbXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guY291bnQoeyB3aGVyZTogd2hlcmVDb25kaXRpb24gfSk7XG4gIHJldHVybiBNYXRoLmNlaWwodG90YWxJdGVtcyAvIFBBR0VfU0laRV9DT01QTEVURURfRFJVR1NfQllfQkFUQ0gpO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29tcGxldGVkRmlsdGVyZWREcnVnc0J5QnJhbmQoe1xuICBxdWVyeSA9IFwiXCIsXG4gIHBhZ2UgPSAxLFxuICBzb3J0ID0gXCJleHBpcnlEYXRlXCIsXG4gIHN0YXR1cyA9IFwiQUxMXCIsXG4gIGZyb21EYXRlLFxuICB0b0RhdGUsXG59OiB7XG4gIHF1ZXJ5Pzogc3RyaW5nO1xuICBwYWdlPzogbnVtYmVyO1xuICBzb3J0Pzogc3RyaW5nO1xuICBzdGF0dXM/OiBzdHJpbmc7XG4gIGZyb21EYXRlPzogc3RyaW5nO1xuICB0b0RhdGU/OiBzdHJpbmc7XG59KSB7XG4gIGNvbnN0IHdoZXJlQ29uZGl0aW9uOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiA9IHtcbiAgICBkcnVnQnJhbmQ6IHsgbmFtZTogeyBjb250YWluczogcXVlcnkgfSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgIHdoZXJlOiB3aGVyZUNvbmRpdGlvbixcbiAgICBpbmNsdWRlOiB7XG4gICAgICBkcnVnOiB0cnVlLFxuICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgdW5pdENvbmNlbnRyYXRpb246IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZm9ybWF0dGVkQmF0Y2hlcyA9IGJhdGNoZXMubWFwKChiYXRjaCkgPT4gKHtcbiAgICBpZDogYmF0Y2guaWQsXG4gICAgYmF0Y2hOdW1iZXI6IGJhdGNoLm51bWJlcixcbiAgICBicmFuZE5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgIG1vZGVsTmFtZTogYmF0Y2guZHJ1Zy5uYW1lLFxuICAgIGV4cGlyeURhdGU6IGJhdGNoLmV4cGlyeS50b0lTT1N0cmluZygpLFxuICAgIHN0b2NrRGF0ZTogYmF0Y2guc3RvY2tEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgcmVtYWluaW5nQW1vdW50OiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICBmdWxsQW1vdW50OiBiYXRjaC5mdWxsQW1vdW50LFxuICAgIHN0YXR1czogYmF0Y2guc3RhdHVzLFxuICAgIHVuaXRDb25jZW50cmF0aW9uOiBiYXRjaC51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgIHR5cGU6IGJhdGNoLnR5cGUsXG4gIH0pKTtcblxuICByZXR1cm4gc29ydEFuZFBhZ2luYXRlQmF0Y2hlcyhmb3JtYXR0ZWRCYXRjaGVzLCBzb3J0LCBwYWdlKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldFRvdGFsUGFnZXNGb3JDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlCYXRjaCh7XG4gIHF1ZXJ5ID0gXCJcIixcbiAgc3RhdHVzID0gXCJBTExcIixcbiAgZnJvbURhdGUsXG4gIHRvRGF0ZSxcbn06IHtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIHN0YXR1cz86IHN0cmluZztcbiAgZnJvbURhdGU/OiBzdHJpbmc7XG4gIHRvRGF0ZT86IHN0cmluZztcbn0pIHtcbiAgY29uc3Qgd2hlcmVDb25kaXRpb246IFJlY29yZDxzdHJpbmcsIHVua25vd24+ID0ge1xuICAgIG51bWJlcjogeyBjb250YWluczogcXVlcnkgfSxcbiAgfTtcblxuICBpZiAoc3RhdHVzID09PSBcIkFMTFwiKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RhdHVzID0geyBub3Q6IFwiQVZBSUxBQkxFXCIgfTtcbiAgfSBlbHNlIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSBzdGF0dXMgYXMgQmF0Y2hTdGF0dXM7XG4gIH1cbiAgaWYgKGZyb21EYXRlICYmIHRvRGF0ZSkge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0b2NrRGF0ZSA9IHtcbiAgICAgIGd0ZTogbmV3IERhdGUoZnJvbURhdGUpLFxuICAgICAgbHRlOiBuZXcgRGF0ZSh0b0RhdGUpLFxuICAgIH07XG4gIH1cblxuICBjb25zdCB0b3RhbEl0ZW1zID0gYXdhaXQgcHJpc21hLmJhdGNoLmNvdW50KHsgd2hlcmU6IHdoZXJlQ29uZGl0aW9uIH0pO1xuICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsSXRlbXMgLyBQQUdFX1NJWkVfQ09NUExFVEVEX0RSVUdTX0JZX0JBVENIKTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeUJhdGNoKHtcbiAgcXVlcnkgPSBcIlwiLFxuICBwYWdlID0gMSxcbiAgc29ydCA9IFwiZXhwaXJ5RGF0ZVwiLFxuICBzdGF0dXMgPSBcIkFMTFwiLFxuICBmcm9tRGF0ZSxcbiAgdG9EYXRlLFxufToge1xuICBxdWVyeT86IHN0cmluZztcbiAgcGFnZT86IG51bWJlcjtcbiAgc29ydD86IHN0cmluZztcbiAgc3RhdHVzPzogc3RyaW5nO1xuICBmcm9tRGF0ZT86IHN0cmluZztcbiAgdG9EYXRlPzogc3RyaW5nO1xufSkge1xuICBjb25zdCB3aGVyZUNvbmRpdGlvbjogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7XG4gICAgbnVtYmVyOiB7IGNvbnRhaW5zOiBxdWVyeSB9LFxuICB9O1xuXG4gIGlmIChzdGF0dXMgPT09IFwiQUxMXCIpIHtcbiAgICB3aGVyZUNvbmRpdGlvbi5zdGF0dXMgPSB7IG5vdDogXCJBVkFJTEFCTEVcIiB9O1xuICB9IGVsc2Uge1xuICAgIHdoZXJlQ29uZGl0aW9uLnN0YXR1cyA9IHN0YXR1cyBhcyBCYXRjaFN0YXR1cztcbiAgfVxuICBpZiAoZnJvbURhdGUgJiYgdG9EYXRlKSB7XG4gICAgd2hlcmVDb25kaXRpb24uc3RvY2tEYXRlID0ge1xuICAgICAgZ3RlOiBuZXcgRGF0ZShmcm9tRGF0ZSksXG4gICAgICBsdGU6IG5ldyBEYXRlKHRvRGF0ZSksXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgIHdoZXJlOiB3aGVyZUNvbmRpdGlvbixcbiAgICBpbmNsdWRlOiB7XG4gICAgICBkcnVnOiB0cnVlLFxuICAgICAgZHJ1Z0JyYW5kOiB0cnVlLFxuICAgICAgdW5pdENvbmNlbnRyYXRpb246IHRydWUsXG4gICAgfSxcbiAgfSk7XG5cbiAgY29uc3QgZm9ybWF0dGVkQmF0Y2hlcyA9IGJhdGNoZXMubWFwKChiYXRjaCkgPT4gKHtcbiAgICBpZDogYmF0Y2guaWQsXG4gICAgYmF0Y2hOdW1iZXI6IGJhdGNoLm51bWJlcixcbiAgICBicmFuZE5hbWU6IGJhdGNoLmRydWdCcmFuZC5uYW1lLFxuICAgIG1vZGVsTmFtZTogYmF0Y2guZHJ1Zy5uYW1lLFxuICAgIGV4cGlyeURhdGU6IGJhdGNoLmV4cGlyeS50b0lTT1N0cmluZygpLFxuICAgIHN0b2NrRGF0ZTogYmF0Y2guc3RvY2tEYXRlLnRvSVNPU3RyaW5nKCksXG4gICAgcmVtYWluaW5nQW1vdW50OiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSxcbiAgICBmdWxsQW1vdW50OiBiYXRjaC5mdWxsQW1vdW50LFxuICAgIHN0YXR1czogYmF0Y2guc3RhdHVzLFxuICAgIHVuaXRDb25jZW50cmF0aW9uOiBiYXRjaC51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgIHR5cGU6IGJhdGNoLnR5cGUsXG4gIH0pKTtcblxuICByZXR1cm4gc29ydEFuZFBhZ2luYXRlQmF0Y2hlcyhmb3JtYXR0ZWRCYXRjaGVzLCBzb3J0LCBwYWdlKTtcbn1cblxuZnVuY3Rpb24gc29ydEFuZFBhZ2luYXRlQmF0Y2hlcyhcbiAgYmF0Y2hlczoge1xuICAgIGlkOiBudW1iZXI7XG4gICAgYmF0Y2hOdW1iZXI6IHN0cmluZztcbiAgICBicmFuZE5hbWU6IHN0cmluZztcbiAgICBtb2RlbE5hbWU6IHN0cmluZztcbiAgICBleHBpcnlEYXRlOiBzdHJpbmc7XG4gICAgc3RvY2tEYXRlOiBzdHJpbmc7XG4gICAgcmVtYWluaW5nQW1vdW50OiBudW1iZXI7XG4gICAgZnVsbEFtb3VudDogbnVtYmVyO1xuICAgIHN0YXR1czogc3RyaW5nO1xuICAgIHVuaXRDb25jZW50cmF0aW9uOiBudW1iZXI7XG4gICAgdHlwZTogc3RyaW5nO1xuICB9W10sXG4gIHNvcnQ6IHN0cmluZyxcbiAgcGFnZTogbnVtYmVyXG4pIHtcbiAgaWYgKHNvcnQgPT09IFwiZXhwaXJ5RGF0ZVwiKSB7XG4gICAgYmF0Y2hlcy5zb3J0KFxuICAgICAgKGEsIGIpID0+XG4gICAgICAgIG5ldyBEYXRlKGEuZXhwaXJ5RGF0ZSkuZ2V0VGltZSgpIC0gbmV3IERhdGUoYi5leHBpcnlEYXRlKS5nZXRUaW1lKClcbiAgICApO1xuICB9IGVsc2UgaWYgKHNvcnQgPT09IFwibmV3bHlBZGRlZFwiKSB7XG4gICAgYmF0Y2hlcy5zb3J0KFxuICAgICAgKGEsIGIpID0+XG4gICAgICAgIG5ldyBEYXRlKGIuc3RvY2tEYXRlKS5nZXRUaW1lKCkgLSBuZXcgRGF0ZShhLnN0b2NrRGF0ZSkuZ2V0VGltZSgpXG4gICAgKTtcbiAgfSBlbHNlIGlmIChzb3J0ID09PSBcImFscGhhYmV0aWNhbGx5XCIpIHtcbiAgICBiYXRjaGVzLnNvcnQoKGEsIGIpID0+IGEubW9kZWxOYW1lLmxvY2FsZUNvbXBhcmUoYi5tb2RlbE5hbWUpKTtcbiAgfVxuXG4gIHJldHVybiBiYXRjaGVzLnNsaWNlKFxuICAgIChwYWdlIC0gMSkgKiBQQUdFX1NJWkVfQ09NUExFVEVEX0RSVUdTX0JZX0JBVENILFxuICAgIHBhZ2UgKiBQQUdFX1NJWkVfQ09NUExFVEVEX0RSVUdTX0JZX0JBVENIXG4gICk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRJc3N1ZWRQYXRpZW50cyhiYXRjaElkOiBudW1iZXIpIHtcbiAgcmV0dXJuIGF3YWl0IHByaXNtYS5pc3N1ZVxuICAgIC5maW5kTWFueSh7XG4gICAgICB3aGVyZTogeyBiYXRjaElkIH0sXG4gICAgICBzZWxlY3Q6IHtcbiAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgIHF1YW50aXR5OiB0cnVlLFxuICAgICAgICBwcmVzY3JpcHRpb25JZDogdHJ1ZSxcbiAgICAgICAgcHJlc2NyaXB0aW9uOiB7XG4gICAgICAgICAgc2VsZWN0OiB7XG4gICAgICAgICAgICB0aW1lOiB0cnVlLFxuICAgICAgICAgICAgcGF0aWVudElkOiB0cnVlLFxuICAgICAgICAgICAgcGF0aWVudDoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KVxuICAgIC50aGVuKChpc3N1ZXMpID0+XG4gICAgICBpc3N1ZXMubWFwKChpc3N1ZSkgPT4gKHtcbiAgICAgICAgaWQ6IGlzc3VlLmlkLFxuICAgICAgICBpc3N1ZWREYXRlOiBpc3N1ZS5wcmVzY3JpcHRpb24udGltZS50b0lTT1N0cmluZygpLnNwbGl0KFwiVFwiKVswXSxcbiAgICAgICAgcGF0aWVudElkOiBpc3N1ZS5wcmVzY3JpcHRpb24ucGF0aWVudElkLFxuICAgICAgICBwYXRpZW50TmFtZTogaXNzdWUucHJlc2NyaXB0aW9uLnBhdGllbnQubmFtZSxcbiAgICAgICAgcHJlc2NyaXB0aW9uSWQ6IGlzc3VlLnByZXNjcmlwdGlvbklkLFxuICAgICAgICBpc3N1ZWRBbW91bnQ6IGlzc3VlLnF1YW50aXR5LFxuICAgICAgfSkpXG4gICAgKTtcbn1cblxuLy9TdWdnZXN0IHRoZSBuYW1lIHdoZW4gYWRkaW5nIHRoZSBkcnVnc1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoRHJ1Z0JyYW5kcyhxdWVyeTogc3RyaW5nKSB7XG4gIGlmICghcXVlcnkgfHwgcXVlcnkubGVuZ3RoIDwgMikgcmV0dXJuIFtdO1xuXG4gIHJldHVybiBwcmlzbWEuZHJ1Z0JyYW5kLmZpbmRNYW55KHtcbiAgICB3aGVyZToge1xuICAgICAgbmFtZToge1xuICAgICAgICBzdGFydHNXaXRoOiBxdWVyeSxcbiAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgfSxcbiAgICB9LFxuICAgIHNlbGVjdDoge1xuICAgICAgaWQ6IHRydWUsXG4gICAgICBuYW1lOiB0cnVlLFxuICAgICAgZGVzY3JpcHRpb246IHRydWUsXG4gICAgfSxcbiAgICB0YWtlOiA4LFxuICB9KTtcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaERydWdNb2RlbHMocXVlcnk6IHN0cmluZykge1xuICBpZiAoIXF1ZXJ5IHx8IHF1ZXJ5Lmxlbmd0aCA8IDIpIHJldHVybiBbXTtcblxuICByZXR1cm4gcHJpc21hLmRydWcuZmluZE1hbnkoe1xuICAgIHdoZXJlOiB7XG4gICAgICBuYW1lOiB7XG4gICAgICAgIHN0YXJ0c1dpdGg6IHF1ZXJ5LFxuICAgICAgICBtb2RlOiBcImluc2Vuc2l0aXZlXCIsXG4gICAgICB9LFxuICAgIH0sXG4gICAgc2VsZWN0OiB7XG4gICAgICBpZDogdHJ1ZSxcbiAgICAgIG5hbWU6IHRydWUsXG4gICAgICBidWZmZXJMZXZlbHM6IHtcbiAgICAgICAgLy8gSW5jbHVkZSB0aGUgcmVsYXRlZCBCdWZmZXJMZXZlbCBkYXRhXG4gICAgICAgIHNlbGVjdDoge1xuICAgICAgICAgIGlkOiB0cnVlLFxuICAgICAgICAgIHR5cGU6IHRydWUsXG4gICAgICAgICAgYnVmZmVyQW1vdW50OiB0cnVlLFxuICAgICAgICAgIHVuaXRDb25jZW50cmF0aW9uOiB7XG4gICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgaWQ6IHRydWUsXG4gICAgICAgICAgICAgIGNvbmNlbnRyYXRpb246IHRydWUsXG4gICAgICAgICAgICB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0sXG4gICAgdGFrZTogOCxcbiAgfSk7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREcnVnQ29uY2VudHJhdGlvbnMoXG4gIGRydWdJZDogbnVtYmVyLFxuICBkcnVnVHlwZTogRHJ1Z1R5cGVcbik6IFByb21pc2U8RHJ1Z0NvbmNlbnRyYXRpb25EYXRhU3VnZ2VzdGlvbltdPiB7XG4gIHRyeSB7XG4gICAgY29uc3Qgd2VpZ2h0cyA9IGF3YWl0IHByaXNtYS5iYXRjaC5maW5kTWFueSh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBkcnVnSWQ6IGRydWdJZCxcbiAgICAgICAgdHlwZTogZHJ1Z1R5cGUsXG4gICAgICB9LFxuICAgICAgaW5jbHVkZToge1xuICAgICAgICB1bml0Q29uY2VudHJhdGlvbjogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICBkaXN0aW5jdDogW1widW5pdENvbmNlbnRyYXRpb25JZFwiXSwgLy8gRW5zdXJlIHVuaXF1ZSB3ZWlnaHRJZHNcbiAgICB9KTtcblxuICAgIHJldHVybiB3ZWlnaHRzLm1hcCgoZHcpID0+ICh7XG4gICAgICBpZDogZHcudW5pdENvbmNlbnRyYXRpb24uaWQsXG4gICAgICBjb25jZW50cmF0aW9uOiBkdy51bml0Q29uY2VudHJhdGlvbi5jb25jZW50cmF0aW9uLFxuICAgIH0pKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgZHJ1ZyB3ZWlnaHRzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGZldGNoIGRydWcgd2VpZ2h0c1wiKTtcbiAgfVxufVxuXG4vL3Nob3cgdGhlIGluZm8gb2Ygb25lIGRydWcgbW9kZWxcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXREcnVnTW9kZWxTdGF0cyhkcnVnSWQ6IG51bWJlcikge1xuICB0cnkge1xuICAgIGNvbnN0IGJhdGNoZXMgPSBhd2FpdCBwcmlzbWEuYmF0Y2guZmluZE1hbnkoe1xuICAgICAgd2hlcmU6IHtcbiAgICAgICAgZHJ1Z0lkOiBkcnVnSWQsXG4gICAgICB9LFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIHN0YXR1czogdHJ1ZSxcbiAgICAgICAgcmVtYWluaW5nUXVhbnRpdHk6IHRydWUsXG4gICAgICAgIHJldGFpbFByaWNlOiB0cnVlLFxuICAgICAgICB3aG9sZXNhbGVQcmljZTogdHJ1ZSxcbiAgICAgICAgZnVsbEFtb3VudDogdHJ1ZSxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjb25zdCBzdGF0cyA9IHtcbiAgICAgIGF2YWlsYWJsZTogeyBxdWFudGl0eTogMCwgdmFsdWU6IDAgfSxcbiAgICAgIHNvbGQ6IHsgcXVhbnRpdHk6IDAsIHZhbHVlOiAwIH0sXG4gICAgICBleHBpcmVkOiB7IHF1YW50aXR5OiAwLCB2YWx1ZTogMCB9LFxuICAgICAgZGlzcG9zZWQ6IHsgcXVhbnRpdHk6IDAsIHZhbHVlOiAwIH0sXG4gICAgICBxdWFsaXR5X2ZhaWxlZDogeyBxdWFudGl0eTogMCwgdmFsdWU6IDAgfSxcbiAgICAgIHRyYXNoZWQ6IHsgcXVhbnRpdHk6IDAsIHZhbHVlOiAwIH0sXG4gICAgICBlcnJvcnM6IHsgcXVhbnRpdHk6IDAsIHZhbHVlOiAwIH0sXG4gICAgfTtcblxuICAgIGJhdGNoZXMuZm9yRWFjaCgoYmF0Y2gpID0+IHtcbiAgICAgIHN3aXRjaCAoYmF0Y2guc3RhdHVzKSB7XG4gICAgICAgIGNhc2UgXCJBVkFJTEFCTEVcIjpcbiAgICAgICAgICBzdGF0cy5hdmFpbGFibGUucXVhbnRpdHkgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgc3RhdHMuYXZhaWxhYmxlLnZhbHVlICs9IGJhdGNoLnJldGFpbFByaWNlICogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgaWYgKGJhdGNoLmZ1bGxBbW91bnQgPiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkge1xuICAgICAgICAgICAgc3RhdHMuc29sZC5xdWFudGl0eSArPSBiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgICBzdGF0cy5zb2xkLnZhbHVlICs9XG4gICAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogYmF0Y2gucmV0YWlsUHJpY2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlIFwiRVhQSVJFRFwiOlxuICAgICAgICAgIHN0YXRzLmV4cGlyZWQucXVhbnRpdHkgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgc3RhdHMuZXhwaXJlZC52YWx1ZSArPSBiYXRjaC5yZXRhaWxQcmljZSAqIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5O1xuICAgICAgICAgIGlmIChiYXRjaC5mdWxsQW1vdW50ID4gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpIHtcbiAgICAgICAgICAgIHN0YXRzLnNvbGQucXVhbnRpdHkgKz0gYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5O1xuICAgICAgICAgICAgc3RhdHMuc29sZC52YWx1ZSArPVxuICAgICAgICAgICAgICAoYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5KSAqIGJhdGNoLnJldGFpbFByaWNlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcblxuICAgICAgICBjYXNlIFwiQ09NUExFVEVEXCI6XG4gICAgICAgICAgaWYgKGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5ID4gMCkge1xuICAgICAgICAgICAgc3RhdHMuZXJyb3JzLnF1YW50aXR5ICs9IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5O1xuICAgICAgICAgICAgc3RhdHMuZXJyb3JzLnZhbHVlICs9IGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5ICogYmF0Y2gucmV0YWlsUHJpY2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHN0YXRzLnNvbGQucXVhbnRpdHkgKz0gYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5O1xuICAgICAgICAgIHN0YXRzLnNvbGQudmFsdWUgKz1cbiAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogYmF0Y2gucmV0YWlsUHJpY2U7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgXCJESVNQT1NFRFwiOlxuICAgICAgICAgIHN0YXRzLnRyYXNoZWQucXVhbnRpdHkgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgc3RhdHMudHJhc2hlZC52YWx1ZSArPSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSAqIGJhdGNoLnJldGFpbFByaWNlO1xuICAgICAgICAgIGlmIChiYXRjaC5mdWxsQW1vdW50ID4gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpIHtcbiAgICAgICAgICAgIHN0YXRzLnNvbGQudmFsdWUgKz1cbiAgICAgICAgICAgICAgKGJhdGNoLmZ1bGxBbW91bnQgLSBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkgKiBiYXRjaC5yZXRhaWxQcmljZTtcbiAgICAgICAgICAgIHN0YXRzLnNvbGQucXVhbnRpdHkgKz0gYmF0Y2guZnVsbEFtb3VudCAtIGJhdGNoLnJlbWFpbmluZ1F1YW50aXR5O1xuICAgICAgICAgIH1cbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSBcIlFVQUxJVFlfRkFJTEVEXCI6XG4gICAgICAgICAgc3RhdHMucXVhbGl0eV9mYWlsZWQucXVhbnRpdHkgKz0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgc3RhdHMucXVhbGl0eV9mYWlsZWQudmFsdWUgKz1cbiAgICAgICAgICAgIGJhdGNoLnJldGFpbFByaWNlICogYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgaWYgKGJhdGNoLmZ1bGxBbW91bnQgPiBiYXRjaC5yZW1haW5pbmdRdWFudGl0eSkge1xuICAgICAgICAgICAgc3RhdHMuc29sZC5xdWFudGl0eSArPSBiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHk7XG4gICAgICAgICAgICBzdGF0cy5zb2xkLnZhbHVlICs9XG4gICAgICAgICAgICAgIChiYXRjaC5mdWxsQW1vdW50IC0gYmF0Y2gucmVtYWluaW5nUXVhbnRpdHkpICogYmF0Y2gucmV0YWlsUHJpY2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIC8vIEFueSB1bmtub3duIHN0YXR1cywgY291bnQgYXMgZXJyb3JcbiAgICAgICAgICBzdGF0cy5lcnJvcnMudmFsdWUgKz0gYmF0Y2guZnVsbEFtb3VudCAqIGJhdGNoLnJldGFpbFByaWNlO1xuICAgICAgICAgIHN0YXRzLmVycm9ycy5xdWFudGl0eSArPSBiYXRjaC5mdWxsQW1vdW50O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIHN0YXRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBzdG9jayBhbmFseXNpczpcIiwgZXJyb3IpO1xuICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBmZXRjaCBzdG9jayBhbmFseXNpc1wiKTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0RHJ1Z01vZGVsc1dpdGhCdWZmZXJMZXZlbChcbiAgc2VhcmNoUXVlcnk/OiBzdHJpbmcsXG4gIHNlbGVjdGlvbj86IHN0cmluZ1xuKSB7XG4gIHRyeSB7XG4gICAgLy8gT25seSBzZWxlY3QgdGhlIGZpZWxkcyB3ZSBhY3R1YWxseSBuZWVkXG4gICAgY29uc3QgZHJ1Z3MgPSBhd2FpdCBwcmlzbWEuZHJ1Zy5maW5kTWFueSh7XG4gICAgICB3aGVyZTogc2VhcmNoUXVlcnlcbiAgICAgICAgPyB7XG4gICAgICAgICAgICBuYW1lOiB7XG4gICAgICAgICAgICAgIGNvbnRhaW5zOiBzZWFyY2hRdWVyeSxcbiAgICAgICAgICAgICAgbW9kZTogXCJpbnNlbnNpdGl2ZVwiLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9XG4gICAgICAgIDogdW5kZWZpbmVkLFxuICAgICAgc2VsZWN0OiB7XG4gICAgICAgIGlkOiB0cnVlLFxuICAgICAgICBuYW1lOiB0cnVlLFxuICAgICAgICBidWZmZXJMZXZlbHM6IHtcbiAgICAgICAgICAvLyBGZXRjaCBidWZmZXIgbGV2ZWxzIGZvciBlYWNoIGRydWdcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIGJ1ZmZlckFtb3VudDogdHJ1ZSxcbiAgICAgICAgICAgIHR5cGU6IHRydWUsXG4gICAgICAgICAgICB1bml0Q29uY2VudHJhdGlvbjoge1xuICAgICAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgICAgICBjb25jZW50cmF0aW9uOiB0cnVlLFxuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBiYXRjaDoge1xuICAgICAgICAgIHdoZXJlOiB7XG4gICAgICAgICAgICBzdGF0dXM6IFwiQVZBSUxBQkxFXCIsXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzZWxlY3Q6IHtcbiAgICAgICAgICAgIHJlbWFpbmluZ1F1YW50aXR5OiB0cnVlLFxuICAgICAgICAgICAgZnVsbEFtb3VudDogdHJ1ZSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGNvbnN0IHJlc3VsdHMgPSBkcnVncy5tYXAoKGRydWcpID0+IHtcbiAgICAgIGNvbnN0IGF2YWlsYWJsZUFtb3VudCA9IGRydWcuYmF0Y2gucmVkdWNlKFxuICAgICAgICAoc3VtLCBiYXRjaCkgPT4gc3VtICsgYmF0Y2gucmVtYWluaW5nUXVhbnRpdHksXG4gICAgICAgIDBcbiAgICAgICk7XG5cbiAgICAgIGNvbnN0IGZ1bGxBbW91bnQgPSBkcnVnLmJhdGNoLnJlZHVjZShcbiAgICAgICAgKHN1bSwgYmF0Y2gpID0+IHN1bSArIGJhdGNoLmZ1bGxBbW91bnQsXG4gICAgICAgIDBcbiAgICAgICk7XG4gICAgICAvLyBDYWxjdWxhdGUgdGhlIHRvdGFsIGJ1ZmZlciBhbW91bnQgYWNyb3NzIGFsbCBidWZmZXIgbGV2ZWxzIGZvciB0aGUgZHJ1Z1xuICAgICAgY29uc3QgdG90YWxCdWZmZXJBbW91bnQgPSBkcnVnLmJ1ZmZlckxldmVscy5yZWR1Y2UoXG4gICAgICAgIChzdW0sIGJ1ZmZlckxldmVsKSA9PiBzdW0gKyBidWZmZXJMZXZlbC5idWZmZXJBbW91bnQsXG4gICAgICAgIDBcbiAgICAgICk7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBkcnVnLmlkLFxuICAgICAgICBuYW1lOiBkcnVnLm5hbWUsXG4gICAgICAgIGJ1ZmZlckxldmVsOiB0b3RhbEJ1ZmZlckFtb3VudCwgLy8gVXNlIHRoZSB0b3RhbCBidWZmZXIgYW1vdW50XG4gICAgICAgIGF2YWlsYWJsZUFtb3VudCxcbiAgICAgICAgZnVsbEFtb3VudCxcbiAgICAgICAgYnVmZmVyTGV2ZWxzOiBkcnVnLmJ1ZmZlckxldmVscywgLy8gSW5jbHVkZSBkZXRhaWxlZCBidWZmZXIgbGV2ZWxzIGZvciBVSVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIC8vIEFwcGx5IHNvcnRpbmcgYmFzZWQgb24gc2VsZWN0aW9uXG4gICAgaWYgKHNlbGVjdGlvbikge1xuICAgICAgc3dpdGNoIChzZWxlY3Rpb24pIHtcbiAgICAgICAgY2FzZSBcImJ1ZmZlcmVkXCI6XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdHMuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHJhdGlvIG9mIGF2YWlsYWJsZSBhbW91bnQgdG8gYnVmZmVyIGxldmVsIChubyBjYXBwaW5nKVxuICAgICAgICAgICAgY29uc3QgYVJhdGlvID1cbiAgICAgICAgICAgICAgYS5idWZmZXJMZXZlbCA+IDAgPyBhLmF2YWlsYWJsZUFtb3VudCAvIGEuYnVmZmVyTGV2ZWwgOiAwO1xuICAgICAgICAgICAgY29uc3QgYlJhdGlvID1cbiAgICAgICAgICAgICAgYi5idWZmZXJMZXZlbCA+IDAgPyBiLmF2YWlsYWJsZUFtb3VudCAvIGIuYnVmZmVyTGV2ZWwgOiAwO1xuICAgICAgICAgICAgLy8gU29ydCBieSByYXRpbyAoYXNjZW5kaW5nKVxuICAgICAgICAgICAgcmV0dXJuIGFSYXRpbyAtIGJSYXRpbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgY2FzZSBcInN0b2NrZWRcIjpcbiAgICAgICAgICByZXR1cm4gcmVzdWx0cy5zb3J0KChhLCBiKSA9PiB7XG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgcmF0aW8gb2YgYXZhaWxhYmxlIGFtb3VudCB0byBidWZmZXIgbGV2ZWwgKG5vIGNhcHBpbmcpXG4gICAgICAgICAgICBjb25zdCBhUmF0aW8gPVxuICAgICAgICAgICAgICBhLmJ1ZmZlckxldmVsID4gMCA/IGEuYXZhaWxhYmxlQW1vdW50IC8gYS5idWZmZXJMZXZlbCA6IDA7XG4gICAgICAgICAgICBjb25zdCBiUmF0aW8gPVxuICAgICAgICAgICAgICBiLmJ1ZmZlckxldmVsID4gMCA/IGIuYXZhaWxhYmxlQW1vdW50IC8gYi5idWZmZXJMZXZlbCA6IDA7XG4gICAgICAgICAgICAvLyBTb3J0IGJ5IHJhdGlvIChkZXNjZW5kaW5nKVxuICAgICAgICAgICAgcmV0dXJuIGJSYXRpbyAtIGFSYXRpbztcbiAgICAgICAgICB9KTtcbiAgICAgICAgY2FzZSBcInF1YW50aXR5LWFzY1wiOlxuICAgICAgICAgIHJldHVybiByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGEuYXZhaWxhYmxlQW1vdW50IC0gYi5hdmFpbGFibGVBbW91bnQpO1xuICAgICAgICBjYXNlIFwicXVhbnRpdHktZGVzY1wiOlxuICAgICAgICAgIHJldHVybiByZXN1bHRzLnNvcnQoKGEsIGIpID0+IGIuYXZhaWxhYmxlQW1vdW50IC0gYS5hdmFpbGFibGVBbW91bnQpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIHJldHVybiByZXN1bHRzO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHRzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZHJ1ZyBtb2RlbHMgd2l0aCBidWZmZXIgbGV2ZWw6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gZmV0Y2ggZHJ1ZyBtb2RlbHMgd2l0aCBidWZmZXIgbGV2ZWxcIik7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwZGF0ZURydWdCdWZmZXJMZXZlbChcbiAgZHJ1Z0lkOiBudW1iZXIsXG4gIHR5cGU6IERydWdUeXBlLFxuICBjb25jZW50cmF0aW9uOiBudW1iZXIsXG4gIG5ld0J1ZmZlckxldmVsOiBudW1iZXJcbikge1xuICB0cnkge1xuICAgIGlmICghZHJ1Z0lkIHx8IGRydWdJZCA8PSAwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIGRydWcgSURcIiB9O1xuICAgIH1cbiAgICBpZiAobmV3QnVmZmVyTGV2ZWwgPCAwKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJCdWZmZXIgbGV2ZWwgY2Fubm90IGJlIG5lZ2F0aXZlXCIgfTtcbiAgICB9XG4gICAgLy8gRmluZCB0aGUgdW5pdCBjb25jZW50cmF0aW9uIElEIGZvciB0aGUgZ2l2ZW4gY29uY2VudHJhdGlvblxuICAgIGNvbnN0IHVuaXRDb25jZW50cmF0aW9uID0gYXdhaXQgcHJpc21hLnVuaXRDb25jZW50cmF0aW9uLmZpbmRGaXJzdCh7XG4gICAgICB3aGVyZTogeyBjb25jZW50cmF0aW9uIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXVuaXRDb25jZW50cmF0aW9uKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgbWVzc2FnZTogXCJJbnZhbGlkIGNvbmNlbnRyYXRpb25cIiB9O1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSB0aGUgc3BlY2lmaWMgYnVmZmVyIGxldmVsXG4gICAgY29uc3QgdXBkYXRlZEJ1ZmZlckxldmVsID0gYXdhaXQgcHJpc21hLmJ1ZmZlckxldmVsLnVwc2VydCh7XG4gICAgICB3aGVyZToge1xuICAgICAgICBkcnVnSWRfdHlwZV91bml0Q29uY2VudHJhdGlvbklkOiB7XG4gICAgICAgICAgZHJ1Z0lkLFxuICAgICAgICAgIHR5cGUsXG4gICAgICAgICAgdW5pdENvbmNlbnRyYXRpb25JZDogdW5pdENvbmNlbnRyYXRpb24uaWQsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgdXBkYXRlOiB7XG4gICAgICAgIGJ1ZmZlckFtb3VudDogbmV3QnVmZmVyTGV2ZWwsXG4gICAgICB9LFxuICAgICAgY3JlYXRlOiB7XG4gICAgICAgIGRydWdJZCxcbiAgICAgICAgdHlwZSxcbiAgICAgICAgdW5pdENvbmNlbnRyYXRpb25JZDogdW5pdENvbmNlbnRyYXRpb24uaWQsXG4gICAgICAgIGJ1ZmZlckFtb3VudDogbmV3QnVmZmVyTGV2ZWwsXG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgcmV2YWxpZGF0ZVBhdGgoXCIvaW52ZW50b3J5L2J1ZmZlci1sZXZlbFwiKTtcbiAgICByZXR1cm4ge1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1lc3NhZ2U6IGBCdWZmZXIgbGV2ZWwgZm9yIGRydWcgSUQgJHtkcnVnSWR9ICgke3R5cGV9LCAke2NvbmNlbnRyYXRpb259bWcpIHVwZGF0ZWQgdG8gJHtuZXdCdWZmZXJMZXZlbH1gLFxuICAgICAgYnVmZmVyTGV2ZWw6IHVwZGF0ZWRCdWZmZXJMZXZlbCxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJGYWlsZWQgdG8gdXBkYXRlIGRydWcgYnVmZmVyIGxldmVsOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gdXBkYXRlIGJ1ZmZlciBsZXZlbC4gUGxlYXNlIHRyeSBhZ2Fpbi5cIixcbiAgICB9O1xuICB9XG59XG4iXSwibmFtZXMiOlsiZ2V0VG90YWxQYWdlcyIsImdldEZpbHRlcmVkUGF0aWVudHMiLCJnZXRUb3RhbFBhZ2VzRm9yRmlsdGVyZWREcnVnc0J5TW9kZWwiLCJnZXRUb3RhbFBhZ2VzRm9yRmlsdGVyZWREcnVnc0J5QnJhbmQiLCJnZXRUb3RhbFBhZ2VzRm9yRmlsdGVyZWREcnVnc0J5QmF0Y2giLCJnZXRGaWx0ZXJlZERydWdzQnlNb2RlbCIsImdldEZpbHRlcmVkRHJ1Z3NCeUJyYW5kIiwiZ2V0RmlsdGVyZWREcnVnc0J5QmF0Y2giLCJnZXRQYXRpZW50RGV0YWlscyIsImFkZFBhdGllbnQiLCJ1cGRhdGVQYXRpZW50Iiwic2VhcmNoU3VwcGxpZXJzIiwiYWRkTmV3SXRlbSIsImdldEJhdGNoRGF0YSIsImhhbmRsZUNvbmZpcm1hdGlvbk9mQmF0Y2hTdGF0dXNDaGFuZ2UiLCJnZXRCcmFuZE5hbWUiLCJnZXREcnVnTmFtZSIsImdldEJhdGNoTnVtYmVyIiwiZ2V0QXZhaWxhYmxlRHJ1Z3NUb3RhbFBhZ2VzIiwiZ2V0U3RvY2tCeU1vZGVsIiwiZ2V0U3RvY2tCeUJhdGNoIiwiZ2V0U3RvY2tCeUJyYW5kIiwiZ2V0U3VwcGxpZXJXaXNlUHJpY2luZyIsImdldFN0b2NrQW5hbHlzaXMiLCJnZXRUb3RhbFBhZ2VzRm9yQ29tcGxldGVkRmlsdGVyZWREcnVnc0J5TW9kZWwiLCJnZXRDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlNb2RlbCIsImdldFRvdGFsUGFnZXNGb3JDb21wbGV0ZWRGaWx0ZXJlZERydWdzQnlCcmFuZCIsImdldENvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeUJyYW5kIiwiZ2V0VG90YWxQYWdlc0ZvckNvbXBsZXRlZEZpbHRlcmVkRHJ1Z3NCeUJhdGNoIiwiZ2V0Q29tcGxldGVkRmlsdGVyZWREcnVnc0J5QmF0Y2giLCJnZXRJc3N1ZWRQYXRpZW50cyIsInNlYXJjaERydWdCcmFuZHMiLCJzZWFyY2hEcnVnTW9kZWxzIiwiZ2V0RHJ1Z0NvbmNlbnRyYXRpb25zIiwiZ2V0RHJ1Z01vZGVsU3RhdHMiLCJnZXREcnVnTW9kZWxzV2l0aEJ1ZmZlckxldmVsIiwidXBkYXRlRHJ1Z0J1ZmZlckxldmVsIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/app/lib/actions.ts\n"));

/***/ })

});